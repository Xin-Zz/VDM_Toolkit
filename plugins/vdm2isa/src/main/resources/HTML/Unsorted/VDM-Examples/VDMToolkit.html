<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="isabelle.css"/>
<title>Theory VDMToolkit</title>
</head>


<body>
<div class="head">
<h1>Theory VDMToolkit</h1>
</div>

<pre class="source"><span class="comment1"><span>(</span><span>*</span><span>
  Title : VDM mathematical toolkit, Sep 2021
  Author: Leo Freitas
</span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><span>VDMToolkit</span><span>
  </span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span> 
    </span><span class="comment1"><span>‚Äï ‚Äπ </span><span>Include real fields, list and option types ordering</span><span> ‚Ä∫</span></span><span>
    </span><span class="quoted"><span>"</span><a href="../../HOL/HOL/Complex_Main.html"><span>Complex_Main</span></a><span>"</span></span><span>
</span><span class="comment1"><span>(</span><span>*</span><span>    VDMEisbach</span><span>*</span><span>)</span></span><span>
    </span><span class="quoted"><span>"</span><a href="../../HOL/HOL-Library/List_Lexorder.html"><span>HOL-Library.List_Lexorder</span></a><span>"</span></span><span>
    </span><span class="quoted"><span>"</span><a href="../../HOL/HOL-Library/Option_ord.html"><span>HOL-Library.Option_ord</span></a><span>"</span></span><span>
    </span><span class="quoted"><span>"</span><a href="../../HOL/HOL-Library/LaTeXsugar.html"><span>HOL-Library.LaTeXsugar</span></a><span>"</span></span><span>
    </span><span class="quoted"><span>"</span><a href="../../HOL/HOL-Library/While_Combinator.html"><span>HOL-Library.While_Combinator</span></a><span>"</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span>***************************************************************</span><span>*</span><span>)</span></span><span>      
</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span> </span><span>Basic types</span><span> </span><span>‚Ä∫</span></span></span><span>  

</span><span class="keyword1"><span class="command"><span>type_notation</span></span></span><span> </span><span>bool</span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>ùîπ</span></span><span>"</span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>type_notation</span></span></span><span> </span><span>nat</span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>‚Ñï</span></span><span>"</span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>type_notation</span></span></span><span> </span><span>int</span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>‚Ñ§</span></span><span>"</span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>type_notation</span></span></span><span> </span><span>rat</span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>‚Ñö</span></span><span>"</span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>type_notation</span></span></span><span> </span><span>real</span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>‚Ñù</span></span><span>"</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span>VDM numeric expressions have a series of implicit type widening rules. For 
</span><span>      example, </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">term</span><span class="hidden">&gt;</span></span></span><span class="quoted"><span>‚Äπ</span><span class="main"><span>(</span></span><span class="numeral"><span>4</span></span><span class="main"><span>::</span></span><span class="main"><span>‚Ñï</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span class="main"><span>::</span></span><span class="main"><span>‚Ñï</span></span><span class="main"><span>)</span></span><span>‚Ä∫</span></span></span><span> could lead to an integer </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">term</span><span class="hidden">&gt;</span></span></span><span class="quoted"><span>‚Äπ</span><span class="main"><span>-</span></span><span class="free"><span>y</span></span><span>‚Ä∫</span></span></span><span> result, despite 
</span><span>      all parameters involved being </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">typ</span><span class="hidden">&gt;</span></span></span><span class="quoted"><span>‚Äπ</span><span class="main"><span>‚Ñï</span></span><span>‚Ä∫</span></span></span><span>, whereas in HOL, the result is always a </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">typ</span><span class="hidden">&gt;</span></span></span><span class="quoted"><span>‚Äπ</span><span class="main"><span>‚Ñï</span></span><span>‚Ä∫</span></span></span><span> 
</span><span>      ultimately equal to</span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">term</span><span class="hidden">&gt;</span></span></span><span class="quoted"><span>‚Äπ</span><span class="main"><span>0</span></span><span>‚Ä∫</span></span></span><span>.
</span><span>
</span><span>      Therefore, we take the view of the widest (compatible) type to use in the translation,
</span><span>      where type widening to </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">typ</span><span class="hidden">&gt;</span></span></span><span class="quoted"><span>‚Äπ</span><span class="main"><span>‚Ñö</span></span><span>‚Ä∫</span></span></span><span> or </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">typ</span><span class="hidden">&gt;</span></span></span><span class="quoted"><span>‚Äπ</span><span class="main"><span>‚Ñù</span></span><span>‚Ä∫</span></span></span><span> is dealt with through Isabelle's type coercions.</span><span>‚Ä∫</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>type_synonym</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.VDMNat|type"><span>VDMNat</span></span><span>  </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="main"><span>‚Ñ§</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>type_synonym</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.VDMNat1|type"><span>VDMNat1</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="main"><span>‚Ñ§</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>type_synonym</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.VDMInt|type"><span>VDMInt</span></span><span>  </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="main"><span>‚Ñ§</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>type_synonym</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.VDMRat|type"><span>VDMRat</span></span><span>  </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="main"><span>‚Ñö</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>type_synonym</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.VDMReal|type"><span>VDMReal</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="main"><span>‚Ñù</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>type_synonym</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.VDMChar|type"><span>VDMChar</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>char</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span>Moreover, VDM type invariant checks have to be made explicit in VDM. That is possible either 
</span><span>     through subtyping, which will require substantial proof-engineering machinery; or through explicit
</span><span>     type invariant predicates. We choose the later for all VDM types.</span><span>‚Ä∫</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.inv_VDMNat_def|fact"><span class="entity_def" id="VDMToolkit.inv_VDMNat_def|thm"><span class="entity_def" id="VDMToolkit.inv_VDMNat_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.inv_VDMNat|const"><span>inv_VDMNat</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>‚Ñ§</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="comment1"><span>(</span><span>*</span><span>&lt;</span><span>*</span><span>)</span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span class="main"><span class="main"><span class="main"><span>!</span></span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="comment1"><span>(</span><span>*</span><span>&gt;</span><span>*</span><span>)</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>inv_VDMNat</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>‚â•</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.inv_VDMNat1_def|fact"><span class="entity_def" id="VDMToolkit.inv_VDMNat1_def|thm"><span class="entity_def" id="VDMToolkit.inv_VDMNat1_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.inv_VDMNat1|const"><span>inv_VDMNat1</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>‚Ñ§</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="comment1"><span>(</span><span>*</span><span>&lt;</span><span>*</span><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span class="main"><span class="main"><span class="main"><span>!</span></span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="comment1"><span>(</span><span>*</span><span>&gt;</span><span>*</span><span>)</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>inv_VDMNat1</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span>Bottom invariant check is that value is not undefined.</span><span>‚Ä∫</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.inv_True_def|fact"><span class="entity_def" id="VDMToolkit.inv_True_def|thm"><span class="entity_def" id="VDMToolkit.inv_True_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.inv_True|const"><span>inv_True</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span class="main"><span class="main"><span class="main"><span>!</span></span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>inv_True</span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span class="main"><span>Œª</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span>True</span><span>"</span></span></span><span>
  </span><span class="comment1"><span>(</span><span>*</span><span> Œª x . x ‚â† undefined </span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.inv_bool_def|fact"><span class="entity_def" id="VDMToolkit.inv_bool_def|thm"><span class="entity_def" id="VDMToolkit.inv_bool_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="quoted"><span>"</span><span class="entity"><span class="entity_def" id="VDMToolkit.inv_bool|const"><span>inv_bool</span></span></span><span>"</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>ùîπ</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="comment1"><span>(</span><span>*</span><span>&lt;</span><span>*</span><span>)</span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="comment1"><span>(</span><span>*</span><span>&gt;</span><span>*</span><span>)</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>inv_bool</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_True|const"><span>inv_True</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.inv_VDMChar_def|fact"><span class="entity_def" id="VDMToolkit.inv_VDMChar_def|thm"><span class="entity_def" id="VDMToolkit.inv_VDMChar_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.inv_VDMChar|const"><span>inv_VDMChar</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMChar|type"><span>VDMChar</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="comment1"><span>(</span><span>*</span><span>&lt;</span><span>*</span><span>)</span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span class="main"><span class="main"><span class="main"><span>!</span></span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="comment1"><span>(</span><span>*</span><span>&gt;</span><span>*</span><span>)</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>inv_VDMChar</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_True|const"><span>inv_True</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.inv_VDMInt_def|fact"><span class="entity_def" id="VDMToolkit.inv_VDMInt_def|thm"><span class="entity_def" id="VDMToolkit.inv_VDMInt_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.inv_VDMInt|const"><span>inv_VDMInt</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>‚Ñ§</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="comment1"><span>(</span><span>*</span><span>&lt;</span><span>*</span><span>)</span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span class="main"><span class="main"><span class="main"><span>!</span></span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="comment1"><span>(</span><span>*</span><span>&gt;</span><span>*</span><span>)</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>inv_VDMInt</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_True|const"><span>inv_True</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.inv_VDMReal_def|fact"><span class="entity_def" id="VDMToolkit.inv_VDMReal_def|thm"><span class="entity_def" id="VDMToolkit.inv_VDMReal_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.inv_VDMReal|const"><span>inv_VDMReal</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>‚Ñù</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="comment1"><span>(</span><span>*</span><span>&lt;</span><span>*</span><span>)</span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span class="main"><span class="main"><span class="main"><span>!</span></span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="comment1"><span>(</span><span>*</span><span>&gt;</span><span>*</span><span>)</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>inv_VDMReal</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_True|const"><span>inv_True</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.inv_VDMRat_def|fact"><span class="entity_def" id="VDMToolkit.inv_VDMRat_def|thm"><span class="entity_def" id="VDMToolkit.inv_VDMRat_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.inv_VDMRat|const"><span>inv_VDMRat</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>‚Ñö</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="comment1"><span>(</span><span>*</span><span>&lt;</span><span>*</span><span>)</span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span class="main"><span class="main"><span class="main"><span>!</span></span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="comment1"><span>(</span><span>*</span><span>&gt;</span><span>*</span><span>)</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>inv_VDMRat</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_True|const"><span>inv_True</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span>"</span></span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span>
lemma l_inv_True_undefined[simp]: "¬¨ inv_True undefined" unfolding inv_True_def by simp
lemma l_inv_bool_undefined[simp]: "¬¨ inv_bool undefined" unfolding inv_bool_def by simp

lemma l_inv_True_True[simp]: "r ‚â† undefined ‚üπ inv_True r" 
  by (simp add: inv_True_def)  
</span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_inv_True_True|fact"><span class="entity_def" id="VDMToolkit.l_inv_True_True|thm"><span>l_inv_True_True</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_True|const"><span>inv_True</span></a><span> </span><span class="free"><span>r</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_True_def|fact"><span>inv_True_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span>In general, VDM narrow expressions are tricky, given they can downcast types according 
</span><span>  to the user-specified type of interest. In particular, at least for </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">typ</span><span class="hidden">&gt;</span></span></span><span class="quoted"><span>‚Äπ</span><span class="main"><span>‚Ñù</span></span><span>‚Ä∫</span></span></span><span> and </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">typ</span><span class="hidden">&gt;</span></span></span><span class="quoted"><span>‚Äπ</span><span class="main"><span>‚Ñö</span></span><span>‚Ä∫</span></span></span><span> 
</span><span>  (</span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">term</span><span class="hidden">&gt;</span></span></span><span class="quoted"><span>‚Äπ</span><span class="free"><span>floor_ceiling</span></span><span>‚Ä∫</span></span></span><span> type class), type narrowing to </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">typ</span><span class="hidden">&gt;</span></span></span><span class="quoted"><span>‚Äπ</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMInt|type"><span>VDMInt</span></a><span>‚Ä∫</span></span></span><span> is fine</span><span>‚Ä∫</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.vdm_narrow_real_def|fact"><span class="entity_def" id="VDMToolkit.vdm_narrow_real_def|thm"><span class="entity_def" id="VDMToolkit.vdm_narrow_real_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> 
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.vdm_narrow_real|const"><span>vdm_narrow_real</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><span>floor_ceiling</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMInt|type"><span>VDMInt</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>vdm_narrow_real</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span class="main"><span>‚åä</span></span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span class="main"><span>‚åã</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.vdm_div_def|fact"><span class="entity_def" id="VDMToolkit.vdm_div_def|thm"><span class="entity_def" id="VDMToolkit.vdm_div_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.vdm_div|const"><span>vdm_div</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMInt|type"><span>VDMInt</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMInt|type"><span>VDMInt</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMInt|type"><span>VDMInt</span></a><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>infixl</span></span></span><span> </span><span class="quoted"><span>"</span><span class="keyword1"><span>vdmdiv</span></span><span>"</span></span><span> 70</span><span class="main"><span>)</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span class="main"><span class="main"><span class="main"><span>!</span></span></span></span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="keyword1"><span class="free"><span>vdmdiv</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>y</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> 
    </span><span class="main"><span>(</span></span><span class="keyword1"><span>if</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>y</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>then</span></span><span>
       </span><span class="main"><span>-</span></span><span class="main"><span>‚åä</span></span><span class="main"><span>¬¶</span></span><span class="main"><span>-</span></span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>y</span></span></span></span><span class="main"><span>¬¶</span></span><span class="main"><span>‚åã</span></span><span>
    </span><span class="keyword1"><span>else</span></span><span>  
       </span><span class="main"><span>‚åä</span></span><span class="main"><span>¬¶</span></span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>y</span></span></span></span><span class="main"><span>¬¶</span></span><span class="main"><span>‚åã</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>  

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.pre_vdm_div_def|fact"><span class="entity_def" id="VDMToolkit.pre_vdm_div_def|thm"><span class="entity_def" id="VDMToolkit.pre_vdm_div_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.pre_vdm_div|const"><span>pre_vdm_div</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMInt|type"><span>VDMInt</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMInt|type"><span>VDMInt</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>pre_vdm_div</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>y</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>y</span></span></span></span><span> </span><span class="main"><span>‚â†</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.post_vdm_div_def|fact"><span class="entity_def" id="VDMToolkit.post_vdm_div_def|thm"><span class="entity_def" id="VDMToolkit.post_vdm_div_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.post_vdm_div|const"><span>post_vdm_div</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMInt|type"><span>VDMInt</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMInt|type"><span>VDMInt</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMInt|type"><span>VDMInt</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>post_vdm_div</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>y</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>RESULT</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> 
    </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="main"><span>‚â•</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>‚àß</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>y</span></span></span></span><span> </span><span class="main"><span>‚â•</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>‚ü∂</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>RESULT</span></span></span></span><span> </span><span class="main"><span>‚â•</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚àß</span></span><span>
    </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>‚àß</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>y</span></span></span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>‚ü∂</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>RESULT</span></span></span></span><span> </span><span class="main"><span>‚â•</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚àß</span></span><span>
    </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>‚àß</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>y</span></span></span></span><span> </span><span class="main"><span>‚ü∂</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>RESULT</span></span></span></span><span> </span><span class="main"><span>‚â§</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚àß</span></span><span>
    </span><span class="main"><span>(</span></span><span class="main"><span>0</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="main"><span>‚àß</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>y</span></span></span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>‚ü∂</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>RESULT</span></span></span></span><span> </span><span class="main"><span>‚â§</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="comment1"><span>(</span><span>*</span><span> Could perhaps strengthen the &lt; 0 case for when 1 &lt; x? </span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span>VDM has div and mod but also rem for remainder. This is treated 
</span><span>differently depending on whether the values involved have different sign.
</span><span>For now, we add these equivalences below, but might have to pay price in proof
</span><span>later. To illustrate this difference consider the result of 
</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>lemma</span></span><span> </span><span class="quoted"><span>‚Äπ</span><span class="main"><span>-</span></span><span class="numeral"><span>7</span></span><span> </span><span class="keyword1"><span>div</span></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>3</span></span><span class="main"><span>::</span></span><span class="main"><span>‚Ñ§</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>-</span></span><span class="numeral"><span>3</span></span><span>‚Ä∫</span></span><span> </span><span class="quasi_keyword"><span>by</span></span><span> </span><span class="operator"><span>simp</span></span><span class="antiquote"><span>}</span></span></span><span> versus 
</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>lemma</span></span><span> </span><span class="quoted"><span>‚Äπ</span><span class="main"><span>-</span></span><span class="numeral"><span>7</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_div|const"><span>vdmdiv</span></a></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>3</span></span><span class="main"><span>::</span></span><span class="main"><span>‚Ñ§</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>-</span></span><span class="numeral"><span>2</span></span><span>‚Ä∫</span></span><span> </span><span class="quasi_keyword"><span>by</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_div_def|fact"><span>vdm_div_def</span></a><span class="main"><span>)</span></span><span class="antiquote"><span>}</span></span></span><span>‚Ä∫</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.vdm_mod_def|fact"><span class="entity_def" id="VDMToolkit.vdm_mod_def|thm"><span class="entity_def" id="VDMToolkit.vdm_mod_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> 
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.vdm_mod|const"><span>vdm_mod</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMInt|type"><span>VDMInt</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMInt|type"><span>VDMInt</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMInt|type"><span>VDMInt</span></a><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>infixl</span></span></span><span> </span><span class="quoted"><span>"</span><span class="keyword1"><span>vdmmod</span></span><span>"</span></span><span> 70</span><span class="main"><span>)</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span class="main"><span class="main"><span class="main"><span>!</span></span></span></span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="keyword1"><span class="free"><span>vdmmod</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>y</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>y</span></span></span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>‚åä</span></span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>y</span></span></span></span><span class="main"><span>‚åã</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.pre_vdm_mod_def|fact"><span class="entity_def" id="VDMToolkit.pre_vdm_mod_def|thm"><span class="entity_def" id="VDMToolkit.pre_vdm_mod_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.pre_vdm_mod|const"><span>pre_vdm_mod</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMInt|type"><span>VDMInt</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMInt|type"><span>VDMInt</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>pre_vdm_mod</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>y</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>y</span></span></span></span><span> </span><span class="main"><span>‚â†</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.post_vdm_mod_def|fact"><span class="entity_def" id="VDMToolkit.post_vdm_mod_def|thm"><span class="entity_def" id="VDMToolkit.post_vdm_mod_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.post_vdm_mod|const"><span>post_vdm_mod</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMInt|type"><span>VDMInt</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMInt|type"><span>VDMInt</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMInt|type"><span>VDMInt</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>post_vdm_mod</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>y</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>RESULT</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> 
    </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>y</span></span></span></span><span> </span><span class="main"><span>‚â•</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>‚ü∂</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>RESULT</span></span></span></span><span> </span><span class="main"><span>‚â•</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚àß</span></span><span>
    </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>y</span></span></span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>‚ü∂</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>RESULT</span></span></span></span><span> </span><span class="main"><span>‚â§</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.vdm_rem_def|fact"><span class="entity_def" id="VDMToolkit.vdm_rem_def|thm"><span class="entity_def" id="VDMToolkit.vdm_rem_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> 
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.vdm_rem|const"><span>vdm_rem</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMInt|type"><span>VDMInt</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMInt|type"><span>VDMInt</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMInt|type"><span>VDMInt</span></a><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>infixl</span></span></span><span> </span><span class="quoted"><span>"</span><span class="keyword1"><span>vdmrem</span></span><span>"</span></span><span> 70</span><span class="main"><span>)</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span class="main"><span class="main"><span class="main"><span>!</span></span></span></span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="keyword1"><span class="free"><span>vdmrem</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>y</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>y</span></span></span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_div|const"><span>vdmdiv</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>y</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.pre_vdm_rem_def|fact"><span class="entity_def" id="VDMToolkit.pre_vdm_rem_def|thm"><span class="entity_def" id="VDMToolkit.pre_vdm_rem_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.pre_vdm_rem|const"><span>pre_vdm_rem</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMInt|type"><span>VDMInt</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMInt|type"><span>VDMInt</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>pre_vdm_rem</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>y</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>y</span></span></span></span><span> </span><span class="main"><span>‚â†</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.post_vdm_rem_def|fact"><span class="entity_def" id="VDMToolkit.post_vdm_rem_def|thm"><span class="entity_def" id="VDMToolkit.post_vdm_rem_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.post_vdm_rem|const"><span>post_vdm_rem</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMInt|type"><span>VDMInt</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMInt|type"><span>VDMInt</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMInt|type"><span>VDMInt</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>post_vdm_rem</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>y</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>RESULT</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> 
    </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="main"><span>‚â•</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>‚ü∂</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>RESULT</span></span></span></span><span> </span><span class="main"><span>‚â•</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚àß</span></span><span>
    </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>‚ü∂</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>RESULT</span></span></span></span><span> </span><span class="main"><span>‚â§</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span>VDM has the power (\verb'**') operator for numbers, which is </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">term</span><span class="hidden">&gt;</span></span></span><span class="quoted"><span>‚Äπ</span><span>Transcendental.powr</span><span>‚Ä∫</span></span></span><span> in Issable. 
</span><span>   Like in VDM, it accepts non-integer exponents. Isabelle have </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">term</span><span class="hidden">&gt;</span></span></span><span class="quoted"><span>‚Äπ</span><span class="free"><span>x</span></span><span class="main"><span>^</span></span><span class="free"><span>y</span></span><span>‚Ä∫</span></span></span><span> for exponent </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">term</span><span class="hidden">&gt;</span></span></span><span class="quoted"><span>‚Äπ</span><span class="free"><span>y</span></span><span>‚Ä∫</span></span></span><span> of type </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">typ</span><span class="hidden">&gt;</span></span></span><span class="quoted"><span>‚Äπ</span><span class="main"><span>‚Ñï</span></span><span>‚Ä∫</span></span></span><span>, 
</span><span>   and </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">term</span><span class="hidden">&gt;</span></span></span><span class="quoted"><span>‚Äπ</span><span class="free"><span>x</span></span><span> </span><span class="keyword1"><span>powr</span></span><span> </span><span class="free"><span>y</span></span><span>‚Ä∫</span></span></span><span> for exponent </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">term</span><span class="hidden">&gt;</span></span></span><span class="quoted"><span>‚Äπ</span><span class="free"><span>y</span></span><span>‚Ä∫</span></span></span><span> that is a subset of the </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">typ</span><span class="hidden">&gt;</span></span></span><span class="quoted"><span>‚Äπ</span><span class="main"><span>‚Ñù</span></span><span>‚Ä∫</span></span></span><span> (i.e. real normed algebra natural logarithms; 
</span><span>  or natural logarithm exponentiation). We take the latter for translation.</span><span>‚Ä∫</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.vdm_pow_def|fact"><span class="entity_def" id="VDMToolkit.vdm_pow_def|thm"><span class="entity_def" id="VDMToolkit.vdm_pow_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.vdm_pow|const"><span>vdm_pow</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><span>ln</span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><span>ln</span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><span>ln</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>infixl</span></span></span><span> </span><span class="quoted"><span>"</span><span class="keyword1"><span>vdmpow</span></span><span>"</span></span><span> 80</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>                     
  </span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span class="main"><span class="main"><span class="main"><span>!</span></span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="keyword1"><span class="free"><span>vdmpow</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>y</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="keyword1"><span>powr</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>y</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.pre_vdm_pow_def|fact"><span class="entity_def" id="VDMToolkit.pre_vdm_pow_def|thm"><span class="entity_def" id="VDMToolkit.pre_vdm_pow_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.pre_vdm_pow|const"><span>pre_vdm_pow</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><span>ln</span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><span>ln</span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>pre_vdm_pow</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>y</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span>True</span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.post_vdm_pow_def|fact"><span class="entity_def" id="VDMToolkit.post_vdm_pow_def|thm"><span class="entity_def" id="VDMToolkit.post_vdm_pow_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.post_vdm_pow|const"><span>post_vdm_pow</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><span>ln</span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><span>ln</span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><span>ln</span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>post_vdm_pow</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>y</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>RESULT</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span>True</span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span>For VDM floor and abs, we use Isabelle's. Note that in VDM abs of </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">typ</span><span class="hidden">&gt;</span></span></span><span class="quoted"><span>‚Äπ</span><span class="main"><span>‚Ñ§</span></span><span>‚Ä∫</span></span></span><span>  
</span><span>will return </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">typ</span><span class="hidden">&gt;</span></span></span><span class="quoted"><span>‚Äπ</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMNat|type"><span>VDMNat</span></a><span>‚Ä∫</span></span></span><span>, as the underlying type invariant might require further filtering 
</span><span>on the function's results.</span><span> </span><span>‚Ä∫</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>find_theorems</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>_</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>_</span></span><span class="main"><span>::</span></span><span class="tfree"><span>'a</span></span><span> </span><span>list</span><span> </span><span>list</span><span class="main"><span>)</span></span><span>"</span></span></span><span> name</span><span class="main"><span>:</span></span><span>concat</span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.vdm_floor_def|fact"><span class="entity_def" id="VDMToolkit.vdm_floor_def|thm"><span class="entity_def" id="VDMToolkit.vdm_floor_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> 
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.vdm_floor|const"><span>vdm_floor</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMReal|type"><span>VDMReal</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMNat|type"><span>VDMNat</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span class="main"><span class="main"><span class="main"><span>!</span></span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>vdm_floor</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span class="main"><span>‚åä</span></span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span class="main"><span>‚åã</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span>The postcondition for flooring, takes the axiom defined in the archimedian field type class</span><span>‚Ä∫</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.post_vdm_floor_def|fact"><span class="entity_def" id="VDMToolkit.post_vdm_floor_def|thm"><span class="entity_def" id="VDMToolkit.post_vdm_floor_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.post_vdm_floor|const"><span>post_vdm_floor</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMReal|type"><span>VDMReal</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMNat|type"><span>VDMNat</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>post_vdm_floor</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>RESULT</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> 
    </span><span>of_int</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>RESULT</span></span></span></span><span> </span><span class="main"><span>‚â§</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="main"><span>‚àß</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>of_int</span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>RESULT</span></span></span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>    

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.vdm_abs_def|fact"><span class="entity_def" id="VDMToolkit.vdm_abs_def|thm"><span class="entity_def" id="VDMToolkit.vdm_abs_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> 
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.vdm_abs|const"><span>vdm_abs</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><span class="main"><span>{</span></span><span>zero</span><span class="main"><span>,</span></span><span>abs</span><span class="main"><span>,</span></span><span>ord</span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><span class="main"><span>{</span></span><span>zero</span><span class="main"><span>,</span></span><span>abs</span><span class="main"><span>,</span></span><span>ord</span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span class="main"><span class="main"><span class="main"><span>!</span></span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>vdm_abs</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span class="main"><span>¬¶</span></span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span class="main"><span>¬¶</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span>Absolute postcondition does not use </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">term</span><span class="hidden">&gt;</span></span></span><span class="quoted"><span>‚Äπ</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMNat|const"><span>inv_VDMNat</span></a><span>‚Ä∫</span></span></span><span> because the result could also be of type </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">typ</span><span class="hidden">&gt;</span></span></span><span class="quoted"><span>‚Äπ</span><span class="main"><span>‚Ñù</span></span><span>‚Ä∫</span></span></span><span>.</span><span>‚Ä∫</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.post_vdm_abs_def|fact"><span class="entity_def" id="VDMToolkit.post_vdm_abs_def|thm"><span class="entity_def" id="VDMToolkit.post_vdm_abs_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.post_vdm_abs|const"><span>post_vdm_abs</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><span class="main"><span>{</span></span><span>zero</span><span class="main"><span>,</span></span><span>abs</span><span class="main"><span>,</span></span><span>ord</span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><span class="main"><span>{</span></span><span>zero</span><span class="main"><span>,</span></span><span>abs</span><span class="main"><span>,</span></span><span>ord</span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>post_vdm_abs</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>RESULT</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>RESULT</span></span></span></span><span> </span><span class="main"><span>‚â•</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="comment1"><span>(</span><span>*</span><span>inv_VDMNat RESULT"</span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span>For equally signed  operands of VDM's div/mod, we can get back to Isabelle's version of the operators, 
</span><span>  which will give access to various lemmas useful in proofs. So, if possible, automatically jump to the Isabelle versions.</span><span>‚Ä∫</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.vdmdiv_div_ge0|fact"><span class="entity_def" id="VDMToolkit.vdmdiv_div_ge0|thm"><span>vdmdiv_div_ge0</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>0</span></span><span> </span><span class="main"><span>‚â§</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>‚â§</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_div|const"><span>vdmdiv</span></a></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="keyword1"><span>div</span></span><span> </span><span class="free"><span>y</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_div_def|fact"><span>vdm_div_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induct</span></span><span> </span><span class="quoted"><span class="free"><span>y</span></span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>divide_less_0_iff</span><span> </span><span>floor_divide_of_int_eq</span><span> </span><span>floor_less_zero</span><span> </span><span>floor_of_int</span><span> </span><span>floor_of_nat</span><span> </span><span>le_less_trans</span><span> </span><span>less_irrefl</span><span> </span><span>of_int_of_nat_eq</span><span> </span><span>of_nat_less_0_iff</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.vdmdiv_div_le0|fact"><span class="entity_def" id="VDMToolkit.vdmdiv_div_le0|thm"><span>vdmdiv_div_le0</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚â§</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>‚â§</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_div|const"><span>vdmdiv</span></a></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="keyword1"><span>div</span></span><span> </span><span class="free"><span>y</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_div_def|fact"><span>vdm_div_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induct</span></span><span> </span><span class="quoted"><span class="free"><span>y</span></span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>safe</span></span><span>
   </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>divide_less_0_iff</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>floor_divide_of_int_eq</span><span> </span><span>minus_add_distrib</span><span> </span><span>minus_divide_right</span><span> </span><span>of_int_1</span><span> </span><span>of_int_add</span><span> </span><span>of_int_minus</span><span> </span><span>of_int_of_nat_eq</span><span> </span><span>uminus_add_conv_diff</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.vdmmod_mod|fact"><span class="entity_def" id="VDMToolkit.vdmmod_mod|thm"><span>vdmmod_mod</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_mod|const"><span>vdmmod</span></a></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="keyword1"><span>mod</span></span><span> </span><span class="free"><span>y</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_mod_def|fact"><span>vdm_mod_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induct</span></span><span> </span><span class="quoted"><span class="free"><span>y</span></span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span>
   </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>floor_divide_of_int_eq</span><span> </span><span>minus_mult_div_eq_mod</span><span> </span><span>of_int_of_nat_eq</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> ccfv_threshold</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>floor_divide_of_int_eq</span><span> </span><span>minus_div_mult_eq_mod</span><span> </span><span>mult.commute</span><span> </span><span>of_int_diff</span><span> </span><span>of_int_eq_1_iff</span><span> </span><span>of_int_minus</span><span> </span><span>of_int_of_nat_eq</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_vdm_div_fsb|fact"><span class="entity_def" id="VDMToolkit.l_vdm_div_fsb|thm"><span>l_vdm_div_fsb</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.pre_vdm_div|const"><span>pre_vdm_div</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.post_vdm_div|const"><span>post_vdm_div</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_div|const"><span>vdmdiv</span></a></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.pre_vdm_div_def|fact"><span>pre_vdm_div_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.post_vdm_div_def|fact"><span>post_vdm_div_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>safe</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>div_int_pos_iff</span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdmdiv_div_ge0|fact"><span>vdmdiv_div_ge0</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>presburger</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_div_def|fact"><span>vdm_div_def</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>divide_neg_neg</span><span> </span><span>floor_less_iff</span><span> </span><span>of_int_0_less_iff</span><span> </span><span>of_int_minus</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_div_def|fact"><span>vdm_div_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>divide_less_0_iff</span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>auto</span></span><span class="main"><span class="keyword3"><span>[</span></span></span><span>1</span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_div_def|fact"><span>vdm_div_def</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_vdm_mod_fsb|fact"><span class="entity_def" id="VDMToolkit.l_vdm_mod_fsb|thm"><span>l_vdm_mod_fsb</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.pre_vdm_mod|const"><span>pre_vdm_mod</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.post_vdm_mod|const"><span>post_vdm_mod</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_mod|const"><span>vdmmod</span></a></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.pre_vdm_mod_def|fact"><span>pre_vdm_mod_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.post_vdm_mod_def|fact"><span>post_vdm_mod_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>safe</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_mod_def|fact"><span>vdm_mod_def</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_vdm_rem_fsb|fact"><span class="entity_def" id="VDMToolkit.l_vdm_rem_fsb|thm"><span>l_vdm_rem_fsb</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.pre_vdm_rem|const"><span>pre_vdm_rem</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.post_vdm_rem|const"><span>post_vdm_rem</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_rem|const"><span>vdmrem</span></a></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.pre_vdm_rem_def|fact"><span>pre_vdm_rem_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.post_vdm_rem_def|fact"><span>post_vdm_rem_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_rem_def|fact"><span>vdm_rem_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>safe</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>y</span></span><span> </span><span class="main"><span>‚â•</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>Euclidean_Division.pos_mod_sign</span><span> </span><span>add.commute</span><span> </span><span>add.left_neutral</span><span> </span><span>add_mono_thms_linordered_semiring</span><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>div_mult_mod_eq</span><span> </span><span>le_less</span><span> </span><span>mult.commute</span><span class="main"><span>)</span></span><span>
   </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>defer</span></span></span></span></span><span>
   </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>y</span></span><span> </span><span class="main"><span>‚â§</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span> 
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>div_mod_decomp_int</span><span> </span><span>group_cancel.rule0</span><span> </span><span>le_add_same_cancel1</span><span> </span><span>le_less</span><span> </span><span>mult.commute</span><span> </span><span>neg_mod_sign</span><span> </span><span>not_le</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_div_def|fact"><span>vdm_div_def</span></a><span>
   </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>safe</span></span><span class="main"><span>)</span></span><span>
     </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> ccfv_SIG</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>divide_minus_left</span><span> </span><span>floor_divide_lower</span><span> </span><span>floor_less_iff</span><span> </span><span>floor_uminus_of_int</span><span> </span><span>mult.commute</span><span> </span><span>of_int_mult</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>divide_neg_pos</span><span class="main"><span>)</span></span><span>
   </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>ceiling_def</span><span> </span><span>ceiling_divide_eq_div</span><span> </span><span>minus_mod_eq_mult_div</span><span> </span><span>neg_mod_sign</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>divide_pos_neg</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span>VDM tokens</span><span>‚Ä∫</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> 
</span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span>VDM tokens are like a record with a parametric type (i.e. you can 
</span><span>have anything inside a \verb'mk_token(x)' expression, akin to a VDM record
</span><span> \verb'Token :: token : ?', where \verb'?' refers to \verb'vdmj' wildcard type. 
</span><span>Isabelle does not allow parametric records, hence we use datatypes instead. 
</span><span>
</span><span>This will impose the restriction on token variables during translation: they will always 
</span><span>have to be of the same inner type; whereas for token constants, then any type is acceptable.</span><span> </span><span>‚Ä∫</span></span></span><span>
</span><span class="comment1"><span>(</span><span>*</span><span> types T = token; values x: T = mk_token("ABC"); y: T = mk_token(10); --wrong type inference for 'a
   values z: token = mk_token("ABC"); w: token = mk_token(10); -- okay given no specific type synonym for 'a </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.arity_full_exhaustive_VDMToken|fact"><span class="entity_def" id="VDMToolkit.VDMToken.full_exhaustive_VDMToken.simps|fact"><span class="entity_def" id="VDMToolkit.full_exhaustive_VDMToken_inst.full_exhaustive_VDMToken|fact"><span class="entity_def" id="VDMToolkit.arity_narrowing_VDMToken|fact"><span class="entity_def" id="VDMToolkit.VDMToken.narrowing_VDMToken.simps|fact"><span class="entity_def" id="VDMToolkit.narrowing_VDMToken_inst.narrowing_VDMToken|fact"><span class="entity_def" id="VDMToolkit.arity_random_VDMToken|fact"><span class="entity_def" id="VDMToolkit.random_VDMToken_def|fact"><span class="entity_def" id="VDMToolkit.random_VDMToken_inst.random_VDMToken|fact"><span class="entity_def" id="VDMToolkit.VDMToken.random_aux.simps|fact"><span class="entity_def" id="VDMToolkit.random_aux_VDMToken_def|fact"><span class="entity_def" id="VDMToolkit.VDMToken.size_neq|fact"><span class="entity_def" id="VDMToolkit.VDMToken.size_gen_o_map|fact"><span class="entity_def" id="VDMToolkit.VDMToken.size_gen|fact"><span class="entity_def" id="VDMToolkit.VDMToken.size|fact"><span class="entity_def" id="VDMToolkit.arity_size_VDMToken|fact"><span class="entity_def" id="VDMToolkit.VDMToken.size_VDMToken_overloaded_def|fact"><span class="entity_def" id="VDMToolkit.size_VDMToken_inst.size_VDMToken|fact"><span class="entity_def" id="VDMToolkit.VDMToken.size_VDMToken_def|fact"><span class="entity_def" id="VDMToolkit.VDMToken.Quotient|fact"><span class="entity_def" id="VDMToolkit.VDMToken.Domainp_rel|fact"><span class="entity_def" id="VDMToolkit.VDMToken.right_unique_rel|fact"><span class="entity_def" id="VDMToolkit.VDMToken.left_unique_rel|fact"><span class="entity_def" id="VDMToolkit.VDMToken.right_total_rel|fact"><span class="entity_def" id="VDMToolkit.VDMToken.left_total_rel|fact"><span class="entity_def" id="VDMToolkit.VDMToken.bi_unique_rel|fact"><span class="entity_def" id="VDMToolkit.VDMToken.bi_total_rel|fact"><span class="entity_def" id="VDMToolkit.VDMToken.simps|fact"><span class="entity_def" id="VDMToolkit.VDMToken.rel_induct|fact"><span class="entity_def" id="VDMToolkit.VDMToken.rec_transfer|fact"><span class="entity_def" id="VDMToolkit.VDMToken.rec_o_map|fact"><span class="entity_def" id="VDMToolkit.VDMToken.rec|fact"><span class="entity_def" id="VDMToolkit.VDMToken.induct|fact"><span class="entity_def" id="VDMToolkit.VDMToken.set_intros|fact"><span class="entity_def" id="VDMToolkit.VDMToken.set_cases|fact"><span class="entity_def" id="VDMToolkit.VDMToken.set|fact"><span class="entity_def" id="VDMToolkit.VDMToken.rel_intros|fact"><span class="entity_def" id="VDMToolkit.VDMToken.rel_inject|fact"><span class="entity_def" id="VDMToolkit.VDMToken.rel_cases|fact"><span class="entity_def" id="VDMToolkit.VDMToken.pred_inject|fact"><span class="entity_def" id="VDMToolkit.VDMToken.map|fact"><span class="entity_def" id="VDMToolkit.VDMToken.ctr_transfer|fact"><span class="entity_def" id="VDMToolkit.VDMToken.case_transfer|fact"><span class="entity_def" id="VDMToolkit.VDMToken.splits|fact"><span class="entity_def" id="VDMToolkit.VDMToken.split_asm|fact"><span class="entity_def" id="VDMToolkit.VDMToken.split|fact"><span class="entity_def" id="VDMToolkit.VDMToken.nchotomy|fact"><span class="entity_def" id="VDMToolkit.VDMToken.inject|fact"><span class="entity_def" id="VDMToolkit.VDMToken.exhaust|fact"><span class="entity_def" id="VDMToolkit.VDMToken.case_distrib|fact"><span class="entity_def" id="VDMToolkit.VDMToken.case_cong_weak|fact"><span class="entity_def" id="VDMToolkit.VDMToken.case_cong|fact"><span class="entity_def" id="VDMToolkit.VDMToken.case|fact"><span class="entity_def" id="VDMToolkit.VDMToken.eq.simps|fact"><span class="entity_def" id="VDMToolkit.VDMToken.eq.refl|fact"><span class="entity_def" id="VDMToolkit.arity_equal_VDMToken|fact"><span class="entity_def" id="VDMToolkit.equal_VDMToken_def|fact"><span class="entity_def" id="VDMToolkit.equal_VDMToken_inst.equal_VDMToken|fact"><span class="entity_def" id="VDMToolkit.arity_partial_term_of_VDMToken|fact"><span class="entity_def" id="VDMToolkit.partial_term_of_VDMToken_triv|fact"><span class="entity_def" id="VDMToolkit.partial_term_of_VDMToken_inst.partial_term_of_VDMToken|fact"><span class="entity_def" id="VDMToolkit.arity_term_of_VDMToken|fact"><span class="entity_def" id="VDMToolkit.term_of_VDMToken_triv|fact"><span class="entity_def" id="VDMToolkit.term_of_VDMToken_inst.term_of_VDMToken|fact"><span class="entity_def" id="VDMToolkit.VDMToken.case_VDMToken_def|fact"><span class="entity_def" id="VDMToolkit.VDMToken.ctor_rec_VDMToken_def|fact"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.set_transfer|fact"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.set_map|fact"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.rel_transfer|fact"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.rel_transp|fact"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.rel_symp|fact"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.rel_reflp|fact"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.rel_refl_strong|fact"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.rel_refl|fact"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.rel_cong_simp|fact"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.rel_cong|fact"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.rel_mono_strong|fact"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.rel_mono|fact"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.rel_map|fact"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.rel_Grp|fact"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.rel_flip|fact"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.rel_eq_onp|fact"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.rel_eq|fact"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.rel_conversep|fact"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.rel_compp_Grp|fact"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.rel_compp|fact"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.pred_set|fact"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.pred_True|fact"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.pred_transfer|fact"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.pred_rel|fact"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.pred_map|fact"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.pred_cong_simp|fact"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.pred_cong|fact"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.pred_mono_strong|fact"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.pred_mono|fact"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.map_ident|fact"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.map_transfer|fact"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.map_id0|fact"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.map_id|fact"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.map_cong_pred|fact"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.map_cong_simp|fact"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.map_cong|fact"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.map_cong0|fact"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.map_comp|fact"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.inj_map_strong|fact"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.inj_map|fact"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.in_rel|fact"><span class="entity_def" id="VDMToolkit.VDMToken.wit_VDMToken_def|fact"><span class="entity_def" id="VDMToolkit.VDMToken.pred_VDMToken_def|fact"><span class="entity_def" id="VDMToolkit.VDMToken.rel_VDMToken_def|fact"><span class="entity_def" id="VDMToolkit.VDMToken.set_VDMToken_def|fact"><span class="entity_def" id="VDMToolkit.VDMToken.map_VDMToken_def|fact"><span class="entity_def" id="VDMToolkit.VDMToken.dtor_VDMToken_def|fact"><span class="entity_def" id="VDMToolkit.VDMToken.ctor_fold_VDMToken_def|fact"><span class="entity_def" id="VDMToolkit.VDMToken.ctor_VDMToken_def|fact"><span class="entity_def" id="VDMToolkit.arity_typerep_VDMToken|fact"><span class="entity_def" id="VDMToolkit.typerep_VDMToken_def|fact"><span class="entity_def" id="VDMToolkit.typerep_VDMToken_inst.typerep_VDMToken|fact"><span class="entity_def" id="VDMToolkit.VDMToken.Abs_VDMToken_induct|fact"><span class="entity_def" id="VDMToolkit.VDMToken.Rep_VDMToken_induct|fact"><span class="entity_def" id="VDMToolkit.VDMToken.Abs_VDMToken_cases|fact"><span class="entity_def" id="VDMToolkit.VDMToken.Rep_VDMToken_cases|fact"><span class="entity_def" id="VDMToolkit.VDMToken.Abs_VDMToken_inject|fact"><span class="entity_def" id="VDMToolkit.VDMToken.Rep_VDMToken_inject|fact"><span class="entity_def" id="VDMToolkit.VDMToken.Abs_VDMToken_inverse|fact"><span class="entity_def" id="VDMToolkit.VDMToken.Rep_VDMToken_inverse|fact"><span class="entity_def" id="VDMToolkit.VDMToken.Rep_VDMToken|fact"><span class="entity_def" id="VDMToolkit.VDMToken.type_definition_VDMToken|fact"><span class="entity_def" id="VDMToolkit.arity_type_VDMToken|fact"><span class="entity_def" id="VDMToolkit.VDMToken.str_init_VDMToken_def|fact"><span class="entity_def" id="VDMToolkit.VDMToken.arity_typerep_VDMToken_IITN_VDMToken|fact"><span class="entity_def" id="VDMToolkit.VDMToken.typerep_VDMToken_IITN_VDMToken_def|fact"><span class="entity_def" id="VDMToolkit.VDMToken.typerep_VDMToken_IITN_VDMToken_inst.typerep_VDMToken_IITN_VDMToken|fact"><span class="entity_def" id="VDMToolkit.VDMToken.VDMToken_IITN_VDMToken.Abs_VDMToken_IITN_VDMToken_induct|fact"><span class="entity_def" id="VDMToolkit.VDMToken.VDMToken_IITN_VDMToken.Rep_VDMToken_IITN_VDMToken_induct|fact"><span class="entity_def" id="VDMToolkit.VDMToken.VDMToken_IITN_VDMToken.Abs_VDMToken_IITN_VDMToken_cases|fact"><span class="entity_def" id="VDMToolkit.VDMToken.VDMToken_IITN_VDMToken.Rep_VDMToken_IITN_VDMToken_cases|fact"><span class="entity_def" id="VDMToolkit.VDMToken.VDMToken_IITN_VDMToken.Abs_VDMToken_IITN_VDMToken_inject|fact"><span class="entity_def" id="VDMToolkit.VDMToken.VDMToken_IITN_VDMToken.Rep_VDMToken_IITN_VDMToken_inject|fact"><span class="entity_def" id="VDMToolkit.VDMToken.VDMToken_IITN_VDMToken.Abs_VDMToken_IITN_VDMToken_inverse|fact"><span class="entity_def" id="VDMToolkit.VDMToken.VDMToken_IITN_VDMToken.Rep_VDMToken_IITN_VDMToken_inverse|fact"><span class="entity_def" id="VDMToolkit.VDMToken.VDMToken_IITN_VDMToken.Rep_VDMToken_IITN_VDMToken|fact"><span class="entity_def" id="VDMToolkit.VDMToken.VDMToken_IITN_VDMToken.type_definition_VDMToken_IITN_VDMToken|fact"><span class="entity_def" id="VDMToolkit.arity_type_VDMToken_IITN_VDMToken|fact"><span class="entity_def" id="VDMToolkit.VDMToken.min_alg_VDMToken_def|fact"><span class="entity_def" id="VDMToolkit.VDMToken.mor_VDMToken_def|fact"><span class="entity_def" id="VDMToolkit.VDMToken.alg_VDMToken_def|fact"><span class="entity_def" id="VDMToolkit.pre_VDMToken.VDMToken.set2_pre_VDMToken_def|fact"><span class="entity_def" id="VDMToolkit.pre_VDMToken.VDMToken.set1_pre_VDMToken_def|fact"><span class="entity_def" id="VDMToolkit.pre_VDMToken.VDMToken.rel_pre_VDMToken_def|fact"><span class="entity_def" id="VDMToolkit.pre_VDMToken.VDMToken.map_pre_VDMToken_def|fact"><span class="entity_def" id="VDMToolkit.arity_full_exhaustive_VDMToken|thm"><span class="entity_def" id="VDMToolkit.VDMToken.full_exhaustive_VDMToken.simps|thm"><span class="entity_def" id="VDMToolkit.full_exhaustive_VDMToken_inst.full_exhaustive_VDMToken|thm"><span class="entity_def" id="VDMToolkit.arity_narrowing_VDMToken|thm"><span class="entity_def" id="VDMToolkit.VDMToken.narrowing_VDMToken.simps|thm"><span class="entity_def" id="VDMToolkit.narrowing_VDMToken_inst.narrowing_VDMToken|thm"><span class="entity_def" id="VDMToolkit.arity_random_VDMToken|thm"><span class="entity_def" id="VDMToolkit.random_VDMToken_def|thm"><span class="entity_def" id="VDMToolkit.random_VDMToken_inst.random_VDMToken|thm"><span class="entity_def" id="VDMToolkit.VDMToken.random_aux.simps|thm"><span class="entity_def" id="VDMToolkit.random_aux_VDMToken_def|thm"><span class="entity_def" id="VDMToolkit.VDMToken.size_neq|thm"><span class="entity_def" id="VDMToolkit.VDMToken.size_gen_o_map|thm"><span class="entity_def" id="VDMToolkit.VDMToken.size_gen|thm"><span class="entity_def" id="VDMToolkit.VDMToken.size(2)|thm"><span class="entity_def" id="VDMToolkit.VDMToken.size(1)|thm"><span class="entity_def" id="VDMToolkit.arity_size_VDMToken|thm"><span class="entity_def" id="VDMToolkit.VDMToken.size_VDMToken_overloaded_def|thm"><span class="entity_def" id="VDMToolkit.size_VDMToken_inst.size_VDMToken|thm"><span class="entity_def" id="VDMToolkit.VDMToken.size_VDMToken_def|thm"><span class="entity_def" id="VDMToolkit.VDMToken.Quotient|thm"><span class="entity_def" id="VDMToolkit.VDMToken.Domainp_rel|thm"><span class="entity_def" id="VDMToolkit.VDMToken.right_unique_rel|thm"><span class="entity_def" id="VDMToolkit.VDMToken.left_unique_rel|thm"><span class="entity_def" id="VDMToolkit.VDMToken.right_total_rel|thm"><span class="entity_def" id="VDMToolkit.VDMToken.left_total_rel|thm"><span class="entity_def" id="VDMToolkit.VDMToken.bi_unique_rel|thm"><span class="entity_def" id="VDMToolkit.VDMToken.bi_total_rel|thm"><span class="entity_def" id="VDMToolkit.VDMToken.simps(6)|thm"><span class="entity_def" id="VDMToolkit.VDMToken.simps(5)|thm"><span class="entity_def" id="VDMToolkit.VDMToken.simps(4)|thm"><span class="entity_def" id="VDMToolkit.VDMToken.simps(3)|thm"><span class="entity_def" id="VDMToolkit.VDMToken.simps(2)|thm"><span class="entity_def" id="VDMToolkit.VDMToken.simps(1)|thm"><span class="entity_def" id="VDMToolkit.VDMToken.rel_induct|thm"><span class="entity_def" id="VDMToolkit.VDMToken.rec_transfer|thm"><span class="entity_def" id="VDMToolkit.VDMToken.rec_o_map|thm"><span class="entity_def" id="VDMToolkit.VDMToken.rec|thm"><span class="entity_def" id="VDMToolkit.VDMToken.induct|thm"><span class="entity_def" id="VDMToolkit.VDMToken.set_intros|thm"><span class="entity_def" id="VDMToolkit.VDMToken.set_cases|thm"><span class="entity_def" id="VDMToolkit.VDMToken.set|thm"><span class="entity_def" id="VDMToolkit.VDMToken.rel_intros|thm"><span class="entity_def" id="VDMToolkit.VDMToken.rel_inject|thm"><span class="entity_def" id="VDMToolkit.VDMToken.rel_cases|thm"><span class="entity_def" id="VDMToolkit.VDMToken.pred_inject|thm"><span class="entity_def" id="VDMToolkit.VDMToken.map|thm"><span class="entity_def" id="VDMToolkit.VDMToken.ctr_transfer|thm"><span class="entity_def" id="VDMToolkit.VDMToken.case_transfer|thm"><span class="entity_def" id="VDMToolkit.VDMToken.splits(2)|thm"><span class="entity_def" id="VDMToolkit.VDMToken.splits(1)|thm"><span class="entity_def" id="VDMToolkit.VDMToken.split_asm|thm"><span class="entity_def" id="VDMToolkit.VDMToken.split|thm"><span class="entity_def" id="VDMToolkit.VDMToken.nchotomy|thm"><span class="entity_def" id="VDMToolkit.VDMToken.inject|thm"><span class="entity_def" id="VDMToolkit.VDMToken.exhaust|thm"><span class="entity_def" id="VDMToolkit.VDMToken.case_distrib|thm"><span class="entity_def" id="VDMToolkit.VDMToken.case_cong_weak|thm"><span class="entity_def" id="VDMToolkit.VDMToken.case_cong|thm"><span class="entity_def" id="VDMToolkit.VDMToken.case|thm"><span class="entity_def" id="VDMToolkit.VDMToken.eq.simps|thm"><span class="entity_def" id="VDMToolkit.VDMToken.eq.refl|thm"><span class="entity_def" id="VDMToolkit.arity_equal_VDMToken|thm"><span class="entity_def" id="VDMToolkit.equal_VDMToken_def|thm"><span class="entity_def" id="VDMToolkit.equal_VDMToken_inst.equal_VDMToken|thm"><span class="entity_def" id="VDMToolkit.arity_partial_term_of_VDMToken|thm"><span class="entity_def" id="VDMToolkit.partial_term_of_VDMToken_triv|thm"><span class="entity_def" id="VDMToolkit.partial_term_of_VDMToken_inst.partial_term_of_VDMToken|thm"><span class="entity_def" id="VDMToolkit.arity_term_of_VDMToken|thm"><span class="entity_def" id="VDMToolkit.term_of_VDMToken_triv|thm"><span class="entity_def" id="VDMToolkit.term_of_VDMToken_inst.term_of_VDMToken|thm"><span class="entity_def" id="VDMToolkit.VDMToken.case_VDMToken_def|thm"><span class="entity_def" id="VDMToolkit.VDMToken.ctor_rec_VDMToken_def|thm"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.set_transfer|thm"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.set_map|thm"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.rel_transfer|thm"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.rel_transp|thm"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.rel_symp|thm"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.rel_reflp|thm"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.rel_refl_strong|thm"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.rel_refl|thm"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.rel_cong_simp|thm"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.rel_cong|thm"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.rel_mono_strong|thm"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.rel_mono|thm"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.rel_map(2)|thm"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.rel_map(1)|thm"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.rel_Grp|thm"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.rel_flip|thm"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.rel_eq_onp|thm"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.rel_eq|thm"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.rel_conversep|thm"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.rel_compp_Grp|thm"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.rel_compp|thm"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.pred_set|thm"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.pred_True|thm"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.pred_transfer|thm"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.pred_rel|thm"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.pred_map|thm"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.pred_cong_simp|thm"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.pred_cong|thm"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.pred_mono_strong|thm"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.pred_mono|thm"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.map_ident|thm"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.map_transfer|thm"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.map_id0|thm"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.map_id|thm"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.map_cong_pred|thm"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.map_cong_simp|thm"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.map_cong|thm"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.map_cong0|thm"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.map_comp|thm"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.inj_map_strong|thm"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.inj_map|thm"><span class="entity_def" id="VDMToolkit.VDMToolkit.VDMToken.in_rel|thm"><span class="entity_def" id="VDMToolkit.VDMToken.wit_VDMToken_def|thm"><span class="entity_def" id="VDMToolkit.VDMToken.pred_VDMToken_def|thm"><span class="entity_def" id="VDMToolkit.VDMToken.rel_VDMToken_def|thm"><span class="entity_def" id="VDMToolkit.VDMToken.set_VDMToken_def|thm"><span class="entity_def" id="VDMToolkit.VDMToken.map_VDMToken_def|thm"><span class="entity_def" id="VDMToolkit.VDMToken.dtor_VDMToken_def|thm"><span class="entity_def" id="VDMToolkit.VDMToken.ctor_fold_VDMToken_def|thm"><span class="entity_def" id="VDMToolkit.VDMToken.ctor_VDMToken_def|thm"><span class="entity_def" id="VDMToolkit.arity_typerep_VDMToken|thm"><span class="entity_def" id="VDMToolkit.typerep_VDMToken_def|thm"><span class="entity_def" id="VDMToolkit.typerep_VDMToken_inst.typerep_VDMToken|thm"><span class="entity_def" id="VDMToolkit.VDMToken.Abs_VDMToken_induct|thm"><span class="entity_def" id="VDMToolkit.VDMToken.Rep_VDMToken_induct|thm"><span class="entity_def" id="VDMToolkit.VDMToken.Abs_VDMToken_cases|thm"><span class="entity_def" id="VDMToolkit.VDMToken.Rep_VDMToken_cases|thm"><span class="entity_def" id="VDMToolkit.VDMToken.Abs_VDMToken_inject|thm"><span class="entity_def" id="VDMToolkit.VDMToken.Rep_VDMToken_inject|thm"><span class="entity_def" id="VDMToolkit.VDMToken.Abs_VDMToken_inverse|thm"><span class="entity_def" id="VDMToolkit.VDMToken.Rep_VDMToken_inverse|thm"><span class="entity_def" id="VDMToolkit.VDMToken.Rep_VDMToken|thm"><span class="entity_def" id="VDMToolkit.VDMToken.type_definition_VDMToken|thm"><span class="entity_def" id="VDMToolkit.arity_type_VDMToken|thm"><span class="entity_def" id="VDMToolkit.VDMToken.str_init_VDMToken_def|thm"><span class="entity_def" id="VDMToolkit.VDMToken.arity_typerep_VDMToken_IITN_VDMToken|thm"><span class="entity_def" id="VDMToolkit.VDMToken.typerep_VDMToken_IITN_VDMToken_def|thm"><span class="entity_def" id="VDMToolkit.VDMToken.typerep_VDMToken_IITN_VDMToken_inst.typerep_VDMToken_IITN_VDMToken|thm"><span class="entity_def" id="VDMToolkit.VDMToken.VDMToken_IITN_VDMToken.Abs_VDMToken_IITN_VDMToken_induct|thm"><span class="entity_def" id="VDMToolkit.VDMToken.VDMToken_IITN_VDMToken.Rep_VDMToken_IITN_VDMToken_induct|thm"><span class="entity_def" id="VDMToolkit.VDMToken.VDMToken_IITN_VDMToken.Abs_VDMToken_IITN_VDMToken_cases|thm"><span class="entity_def" id="VDMToolkit.VDMToken.VDMToken_IITN_VDMToken.Rep_VDMToken_IITN_VDMToken_cases|thm"><span class="entity_def" id="VDMToolkit.VDMToken.VDMToken_IITN_VDMToken.Abs_VDMToken_IITN_VDMToken_inject|thm"><span class="entity_def" id="VDMToolkit.VDMToken.VDMToken_IITN_VDMToken.Rep_VDMToken_IITN_VDMToken_inject|thm"><span class="entity_def" id="VDMToolkit.VDMToken.VDMToken_IITN_VDMToken.Abs_VDMToken_IITN_VDMToken_inverse|thm"><span class="entity_def" id="VDMToolkit.VDMToken.VDMToken_IITN_VDMToken.Rep_VDMToken_IITN_VDMToken_inverse|thm"><span class="entity_def" id="VDMToolkit.VDMToken.VDMToken_IITN_VDMToken.Rep_VDMToken_IITN_VDMToken|thm"><span class="entity_def" id="VDMToolkit.VDMToken.VDMToken_IITN_VDMToken.type_definition_VDMToken_IITN_VDMToken|thm"><span class="entity_def" id="VDMToolkit.arity_type_VDMToken_IITN_VDMToken|thm"><span class="entity_def" id="VDMToolkit.VDMToken.min_alg_VDMToken_def|thm"><span class="entity_def" id="VDMToolkit.VDMToken.mor_VDMToken_def|thm"><span class="entity_def" id="VDMToolkit.VDMToken.alg_VDMToken_def|thm"><span class="entity_def" id="VDMToolkit.pre_VDMToken.VDMToken.set2_pre_VDMToken_def|thm"><span class="entity_def" id="VDMToolkit.pre_VDMToken.VDMToken.set1_pre_VDMToken_def|thm"><span class="entity_def" id="VDMToolkit.pre_VDMToken.VDMToken.rel_pre_VDMToken_def|thm"><span class="entity_def" id="VDMToolkit.pre_VDMToken.VDMToken.map_pre_VDMToken_def|thm"><span class="entity_def" id="VDMToolkit.full_exhaustive_VDMToken_def|axiom"><span class="entity_def" id="VDMToolkit.full_exhaustive_VDMToken_inst.full_exhaustive_VDMToken_def|axiom"><span class="entity_def" id="VDMToolkit.narrowing_VDMToken_def|axiom"><span class="entity_def" id="VDMToolkit.narrowing_VDMToken_inst.narrowing_VDMToken_def|axiom"><span class="entity_def" id="VDMToolkit.random_VDMToken_def_raw|axiom"><span class="entity_def" id="VDMToolkit.random_VDMToken_inst.random_VDMToken_def|axiom"><span class="entity_def" id="VDMToolkit.random_aux_VDMToken_def|axiom"><span class="entity_def" id="VDMToolkit.VDMToken.size_VDMToken_overloaded_def|axiom"><span class="entity_def" id="VDMToolkit.size_VDMToken_inst.size_VDMToken_def|axiom"><span class="entity_def" id="VDMToolkit.VDMToken.size_VDMToken_def|axiom"><span class="entity_def" id="VDMToolkit.VDMToken.rec_VDMToken_def|axiom"><span class="entity_def" id="VDMToolkit.equal_VDMToken_def_raw|axiom"><span class="entity_def" id="VDMToolkit.equal_VDMToken_inst.equal_VDMToken_def|axiom"><span class="entity_def" id="VDMToolkit.partial_term_of_VDMToken_triv_raw|axiom"><span class="entity_def" id="VDMToolkit.partial_term_of_VDMToken_inst.partial_term_of_VDMToken_def|axiom"><span class="entity_def" id="VDMToolkit.term_of_VDMToken_triv_raw|axiom"><span class="entity_def" id="VDMToolkit.term_of_VDMToken_inst.term_of_VDMToken_def|axiom"><span class="entity_def" id="VDMToolkit.VDMToken.case_VDMToken_def|axiom"><span class="entity_def" id="VDMToolkit.VDMToken.Token_def|axiom"><span class="entity_def" id="VDMToolkit.VDMToken.ctor_rec_VDMToken_def|axiom"><span class="entity_def" id="VDMToolkit.VDMToken.wit_VDMToken_def|axiom"><span class="entity_def" id="VDMToolkit.VDMToken.pred_VDMToken_def|axiom"><span class="entity_def" id="VDMToolkit.VDMToken.rel_VDMToken_def|axiom"><span class="entity_def" id="VDMToolkit.VDMToken.set_VDMToken_def|axiom"><span class="entity_def" id="VDMToolkit.VDMToken.map_VDMToken_def|axiom"><span class="entity_def" id="VDMToolkit.VDMToken.dtor_VDMToken_def|axiom"><span class="entity_def" id="VDMToolkit.VDMToken.ctor_fold_VDMToken_def|axiom"><span class="entity_def" id="VDMToolkit.VDMToken.ctor_VDMToken_def|axiom"><span class="entity_def" id="VDMToolkit.typerep_VDMToken_def_raw|axiom"><span class="entity_def" id="VDMToolkit.typerep_VDMToken_inst.typerep_VDMToken_def|axiom"><span class="entity_def" id="VDMToolkit.VDMToken.type_definition_VDMToken|axiom"><span class="entity_def" id="VDMToolkit.arity_type_VDMToken|axiom"><span class="entity_def" id="VDMToolkit.VDMToken.str_init_VDMToken_def|axiom"><span class="entity_def" id="VDMToolkit.VDMToken.typerep_VDMToken_IITN_VDMToken_def_raw|axiom"><span class="entity_def" id="VDMToolkit.VDMToken.typerep_VDMToken_IITN_VDMToken_inst.typerep_VDMToken_IITN_VDMToken_def|axiom"><span class="entity_def" id="VDMToolkit.VDMToken.VDMToken_IITN_VDMToken.type_definition_VDMToken_IITN_VDMToken|axiom"><span class="entity_def" id="VDMToolkit.arity_type_VDMToken_IITN_VDMToken|axiom"><span class="entity_def" id="VDMToolkit.VDMToken.min_alg_VDMToken_def|axiom"><span class="entity_def" id="VDMToolkit.VDMToken.mor_VDMToken_def|axiom"><span class="entity_def" id="VDMToolkit.VDMToken.alg_VDMToken_def|axiom"><span class="entity_def" id="VDMToolkit.pre_VDMToken.VDMToken.wit_pre_VDMToken_def|axiom"><span class="entity_def" id="VDMToolkit.pre_VDMToken.VDMToken.pred_pre_VDMToken_def|axiom"><span class="entity_def" id="VDMToolkit.pre_VDMToken.VDMToken.rel_pre_VDMToken_def|axiom"><span class="entity_def" id="VDMToolkit.pre_VDMToken.VDMToken.set2_pre_VDMToken_def|axiom"><span class="entity_def" id="VDMToolkit.pre_VDMToken.VDMToken.set1_pre_VDMToken_def|axiom"><span class="entity_def" id="VDMToolkit.pre_VDMToken.VDMToken.map_pre_VDMToken_def|axiom"><span class="entity_def" id="VDMToolkit.full_exhaustive_VDMToken_inst.full_exhaustive_VDMToken|const"><span class="entity_def" id="VDMToolkit.narrowing_VDMToken_inst.narrowing_VDMToken|const"><span class="entity_def" id="VDMToolkit.random_VDMToken_inst.random_VDMToken|const"><span class="entity_def" id="VDMToolkit.random_aux_VDMToken|const"><span class="entity_def" id="VDMToolkit.size_VDMToken_inst.size_VDMToken|const"><span class="entity_def" id="VDMToolkit.VDMToken.size_VDMToken|const"><span class="entity_def" id="VDMToolkit.equal_VDMToken_inst.equal_VDMToken|const"><span class="entity_def" id="VDMToolkit.partial_term_of_VDMToken_inst.partial_term_of_VDMToken|const"><span class="entity_def" id="VDMToolkit.term_of_VDMToken_inst.term_of_VDMToken|const"><span class="entity_def" id="VDMToolkit.VDMToken.case_VDMToken|const"><span class="entity_def" id="VDMToolkit.typerep_VDMToken_inst.typerep_VDMToken|const"><span class="entity_def" id="VDMToolkit.VDMToken.Abs_VDMToken|const"><span class="entity_def" id="VDMToolkit.VDMToken.Rep_VDMToken|const"><span class="entity_def" id="VDMToolkit.VDMToken.typerep_VDMToken_IITN_VDMToken_inst.typerep_VDMToken_IITN_VDMToken|const"><span class="entity_def" id="VDMToolkit.VDMToken.VDMToken_IITN_VDMToken.Abs_VDMToken_IITN_VDMToken|const"><span class="entity_def" id="VDMToolkit.VDMToken.VDMToken_IITN_VDMToken.Rep_VDMToken_IITN_VDMToken|const"><span class="entity_def" id="VDMToolkit.VDMToken.mor_VDMToken|const"><span class="entity_def" id="VDMToolkit.VDMToken.alg_VDMToken|const"><span class="entity_def" id="VDMToolkit.VDMToken.VDMToken_IITN_VDMToken|type"><span>datatype</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="entity_def" id="VDMToolkit.VDMToken.rec_VDMToken|const"><span class="entity_def" id="VDMToolkit.VDMToken.ctor_rec_VDMToken|const"><span class="entity_def" id="VDMToolkit.VDMToken.wit_VDMToken|const"><span class="entity_def" id="VDMToolkit.VDMToken.pred_VDMToken|const"><span class="entity_def" id="VDMToolkit.VDMToken.rel_VDMToken|const"><span class="entity_def" id="VDMToolkit.VDMToken.set_VDMToken|const"><span class="entity_def" id="VDMToolkit.VDMToken.map_VDMToken|const"><span class="entity_def" id="VDMToolkit.VDMToken.dtor_VDMToken|const"><span class="entity_def" id="VDMToolkit.VDMToken.ctor_fold_VDMToken|const"><span class="entity_def" id="VDMToolkit.VDMToken.ctor_VDMToken|const"><span class="entity_def" id="VDMToolkit.VDMToken.str_init_VDMToken|const"><span class="entity_def" id="VDMToolkit.VDMToken.min_alg_VDMToken|const"><span class="entity_def" id="VDMToolkit.pre_VDMToken.VDMToken.wit_pre_VDMToken|const"><span class="entity_def" id="VDMToolkit.pre_VDMToken.VDMToken.pred_pre_VDMToken|const"><span class="entity_def" id="VDMToolkit.pre_VDMToken.VDMToken.rel_pre_VDMToken|const"><span class="entity_def" id="VDMToolkit.pre_VDMToken.VDMToken.set2_pre_VDMToken|const"><span class="entity_def" id="VDMToolkit.pre_VDMToken.VDMToken.set1_pre_VDMToken|const"><span class="entity_def" id="VDMToolkit.pre_VDMToken.VDMToken.map_pre_VDMToken|const"><span class="entity_def" id="VDMToolkit.VDMToken|type"><span>VDMToken</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity_def" id="VDMToolkit.VDMToken.Token|const"><span>Token</span></span><span> </span><span class="tfree"><span class="quoted"><span class="tfree"><span>'a</span></span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.inv_VDMToken_def|fact"><span class="entity_def" id="VDMToolkit.inv_VDMToken_def|thm"><span class="entity_def" id="VDMToolkit.inv_VDMToken_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> 
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.inv_VDMToken|const"><span>inv_VDMToken</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMToken|type"><span>VDMToken</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>inv_VDMToken</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>t</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_True|const"><span>inv_True</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>t</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.inv_VDMToken&apos;_def|fact"><span class="entity_def" id="VDMToolkit.inv_VDMToken&apos;_def|thm"><span class="entity_def" id="VDMToolkit.inv_VDMToken&apos;_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> 
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.inv_VDMToken&apos;|const"><span>inv_VDMToken'</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMToken|type"><span>VDMToken</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>inv_VDMToken'</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>inv_T</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>t</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span class="keyword1"><span>case</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>t</span></span></span></span><span> </span><span class="keyword1"><span>of</span></span><span> Token </span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>inv_T</span></span></span></span><span> </span><span class="bound"><span>a</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span>Isabelle lemmas definitions are issues for all the inner calls and related definitions used
</span><span>      within given definitions. This allows for a laywered unfolding and simplification of VDM terms 
</span><span>      during proofs.</span><span> </span><span>‚Ä∫</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.inv_VDMToken&apos;_defs|fact"><span class="entity_def" id="VDMToolkit.inv_VDMToken&apos;_defs(2)|thm"><span class="entity_def" id="VDMToolkit.inv_VDMToken&apos;_defs(1)|thm"><span>inv_VDMToken'_defs</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMToken&apos;_def|fact"><span>inv_VDMToken'_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_True_def|fact"><span>inv_True_def</span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_inv_VDMTokenI|fact"><span class="entity_def" id="VDMToolkit.l_inv_VDMTokenI|thm"><span>l_inv_VDMTokenI</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>inv_T</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>t</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMToken.Token|const"><span>Token</span></a><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMToken&apos;|const"><span>inv_VDMToken'</span></a><span> </span><span class="free"><span>inv_T</span></span><span> </span><span class="free"><span>t</span></span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMToken&apos;_def|fact"><span>inv_VDMToken'_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span>***************************************************************</span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span> </span><span>Sets</span><span> </span><span>‚Ä∫</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span>All VDM structured types (e.g. sets, sequences, maps, etc.) must check the
</span><span>     type invariant of its constituent parts, beyond any user-defined invariant. 
</span><span>
</span><span>      Moreover, all VDM sets are finite. Therefore, we define VDM set invariant checks as
</span><span>      combination of finiteness checks with invariant checks of its elements type.</span><span> </span><span>‚Ä∫</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>type_synonym</span></span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="entity_def" id="VDMToolkit.VDMSet|type"><span>VDMSet</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span>set</span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>type_synonym</span></span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="entity_def" id="VDMToolkit.VDMSet1|type"><span>VDMSet1</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span>set</span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.inv_VDMSet_def|fact"><span class="entity_def" id="VDMToolkit.inv_VDMSet_def|thm"><span class="entity_def" id="VDMToolkit.inv_VDMSet_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.inv_VDMSet|const"><span>inv_VDMSet</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSet|type"><span>VDMSet</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
   </span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span class="main"><span class="main"><span class="main"><span>!</span></span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>inv_VDMSet</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span>finite</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.inv_VDMSet1_def|fact"><span class="entity_def" id="VDMToolkit.inv_VDMSet1_def|thm"><span class="entity_def" id="VDMToolkit.inv_VDMSet1_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.inv_VDMSet1|const"><span>inv_VDMSet1</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSet1|type"><span>VDMSet1</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
   </span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span class="main"><span class="main"><span class="main"><span>!</span></span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>inv_VDMSet1</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMSet|const"><span>inv_VDMSet</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>‚àß</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>‚â†</span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.inv_SetElems_def|fact"><span class="entity_def" id="VDMToolkit.inv_SetElems_def|thm"><span class="entity_def" id="VDMToolkit.inv_SetElems_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> 
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.inv_SetElems|const"><span>inv_SetElems</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSet|type"><span>VDMSet</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>inv_SetElems</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>einv</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span class="main"><span>‚àÄ</span></span><span> </span><span class="bound"><span>e</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>einv</span></span></span></span><span> </span><span class="bound"><span>e</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span> </span><span>Added wrapped version of the definition so that we can translate 
</span><span>complex structured types (e.g. \verb'seq of seq of T', etc.). Parameter order matter
</span><span>for partial instantiation (e.g. </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">term</span><span class="hidden">&gt;</span></span></span><span class="quoted"><span>‚Äπ</span><span class="free"><span>inv_VDMSet'</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>inv_VDMSet'</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMNat|const"><span>inv_VDMNat</span></a><span class="main"><span>)</span></span><span> </span><span class="free"><span>s</span></span><span>‚Ä∫</span></span></span><span>).</span><span>‚Ä∫</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.inv_VDMSet&apos;_def|fact"><span class="entity_def" id="VDMToolkit.inv_VDMSet&apos;_def|thm"><span class="entity_def" id="VDMToolkit.inv_VDMSet&apos;_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.inv_VDMSet&apos;|const"><span>inv_VDMSet'</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSet|type"><span>VDMSet</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
   </span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span class="main"><span class="main"><span class="main"><span>!</span></span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>inv_VDMSet'</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>einv</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMSet|const"><span>inv_VDMSet</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>‚àß</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_SetElems|const"><span>inv_SetElems</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>einv</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span>"</span></span></span><span>
    
</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.inv_VDMSet1&apos;_def|fact"><span class="entity_def" id="VDMToolkit.inv_VDMSet1&apos;_def|thm"><span class="entity_def" id="VDMToolkit.inv_VDMSet1&apos;_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.inv_VDMSet1&apos;|const"><span>inv_VDMSet1'</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSet1|type"><span>VDMSet1</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
   </span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span class="main"><span class="main"><span class="main"><span>!</span></span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>inv_VDMSet1'</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>einv</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMSet1|const"><span>inv_VDMSet1</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>‚àß</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_SetElems|const"><span>inv_SetElems</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>einv</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.vdm_card_def|fact"><span class="entity_def" id="VDMToolkit.vdm_card_def|thm"><span class="entity_def" id="VDMToolkit.vdm_card_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.vdm_card|const"><span>vdm_card</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSet|type"><span>VDMSet</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMNat|type"><span>VDMNat</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>vdm_card</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>if</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMSet|const"><span>inv_VDMSet</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span>int</span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span>undefined</span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.pre_vdm_card_def|fact"><span class="entity_def" id="VDMToolkit.pre_vdm_card_def|thm"><span class="entity_def" id="VDMToolkit.pre_vdm_card_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.pre_vdm_card|const"><span>pre_vdm_card</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSet|type"><span>VDMSet</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span class="main"><span class="main"><span class="main"><span>!</span></span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>pre_vdm_card</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMSet|const"><span>inv_VDMSet</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.post_vdm_card_def|fact"><span class="entity_def" id="VDMToolkit.post_vdm_card_def|thm"><span class="entity_def" id="VDMToolkit.post_vdm_card_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.post_vdm_card|const"><span>post_vdm_card</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSet|type"><span>VDMSet</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMNat|type"><span>VDMNat</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span class="main"><span class="main"><span class="main"><span>!</span></span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>post_vdm_card</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>RESULT</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.pre_vdm_card|const"><span>pre_vdm_card</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>‚ü∂</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMNat|const"><span>inv_VDMNat</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>RESULT</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.inv_VDMSet_defs|fact"><span class="entity_def" id="VDMToolkit.inv_VDMSet_defs|thm"><span>inv_VDMSet_defs</span></span></span><span>   </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMSet_def|fact"><span>inv_VDMSet_def</span></a><span>
</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.inv_VDMSet1_defs|fact"><span class="entity_def" id="VDMToolkit.inv_VDMSet1_defs(2)|thm"><span class="entity_def" id="VDMToolkit.inv_VDMSet1_defs(1)|thm"><span>inv_VDMSet1_defs</span></span></span></span><span>  </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMSet1_def|fact"><span>inv_VDMSet1_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMSet_def|fact"><span>inv_VDMSet_def</span></a><span>   
</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.inv_VDMSet&apos;_defs|fact"><span class="entity_def" id="VDMToolkit.inv_VDMSet&apos;_defs(3)|thm"><span class="entity_def" id="VDMToolkit.inv_VDMSet&apos;_defs(2)|thm"><span class="entity_def" id="VDMToolkit.inv_VDMSet&apos;_defs(1)|thm"><span>inv_VDMSet'_defs</span></span></span></span></span><span>  </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMSet&apos;_def|fact"><span>inv_VDMSet'_def</span></a><span>  </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMSet_def|fact"><span>inv_VDMSet_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_SetElems_def|fact"><span>inv_SetElems_def</span></a><span>
</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.inv_VDMSet1&apos;_defs|fact"><span class="entity_def" id="VDMToolkit.inv_VDMSet1&apos;_defs(4)|thm"><span class="entity_def" id="VDMToolkit.inv_VDMSet1&apos;_defs(3)|thm"><span class="entity_def" id="VDMToolkit.inv_VDMSet1&apos;_defs(2)|thm"><span class="entity_def" id="VDMToolkit.inv_VDMSet1&apos;_defs(1)|thm"><span>inv_VDMSet1'_defs</span></span></span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMSet1&apos;_def|fact"><span>inv_VDMSet1'_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMSet1_defs|fact"><span>inv_VDMSet1_defs</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_SetElems_def|fact"><span>inv_SetElems_def</span></a><span>
</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.vdm_card_defs|fact"><span class="entity_def" id="VDMToolkit.vdm_card_defs(2)|thm"><span class="entity_def" id="VDMToolkit.vdm_card_defs(1)|thm"><span>vdm_card_defs</span></span></span></span><span>     </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_card_def|fact"><span>vdm_card_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMSet_defs|fact"><span>inv_VDMSet_defs</span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_invVDMSet_finite_f|fact"><span class="entity_def" id="VDMToolkit.l_invVDMSet_finite_f|thm"><span>l_invVDMSet_finite_f</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMSet|const"><span>inv_VDMSet</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span>finite</span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMSet_def|fact"><span>inv_VDMSet_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_inv_SetElems_Cons|fact"><span class="entity_def" id="VDMToolkit.l_inv_SetElems_Cons|thm"><span>l_inv_SetElems_Cons</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_SetElems|const"><span>inv_SetElems</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span>insert</span><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>‚àß</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_SetElems|const"><span>inv_SetElems</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_SetElems_def|fact"><span>inv_SetElems_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_inv_SetElems_Un|fact"><span class="entity_def" id="VDMToolkit.l_inv_SetElems_Un|thm"><span>l_inv_SetElems_Un</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_SetElems|const"><span>inv_SetElems</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>S</span></span><span> </span><span class="main"><span>‚à™</span></span><span> </span><span class="free"><span>T</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_SetElems|const"><span>inv_SetElems</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><span>‚àß</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_SetElems|const"><span>inv_SetElems</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>T</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_SetElems_def|fact"><span>inv_SetElems_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_inv_SetElems_Int|fact"><span class="entity_def" id="VDMToolkit.l_inv_SetElems_Int|thm"><span>l_inv_SetElems_Int</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_SetElems|const"><span>inv_SetElems</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>S</span></span><span> </span><span class="main"><span>‚à©</span></span><span> </span><span class="free"><span>T</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_SetElems|const"><span>inv_SetElems</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>S</span></span><span> </span><span class="main"><span>‚à©</span></span><span> </span><span class="free"><span>T</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_SetElems_def|fact"><span>inv_SetElems_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_inv_SetElems_empty|fact"><span class="entity_def" id="VDMToolkit.l_inv_SetElems_empty|thm"><span>l_inv_SetElems_empty</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_SetElems|const"><span>inv_SetElems</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span> 
</span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_SetElems_def|fact"><span>inv_SetElems_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_invSetElems_inv_True_True|fact"><span class="entity_def" id="VDMToolkit.l_invSetElems_inv_True_True|thm"><span>l_invSetElems_inv_True_True</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>undefined</span><span> </span><span class="main"><span>‚àâ</span></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_SetElems|const"><span>inv_SetElems</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_True|const"><span>inv_True</span></a><span> </span><span class="free"><span>r</span></span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_SetElems_def|fact"><span>inv_SetElems_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_inv_True_True|fact"><span>l_inv_True_True</span></a><span class="main"><span>)</span></span><span>
  
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_vdm_card_finite|fact"><span class="entity_def" id="VDMToolkit.l_vdm_card_finite|thm"><span>l_vdm_card_finite</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_card|const"><span>vdm_card</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>int</span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_card_defs|fact"><span>vdm_card_defs</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_vdm_card_range|fact"><span class="entity_def" id="VDMToolkit.l_vdm_card_range|thm"><span>l_vdm_card_range</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚â§</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_card|const"><span>vdm_card</span></a><span> </span><span class="main"><span>{</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>..</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_card_defs|fact"><span>vdm_card_defs</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_vdm_card_positive|fact"><span class="entity_def" id="VDMToolkit.l_vdm_card_positive|thm"><span>l_vdm_card_positive</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>‚â§</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_card|const"><span>vdm_card</span></a><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_vdm_card_VDMNat|fact"><span class="entity_def" id="VDMToolkit.l_vdm_card_VDMNat|thm"><span>l_vdm_card_VDMNat</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMNat|const"><span>inv_VDMNat</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_card|const"><span>vdm_card</span></a><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMSet_def|fact"><span>inv_VDMSet_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMNat_def|fact"><span>inv_VDMNat_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_vdm_card_non_negative|fact"><span class="entity_def" id="VDMToolkit.l_vdm_card_non_negative|thm"><span>l_vdm_card_non_negative</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>‚â†</span></span><span> </span><span class="main"><span>{}</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_card|const"><span>vdm_card</span></a><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>card_gt_0_iff</span><span class="main"><span>)</span></span><span>
    
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_vdm_card_isa_card|fact"><span class="entity_def" id="VDMToolkit.l_vdm_card_isa_card|thm"><span>l_vdm_card_isa_card</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span>card</span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>‚â§</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_card|const"><span>vdm_card</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>‚â§</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_isa_card_inter_bound|fact"><span class="entity_def" id="VDMToolkit.l_isa_card_inter_bound|thm"><span>l_isa_card_inter_bound</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="free"><span>T</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span>card</span><span> </span><span class="free"><span>T</span></span><span> </span><span class="main"><span>‚â§</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>S</span></span><span> </span><span class="main"><span>‚à©</span></span><span> </span><span class="free"><span>T</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚â§</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>thm</span></span></span><span> </span><span>card_mono</span><span> </span><span>inf_le2</span><span> </span><span>le_trans</span><span> </span><span>card_seteq</span><span> </span><span>Int_commute</span><span> </span><span>nat_le_linear</span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><span>card_mono</span><span> </span><span>inf_le2</span><span> </span><span>le_trans</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_vdm_card_inter_bound|fact"><span class="entity_def" id="VDMToolkit.l_vdm_card_inter_bound|thm"><span>l_vdm_card_inter_bound</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="free"><span>T</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_card|const"><span>vdm_card</span></a><span> </span><span class="free"><span>T</span></span><span> </span><span class="main"><span>‚â§</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_card|const"><span>vdm_card</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>S</span></span><span> </span><span class="main"><span>‚à©</span></span><span> </span><span class="free"><span>T</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚â§</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_13929..13931">a1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_card|const"><span>vdm_card</span></a><span> </span><span class="free"><span>T</span></span><span> </span><span class="main"><span>‚â§</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_13959..13961">a2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="free"><span>T</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_13981..13983">f3</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>‚àÄ</span></span><span class="bound"><span>A</span></span><span> </span><span class="bound"><span>Aa</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>A</span></span><span class="main"><span>::</span></span><span class="tfree"><span>'a</span></span><span> </span><span>set</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚â§</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>Aa</span></span><span class="main"><span>::</span></span><span class="tfree"><span>'a</span></span><span> </span><span>set</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚à®</span></span><span> </span><span class="main"><span>¬¨</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_card|const"><span>vdm_card</span></a><span> </span><span class="bound"><span>A</span></span><span> </span><span class="main"><span>‚â§</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_card|const"><span>vdm_card</span></a><span> </span><span class="bound"><span>Aa</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚à®</span></span><span> </span><span>infinite</span><span> </span><span class="bound"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚à®</span></span><span> </span><span>infinite</span><span> </span><span class="bound"><span>Aa</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>full_types</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_vdm_card_finite|fact"><span>l_vdm_card_finite</span></a><span> </span><span>of_nat_le_iff</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>{</span></span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>T</span></span><span> </span><span class="main"><span>‚à©</span></span><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><span>‚â†</span></span><span> </span><span class="free"><span>T</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_card|const"><span>vdm_card</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>T</span></span><span> </span><span class="main"><span>‚à©</span></span><span> </span><span class="free"><span>S</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚â†</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_card|const"><span>vdm_card</span></a><span> </span><span class="free"><span>T</span></span><span> </span><span class="main"><span>‚àß</span></span><span> </span><span class="free"><span>T</span></span><span> </span><span class="main"><span>‚à©</span></span><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><span>‚â†</span></span><span> </span><span class="free"><span>T</span></span><span> </span><span class="main"><span>‚à®</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_card|const"><span>vdm_card</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>T</span></span><span> </span><span class="main"><span>‚à©</span></span><span> </span><span class="free"><span>S</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚â§</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#offset_13929..13931"><span>a1</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_card|const"><span>vdm_card</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>T</span></span><span> </span><span class="main"><span>‚à©</span></span><span> </span><span class="free"><span>S</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚â§</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#offset_13981..13983"><span>f3</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#offset_13959..13961"><span>a2</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#offset_13929..13931"><span>a1</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><span>card_seteq</span><span> </span><span>dual_order.trans</span><span> </span><span>inf_le1</span><span> </span><span>infinite_super</span><span> </span><span>verit_la_generic</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>}</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#offset_13929..13931"><span>a1</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>Int_commute</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>theorem</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_vdm_card_fsb|fact"><span class="entity_def" id="VDMToolkit.l_vdm_card_fsb|thm"><span>l_vdm_card_fsb</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.pre_vdm_card|const"><span>pre_vdm_card</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.post_vdm_card|const"><span>post_vdm_card</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_card|const"><span>vdm_card</span></a><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMNat_def|fact"><span>inv_VDMNat_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMSet_def|fact"><span>inv_VDMSet_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.post_vdm_card_def|fact"><span>post_vdm_card_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.pre_vdm_card_def|fact"><span>pre_vdm_card_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span> </span><span>@TODO power set</span><span> </span><span>‚Ä∫</span></span></span><span>
    
</span><span class="comment1"><span>(</span><span>*</span><span>***************************************************************</span><span>*</span><span>)</span></span><span>      
</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span> </span><span>Sequences</span><span> </span><span>‚Ä∫</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>type_synonym</span></span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="entity_def" id="VDMToolkit.VDMSeq|type"><span>VDMSeq</span></span><span>  </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span>list</span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>type_synonym</span></span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="entity_def" id="VDMToolkit.VDMSeq1|type"><span>VDMSeq1</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span>list</span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.inv_VDMSeq1_def|fact"><span class="entity_def" id="VDMToolkit.inv_VDMSeq1_def|thm"><span class="entity_def" id="VDMToolkit.inv_VDMSeq1_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.inv_VDMSeq1|const"><span>inv_VDMSeq1</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSeq1|type"><span>VDMSeq1</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span class="main"><span class="main"><span class="main"><span>!</span></span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>inv_VDMSeq1</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>‚â†</span></span><span> </span><span class="main"><span>[]</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span> </span><span>Sequences may have invariants within their inner type.</span><span> </span><span>‚Ä∫</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.inv_SeqElems_def|fact"><span class="entity_def" id="VDMToolkit.inv_SeqElems_def|thm"><span class="entity_def" id="VDMToolkit.inv_SeqElems_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> 
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.inv_SeqElems|const"><span>inv_SeqElems</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSeq|type"><span>VDMSeq</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span class="main"><span class="main"><span class="main"><span>!</span></span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>inv_SeqElems</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>einv</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span>list_all</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>einv</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.inv_SeqElems0_def|fact"><span class="entity_def" id="VDMToolkit.inv_SeqElems0_def|thm"><span class="entity_def" id="VDMToolkit.inv_SeqElems0_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> 
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.inv_SeqElems0|const"><span>inv_SeqElems0</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSeq|type"><span>VDMSeq</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>inv_SeqElems0</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>einv</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span class="main"><span>‚àÄ</span></span><span> </span><span class="bound"><span>e</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span class="main"><span>(</span></span><span>set</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>einv</span></span></span></span><span> </span><span class="bound"><span>e</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span>  </span><span>Isabelle's list </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>hd</span></span><span class="antiquote"><span>}</span></span></span><span> and </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>tl</span></span><span class="antiquote"><span>}</span></span></span><span> functions have the
</span><span>same name as VDM. Nevertheless, their results is defined for empty lists.
</span><span>We need to rule them out.</span><span>
</span><span>‚Ä∫</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.inv_VDMSeq&apos;_def|fact"><span class="entity_def" id="VDMToolkit.inv_VDMSeq&apos;_def|thm"><span class="entity_def" id="VDMToolkit.inv_VDMSeq&apos;_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.inv_VDMSeq&apos;|const"><span>inv_VDMSeq'</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSeq|type"><span>VDMSeq</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
   </span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span class="main"><span class="main"><span class="main"><span>!</span></span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>inv_VDMSeq'</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>einv</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_SeqElems|const"><span>inv_SeqElems</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>einv</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span>"</span></span></span><span>
    
</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.inv_VDMSeq1&apos;_def|fact"><span class="entity_def" id="VDMToolkit.inv_VDMSeq1&apos;_def|thm"><span class="entity_def" id="VDMToolkit.inv_VDMSeq1&apos;_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.inv_VDMSeq1&apos;|const"><span>inv_VDMSeq1'</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSeq1|type"><span>VDMSeq1</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
   </span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span class="main"><span class="main"><span class="main"><span>!</span></span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>inv_VDMSeq1'</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>einv</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMSeq&apos;|const"><span>inv_VDMSeq'</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>einv</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>‚àß</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMSeq1|const"><span>inv_VDMSeq1</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.inv_VDMSeq&apos;_defs|fact"><span class="entity_def" id="VDMToolkit.inv_VDMSeq&apos;_defs(2)|thm"><span class="entity_def" id="VDMToolkit.inv_VDMSeq&apos;_defs(1)|thm"><span>inv_VDMSeq'_defs</span></span></span></span><span>  </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMSeq&apos;_def|fact"><span>inv_VDMSeq'_def</span></a><span>  </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_SeqElems_def|fact"><span>inv_SeqElems_def</span></a><span>
</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.inv_VDMSeq1&apos;_defs|fact"><span class="entity_def" id="VDMToolkit.inv_VDMSeq1&apos;_defs(4)|thm"><span class="entity_def" id="VDMToolkit.inv_VDMSeq1&apos;_defs(3)|thm"><span class="entity_def" id="VDMToolkit.inv_VDMSeq1&apos;_defs(2)|thm"><span class="entity_def" id="VDMToolkit.inv_VDMSeq1&apos;_defs(1)|thm"><span>inv_VDMSeq1'_defs</span></span></span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMSeq1&apos;_def|fact"><span>inv_VDMSeq1'_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMSeq&apos;_defs|fact"><span>inv_VDMSeq'_defs</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMSeq1_def|fact"><span>inv_VDMSeq1_def</span></a><span> 

</span><span class="comment1"><span>(</span><span>*</span><span>***************************************************************</span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span> </span><span>Sequence operators specification</span><span> </span><span>‚Ä∫</span></span></span><span>  

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.len_def|fact"><span class="entity_def" id="VDMToolkit.len_def|thm"><span class="entity_def" id="VDMToolkit.len_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.len|const"><span>len</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSeq|type"><span>VDMSeq</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMNat|type"><span>VDMNat</span></a><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span class="main"><span class="main"><span class="main"><span>!</span></span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>len</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span>int</span><span> </span><span class="main"><span>(</span></span><span>length</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.post_len_def|fact"><span class="entity_def" id="VDMToolkit.post_len_def|thm"><span class="entity_def" id="VDMToolkit.post_len_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.post_len|const"><span>post_len</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSeq|type"><span>VDMSeq</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMNat|type"><span>VDMNat</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>post_len</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>R</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMNat|const"><span>inv_VDMNat</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>R</span></span></span></span><span> </span><span class="main"><span>‚àß</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>‚â†</span></span><span> </span><span class="main"><span>[]</span></span><span> </span><span class="main"><span>‚ü∂</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMNat1|const"><span>inv_VDMNat1</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>R</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.elems_def|fact"><span class="entity_def" id="VDMToolkit.elems_def|thm"><span class="entity_def" id="VDMToolkit.elems_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> 
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.elems|const"><span>elems</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSeq|type"><span>VDMSeq</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSet|type"><span>VDMSet</span></a><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span class="main"><span class="main"><span class="main"><span>!</span></span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>elems</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span>set</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.post_elems_def|fact"><span class="entity_def" id="VDMToolkit.post_elems_def|thm"><span class="entity_def" id="VDMToolkit.post_elems_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> 
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.post_elems|const"><span>post_elems</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSeq|type"><span>VDMSeq</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSet|type"><span>VDMSet</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>post_elems</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>R</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>R</span></span></span></span><span> </span><span class="main"><span>‚äÜ</span></span><span> </span><span>set</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span> </span><span>Be careful with representation differences 
</span><span>   VDM lists are 1-based, whereas Isabelle list 
</span><span>   are 0-based. This function returns {0,1,2}
</span><span>   for sequence [A, B, C] instead of {1,2,3}</span><span> </span><span>‚Ä∫</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.inds0_def|fact"><span class="entity_def" id="VDMToolkit.inds0_def|thm"><span class="entity_def" id="VDMToolkit.inds0_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
   </span><span class="entity"><span class="entity_def" id="VDMToolkit.inds0|const"><span>inds0</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSeq|type"><span>VDMSeq</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMNat|type"><span>VDMNat</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSet|type"><span>VDMSet</span></a><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>inds0</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span> </span><span class="main"><span>..&lt;</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len|const"><span>len</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.inds_def|fact"><span class="entity_def" id="VDMToolkit.inds_def|thm"><span class="entity_def" id="VDMToolkit.inds_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
   </span><span class="entity"><span class="entity_def" id="VDMToolkit.inds|const"><span>inds</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSeq|type"><span>VDMSeq</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMNat1|type"><span>VDMNat1</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSet|type"><span>VDMSet</span></a><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span class="main"><span class="main"><span class="main"><span>!</span></span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>inds</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>1</span></span><span> </span><span class="main"><span>..</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len|const"><span>len</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.post_inds_def|fact"><span class="entity_def" id="VDMToolkit.post_inds_def|thm"><span class="entity_def" id="VDMToolkit.post_inds_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.post_inds|const"><span>post_inds</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSeq|type"><span>VDMSeq</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMNat1|type"><span>VDMNat1</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSet|type"><span>VDMSet</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>post_inds</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>R</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span>finite</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>R</span></span></span></span><span> </span><span class="main"><span>‚àß</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len|const"><span>len</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>R</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.inds_as_nat_def|fact"><span class="entity_def" id="VDMToolkit.inds_as_nat_def|thm"><span class="entity_def" id="VDMToolkit.inds_as_nat_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
   </span><span class="entity"><span class="entity_def" id="VDMToolkit.inds_as_nat|const"><span>inds_as_nat</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSeq|type"><span>VDMSeq</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>‚Ñï</span></span><span> </span><span>set</span><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>inds_as_nat</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>1</span></span><span> </span><span class="main"><span>..</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len|const"><span>len</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span> </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span class="free"><span>applyList</span></span></span><span class="antiquote"><span>}</span></span></span><span> plays with </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>typ</span></span><span> </span><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span>option</span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span> type instead of </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>undefined</span></span><span class="antiquote"><span>}</span></span></span><span>.</span><span> </span><span>‚Ä∫</span></span></span><span>  

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.applyList_def|fact"><span class="entity_def" id="VDMToolkit.applyList_def|thm"><span class="entity_def" id="VDMToolkit.applyList_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.applyList|const"><span>applyList</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSeq|type"><span>VDMSeq</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>‚Ñï</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span>option</span><span>"</span></span></span><span> 
</span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
 </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>applyList</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>if</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>‚àß</span></span><span> </span><span>int</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>‚â§</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len|const"><span>len</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>then</span></span><span> 
                      </span><span>Some</span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>::</span></span><span>nat</span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> 
                   </span><span class="keyword1"><span>else</span></span><span> 
                      </span><span>None</span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span> </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span class="free"><span>applyVDMSeq</span></span></span><span class="antiquote"><span>}</span></span></span><span> sticks with </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>undefined</span></span><span class="antiquote"><span>}</span></span></span><span>.</span><span> </span><span>‚Ä∫</span></span></span><span>  
 
</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.applyVDMSeq_def|fact"><span class="entity_def" id="VDMToolkit.applyVDMSeq_def|thm"><span class="entity_def" id="VDMToolkit.applyVDMSeq_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.applyVDMSeq|const"><span>applyVDMSeq</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSeq|type"><span>VDMSeq</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMNat1|type"><span>VDMNat1</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'a</span></span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>infixl</span></span></span><span> </span><span class="quoted"><span>"</span><span class="keyword1"><span>$</span></span><span>"</span></span><span> 100</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
 </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="main"><span class="free"><span>$</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>if</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMNat1|const"><span>inv_VDMNat1</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>‚àß</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>‚â§</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len|const"><span>len</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>then</span></span><span> 
                      </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="main"><span>!</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> 
                   </span><span class="keyword1"><span>else</span></span><span> 
                      </span><span>undefined</span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.applyVDMSubseq&apos;_def|fact"><span class="entity_def" id="VDMToolkit.applyVDMSubseq&apos;_def|thm"><span class="entity_def" id="VDMToolkit.applyVDMSubseq&apos;_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.applyVDMSubseq&apos;|const"><span>applyVDMSubseq'</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSeq|type"><span>VDMSeq</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMNat1|type"><span>VDMNat1</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMNat1|type"><span>VDMNat1</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSeq|type"><span>VDMSeq</span></a><span>"</span></span></span><span>        </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span>_</span><span> </span><span class="keyword1"><span>$$$</span></span><span> </span><span class="keyword3"><span>(1</span></span><span class="keyword1"><span>{</span></span><span>_</span><span class="keyword1"><span>..</span></span><span>_</span><span class="keyword1"><span>}</span></span><span class="keyword3"><span>)</span></span><span>"</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span class="free"><span>$$$</span></span></span><span> </span><span class="main"><span class="free"><span>{</span></span></span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span class="main"><span class="free"><span>..</span></span></span><span class="free"><span class="bound"><span class="entity"><span>u</span></span></span></span><span class="main"><span class="free"><span>}</span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span class="keyword1"><span>if</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMNat1|const"><span>inv_VDMNat1</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="main"><span>‚àß</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMNat1|const"><span>inv_VDMNat1</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>u</span></span></span></span><span> </span><span class="main"><span>‚àß</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="main"><span>‚â§</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>u</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>then</span></span><span> 
                  </span><span>nths</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span>nat</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><span>..</span></span><span class="main"><span>(</span></span><span>nat</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>u</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span>
                </span><span class="keyword1"><span>else</span></span><span>
                  </span><span class="main"><span>[]</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span>Thanks to Tom Hayle for suggesting a generalised version, which is similar to the one below</span><span>‚Ä∫</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.applyVDMSubseq_def|fact"><span class="entity_def" id="VDMToolkit.applyVDMSubseq_def|thm"><span class="entity_def" id="VDMToolkit.applyVDMSubseq_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.applyVDMSubseq|const"><span>applyVDMSubseq</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSeq|type"><span>VDMSeq</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMInt|type"><span>VDMInt</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSet|type"><span>VDMSet</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSeq|type"><span>VDMSeq</span></a><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>infixl</span></span></span><span> </span><span class="quoted"><span>"</span><span class="keyword1"><span>$$</span></span><span>"</span></span><span> 105</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="bound"><span class="entity"><span>xs</span></span></span></span><span> </span><span class="main"><span class="free"><span>$$</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span>nths</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs</span></span></span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>x</span></span><span class="main"><span>::</span></span><span>nat</span><span> </span><span class="main"><span>|</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>}</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_vdm_len_fsb|fact"><span class="entity_def" id="VDMToolkit.l_vdm_len_fsb|thm"><span>l_vdm_len_fsb</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.post_len|const"><span>post_len</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len|const"><span>len</span></a><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.post_len_def|fact"><span>post_len_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len_def|fact"><span>len_def</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len_def|fact"><span>len_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.post_len_def|fact"><span>post_len_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMNat1_def|fact"><span>inv_VDMNat1_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMNat_def|fact"><span>inv_VDMNat_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_vdm_elems_fsb|fact"><span class="entity_def" id="VDMToolkit.l_vdm_elems_fsb|thm"><span>l_vdm_elems_fsb</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.post_elems|const"><span>post_elems</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.elems|const"><span>elems</span></a><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.elems_def|fact"><span>elems_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.post_elems_def|fact"><span>post_elems_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_vdm_inds_fsb|fact"><span class="entity_def" id="VDMToolkit.l_vdm_inds_fsb|thm"><span>l_vdm_inds_fsb</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.post_inds|const"><span>post_inds</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inds|const"><span>inds</span></a><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.post_inds_def|fact"><span>post_inds_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inds_def|fact"><span>inds_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len_def|fact"><span>len_def</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inds_def|fact"><span>inds_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len_def|fact"><span>len_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.post_inds_def|fact"><span>post_inds_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_vdmsubseq_empty|fact"><span class="entity_def" id="VDMToolkit.l_vdmsubseq_empty|thm"><span>l_vdmsubseq_empty</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>[]</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq|const"><span>$$</span></a></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>l</span></span><span class="main"><span>..</span></span><span class="free"><span>u</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[]</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq_def|fact"><span>applyVDMSubseq_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_vdmsubseq_beyond|fact"><span class="entity_def" id="VDMToolkit.l_vdmsubseq_beyond|thm"><span>l_vdmsubseq_beyond</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>l</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="free"><span>u</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq|const"><span>$$</span></a></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>l</span></span><span class="main"><span>..</span></span><span class="free"><span>u</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[]</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq_def|fact"><span>applyVDMSubseq_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span>
s(i,...,j) = 

          1.........(len s)
            i.......j       = j - i + 1  
          i....j            = j - i + 1
      -1..0..1
       i............j       = j - 1 + 1
       i.......j            = j - 1 + 1
       i...............j    = len s - 1 + 1

       i..j                 = j - i + 1 = 0

                     = (min j (len s) - max 1 i) + 1
  "len (s $$ {l..u}) = (min 0 (max 1 ((min u (len s)) - (min l 1) + 1)))"
</span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len|const"><span>len</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq|const"><span>$$</span></a></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>i</span></span><span class="main"><span>..</span></span><span class="free"><span>j</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>min</span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len|const"><span>len</span></a><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span>max</span><span> </span><span class="main"><span>1</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq_def|fact"><span>applyVDMSubseq_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len_def|fact"><span>len_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>length_nths</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><span>min_def</span><span> </span><span>max_def</span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>safe</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induct</span></span><span> </span><span class="quoted"><span class="free"><span>s</span></span></span><span class="main"><span>)</span></span><span>
   </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induct</span></span><span> </span><span class="quoted"><span class="free"><span>i</span></span></span><span> </span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>oops</span></span></span><span>
  
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_vdmsubseq_ext_eq|fact"><span class="entity_def" id="VDMToolkit.l_vdmsubseq_ext_eq|thm"><span>l_vdmsubseq_ext_eq</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMNat1|const"><span>inv_VDMNat1</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMNat1|const"><span>inv_VDMNat1</span></a><span> </span><span class="free"><span>u</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq&apos;|const"><span>$$$</span></a></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq&apos;|const"><span>{</span></a></span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq&apos;|const"><span>..</span></a></span><span class="free"><span>u</span></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq&apos;|const"><span>}</span></a></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq|const"><span>$$</span></a></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>l</span></span><span class="main"><span>..</span></span><span class="free"><span>u</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq_def|fact"><span>applyVDMSubseq_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq&apos;_def|fact"><span>applyVDMSubseq'_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMNat1_def|fact"><span>inv_VDMNat1_def</span></a><span> 
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span class="operator"><span>safe</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subgoal_tac</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span>nat</span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span>Suc</span><span> </span><span class="main"><span>0</span></span><span class="main"><span>..</span></span><span>nat</span><span> </span><span class="free"><span>u</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span>Suc</span><span> </span><span class="main"><span>0</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><span>‚â§</span></span><span> </span><span>int</span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>‚àß</span></span><span> </span><span>int</span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>‚â§</span></span><span> </span><span class="free"><span>u</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
   </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>erule</span></span><span> </span><span>HOL.subst</span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
   </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>safe</span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
     </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>linarith</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subgoal_tac</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><span>‚â§</span></span><span> </span><span>int</span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>‚àß</span></span><span> </span><span>int</span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>‚â§</span></span><span> </span><span class="free"><span>u</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
   </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>erule</span></span><span> </span><span>ssubst</span><span class="main"><span class="keyword3"><span>,</span></span></span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.applyVDMSeq_defs|fact"><span class="entity_def" id="VDMToolkit.applyVDMSeq_defs(3)|thm"><span class="entity_def" id="VDMToolkit.applyVDMSeq_defs(2)|thm"><span class="entity_def" id="VDMToolkit.applyVDMSeq_defs(1)|thm"><span>applyVDMSeq_defs</span></span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSeq_def|fact"><span>applyVDMSeq_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMNat1_def|fact"><span>inv_VDMNat1_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len_def|fact"><span>len_def</span></a><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.pre_applyVDMSeq_def|fact"><span class="entity_def" id="VDMToolkit.pre_applyVDMSeq_def|thm"><span class="entity_def" id="VDMToolkit.pre_applyVDMSeq_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> 
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.pre_applyVDMSeq|const"><span>pre_applyVDMSeq</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSeq|type"><span>VDMSeq</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMNat1|type"><span>VDMNat1</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>pre_applyVDMSeq</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMNat1|const"><span>inv_VDMNat1</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="main"><span>‚àß</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="main"><span>‚â§</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len|const"><span>len</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs</span></span></span></span><span>"</span></span></span><span> </span><span class="comment1"><span>(</span><span>*</span><span>‚àß i ‚àà inds xs?</span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.post_applyVDMSeq_def|fact"><span class="entity_def" id="VDMToolkit.post_applyVDMSeq_def|thm"><span class="entity_def" id="VDMToolkit.post_applyVDMSeq_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> 
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.post_applyVDMSeq|const"><span>post_applyVDMSeq</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSeq|type"><span>VDMSeq</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMNat1|type"><span>VDMNat1</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>post_applyVDMSeq</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>R</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.pre_applyVDMSeq|const"><span>pre_applyVDMSeq</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="main"><span>‚ü∂</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>R</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSeq|const"><span>$</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>theorem</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.PO_applyVDMSeq_fsb|fact"><span class="entity_def" id="VDMToolkit.PO_applyVDMSeq_fsb|thm"><span>PO_applyVDMSeq_fsb</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>‚àÄ</span></span><span> </span><span class="bound"><span>xs</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.pre_applyVDMSeq|const"><span>pre_applyVDMSeq</span></a><span> </span><span class="bound"><span>xs</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>‚ü∂</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.post_applyVDMSeq|const"><span>post_applyVDMSeq</span></a><span> </span><span class="bound"><span>xs</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>xs</span></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSeq|const"><span>$</span></a></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>  
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.post_applyVDMSeq_def|fact"><span>post_applyVDMSeq_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.pre_applyVDMSeq_def|fact"><span>pre_applyVDMSeq_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.pre_applyVDMSubseq_def|fact"><span class="entity_def" id="VDMToolkit.pre_applyVDMSubseq_def|thm"><span class="entity_def" id="VDMToolkit.pre_applyVDMSubseq_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> 
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.pre_applyVDMSubseq|const"><span>pre_applyVDMSubseq</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSeq|type"><span>VDMSeq</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMNat1|type"><span>VDMNat1</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMNat1|type"><span>VDMNat1</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>pre_applyVDMSubseq</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>u</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMNat1|const"><span>inv_VDMNat1</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="main"><span>‚àß</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMNat1|const"><span>inv_VDMNat1</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>u</span></span></span></span><span> </span><span class="main"><span>‚àß</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="main"><span>‚â§</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>u</span></span></span></span><span>"</span></span></span><span> 

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.post_applyVDMSubseq_def|fact"><span class="entity_def" id="VDMToolkit.post_applyVDMSubseq_def|thm"><span class="entity_def" id="VDMToolkit.post_applyVDMSubseq_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> 
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.post_applyVDMSubseq|const"><span>post_applyVDMSubseq</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSeq|type"><span>VDMSeq</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMNat1|type"><span>VDMNat1</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMNat1|type"><span>VDMNat1</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSeq|type"><span>VDMSeq</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>post_applyVDMSubseq</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>u</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>R</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>R</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>if</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.pre_applyVDMSubseq|const"><span>pre_applyVDMSubseq</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>u</span></span></span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>xs</span></span></span></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq|const"><span>$$</span></a></span><span class="main"><span>{</span></span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span class="main"><span>..</span></span><span class="free"><span class="bound"><span class="entity"><span>u</span></span></span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="main"><span>[]</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>theorem</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.PO_applyVDMSubseq_fsb|fact"><span class="entity_def" id="VDMToolkit.PO_applyVDMSubseq_fsb|thm"><span>PO_applyVDMSubseq_fsb</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>‚àÄ</span></span><span> </span><span class="bound"><span>xs</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.pre_applyVDMSubseq|const"><span>pre_applyVDMSubseq</span></a><span> </span><span class="bound"><span>xs</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>u</span></span><span> </span><span class="main"><span>‚ü∂</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.post_applyVDMSubseq|const"><span>post_applyVDMSubseq</span></a><span> </span><span class="bound"><span>xs</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>u</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>xs</span></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq|const"><span>$$</span></a></span><span class="main"><span>{</span></span><span class="free"><span>l</span></span><span class="main"><span>..</span></span><span class="free"><span>u</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>  
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.post_applyVDMSubseq_def|fact"><span>post_applyVDMSubseq_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.pre_applyVDMSubseq_def|fact"><span>pre_applyVDMSubseq_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.post_append_def|fact"><span class="entity_def" id="VDMToolkit.post_append_def|thm"><span class="entity_def" id="VDMToolkit.post_append_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.post_append|const"><span>post_append</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSeq|type"><span>VDMSeq</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSeq|type"><span>VDMSeq</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSeq|type"><span>VDMSeq</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>post_append</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>t</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>@</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>t</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.VDMSeq_defs|fact"><span class="entity_def" id="VDMToolkit.VDMSeq_defs(5)|thm"><span class="entity_def" id="VDMToolkit.VDMSeq_defs(4)|thm"><span class="entity_def" id="VDMToolkit.VDMSeq_defs(3)|thm"><span class="entity_def" id="VDMToolkit.VDMSeq_defs(2)|thm"><span class="entity_def" id="VDMToolkit.VDMSeq_defs(1)|thm"><span>VDMSeq_defs</span></span></span></span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.elems_def|fact"><span>elems_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inds_def|fact"><span>inds_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSeq_defs|fact"><span>applyVDMSeq_defs</span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_applyVDMSeq_inds|fact"><span class="entity_def" id="VDMToolkit.l_applyVDMSeq_inds|thm"><span>l_applyVDMSeq_inds</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.pre_applyVDMSeq|const"><span>pre_applyVDMSeq</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inds|const"><span>inds</span></a><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.pre_applyVDMSeq_def|fact"><span>pre_applyVDMSeq_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMNat1_def|fact"><span>inv_VDMNat1_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len_def|fact"><span>len_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inds_def|fact"><span>inds_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span> </span><span>Isabelle </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>hd</span></span><span class="antiquote"><span>}</span></span></span><span> and </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>tl</span></span><span class="antiquote"><span>}</span></span></span><span> is the same as VDM</span><span> </span><span>‚Ä∫</span></span></span><span> 
  
</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.pre_hd_def|fact"><span class="entity_def" id="VDMToolkit.pre_hd_def|thm"><span class="entity_def" id="VDMToolkit.pre_hd_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.pre_hd|const"><span>pre_hd</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSeq|type"><span>VDMSeq</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>pre_hd</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>‚â†</span></span><span> </span><span class="main"><span>[]</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.post_hd_def|fact"><span class="entity_def" id="VDMToolkit.post_hd_def|thm"><span class="entity_def" id="VDMToolkit.post_hd_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.post_hd|const"><span>post_hd</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSeq|type"><span>VDMSeq</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>post_hd</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>RESULT</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.pre_hd|const"><span>pre_hd</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>‚ü∂</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>RESULT</span></span></span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.elems|const"><span>elems</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>‚à®</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>RESULT</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSeq|const"><span>$</span></a></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  
</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.pre_tl_def|fact"><span class="entity_def" id="VDMToolkit.pre_tl_def|thm"><span class="entity_def" id="VDMToolkit.pre_tl_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.pre_tl|const"><span>pre_tl</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSeq|type"><span>VDMSeq</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>pre_tl</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>‚â†</span></span><span> </span><span class="main"><span>[]</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.post_tl_def|fact"><span class="entity_def" id="VDMToolkit.post_tl_def|thm"><span class="entity_def" id="VDMToolkit.post_tl_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.post_tl|const"><span>post_tl</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSeq|type"><span>VDMSeq</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSeq|type"><span>VDMSeq</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>post_tl</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>RESULT</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.pre_tl|const"><span>pre_tl</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>‚ü∂</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.elems|const"><span>elems</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>RESULT</span></span></span></span><span> </span><span class="main"><span>‚äÜ</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.elems|const"><span>elems</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.vdm_reverse_def|fact"><span class="entity_def" id="VDMToolkit.vdm_reverse_def|thm"><span class="entity_def" id="VDMToolkit.vdm_reverse_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.vdm_reverse|const"><span>vdm_reverse</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSeq|type"><span>VDMSeq</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSeq|type"><span>VDMSeq</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span class="main"><span class="main"><span class="main"><span>!</span></span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>vdm_reverse</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span>rev</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.post_vdm_reverse_def|fact"><span class="entity_def" id="VDMToolkit.post_vdm_reverse_def|thm"><span class="entity_def" id="VDMToolkit.post_vdm_reverse_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.post_vdm_reverse|const"><span>post_vdm_reverse</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSeq|type"><span>VDMSeq</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSeq|type"><span>VDMSeq</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>post_vdm_reverse</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>R</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.elems|const"><span>elems</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.elems|const"><span>elems</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>R</span></span></span></span><span>"</span></span></span><span>
  
</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.conc_def|fact"><span class="entity_def" id="VDMToolkit.conc_def|thm"><span class="entity_def" id="VDMToolkit.conc_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.conc|const"><span>conc</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSeq|type"><span>VDMSeq</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSeq|type"><span>VDMSeq</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSeq|type"><span>VDMSeq</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span class="main"><span class="main"><span class="main"><span>!</span></span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>conc</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span>concat</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.vdmtake_def|fact"><span class="entity_def" id="VDMToolkit.vdmtake_def|thm"><span class="entity_def" id="VDMToolkit.vdmtake_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.vdmtake|const"><span>vdmtake</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMNat|type"><span>VDMNat</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSeq|type"><span>VDMSeq</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSeq|type"><span>VDMSeq</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>vdmtake</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>if</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMNat|const"><span>inv_VDMNat</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span>take</span><span> </span><span class="main"><span>(</span></span><span>nat</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="main"><span>[]</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.post_vdmtake_def|fact"><span class="entity_def" id="VDMToolkit.post_vdmtake_def|thm"><span class="entity_def" id="VDMToolkit.post_vdmtake_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.post_vdmtake|const"><span>post_vdmtake</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMNat|type"><span>VDMNat</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSeq|type"><span>VDMSeq</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSeq|type"><span>VDMSeq</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>post_vdmtake</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>RESULT</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> 
    </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len|const"><span>len</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>RESULT</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>min</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len|const"><span>len</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="main"><span>‚àß</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.elems|const"><span>elems</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>RESULT</span></span></span></span><span> </span><span class="main"><span>‚äÜ</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.elems|const"><span>elems</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.seq_prefix_def|fact"><span class="entity_def" id="VDMToolkit.seq_prefix_def|thm"><span class="entity_def" id="VDMToolkit.seq_prefix_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.seq_prefix|const"><span>seq_prefix</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSeq|type"><span>VDMSeq</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSeq|type"><span>VDMSeq</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword3"><span>(</span></span><span>_</span><span class="keyword3"><span>/ </span></span><span class="keyword1"><span>‚äë</span></span><span> </span><span>_</span><span class="keyword3"><span>)</span></span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>51</span><span class="main"><span>,</span></span><span> 51</span><span class="main"><span>]</span></span><span> 50</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span class="free"><span>‚äë</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>t</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>t</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚à®</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[]</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚à®</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len|const"><span>len</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>‚â§</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len|const"><span>len</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>t</span></span></span></span><span> </span><span class="main"><span>‚àß</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>‚àÉ</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inds|const"><span>inds</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>t</span></span></span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdmtake|const"><span>vdmtake</span></a><span> </span><span class="bound"><span>i</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>t</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.post_seq_prefix_def|fact"><span class="entity_def" id="VDMToolkit.post_seq_prefix_def|thm"><span class="entity_def" id="VDMToolkit.post_seq_prefix_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.post_seq_prefix|const"><span>post_seq_prefix</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSeq|type"><span>VDMSeq</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSeq|type"><span>VDMSeq</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>post_seq_prefix</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>t</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>RESULT</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span>
    </span><span class="free"><span class="bound"><span class="entity"><span>RESULT</span></span></span></span><span> </span><span class="main"><span>‚ü∂</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.elems|const"><span>elems</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>‚äÜ</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.elems|const"><span>elems</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>t</span></span></span></span><span> </span><span class="main"><span>‚àß</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len|const"><span>len</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>‚â§</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len|const"><span>len</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>t</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span>***************************************************************</span><span>*</span><span>)</span></span><span>      
</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span> </span><span>Sequence operators lemmas</span><span> </span><span>‚Ä∫</span></span></span><span>  

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_inv_VDMSet_finite|fact"><span class="entity_def" id="VDMToolkit.l_inv_VDMSet_finite|thm"><span>l_inv_VDMSet_finite</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMSet|const"><span>inv_VDMSet</span></a><span> </span><span class="free"><span>xs</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMSet_def|fact"><span>inv_VDMSet_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>  

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_inv_SeqElems_alt|fact"><span class="entity_def" id="VDMToolkit.l_inv_SeqElems_alt|thm"><span>l_inv_SeqElems_alt</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_SeqElems|const"><span>inv_SeqElems</span></a><span> </span><span class="free"><span>einv</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_SeqElems0|const"><span>inv_SeqElems0</span></a><span> </span><span class="free"><span>einv</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>  
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.elems_def|fact"><span>elems_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_SeqElems0_def|fact"><span>inv_SeqElems0_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_SeqElems_def|fact"><span>inv_SeqElems_def</span></a><span> </span><span>list_all_iff</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_inv_SeqElems_empty|fact"><span class="entity_def" id="VDMToolkit.l_inv_SeqElems_empty|thm"><span>l_inv_SeqElems_empty</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_SeqElems|const"><span>inv_SeqElems</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>[]</span></span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_SeqElems_def|fact"><span>inv_SeqElems_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_inv_SeqElems_Cons|fact"><span class="entity_def" id="VDMToolkit.l_inv_SeqElems_Cons|thm"><span>l_inv_SeqElems_Cons</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_SeqElems|const"><span>inv_SeqElems</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>a</span></span><span class="main"><span>#</span></span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>‚àß</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_SeqElems|const"><span>inv_SeqElems</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_SeqElems_def|fact"><span>inv_SeqElems_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.elems_def|fact"><span>elems_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_inv_SeqElems_Cons&apos;|fact"><span class="entity_def" id="VDMToolkit.l_inv_SeqElems_Cons&apos;|thm"><span>l_inv_SeqElems_Cons'</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_SeqElems|const"><span>inv_SeqElems</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_SeqElems|const"><span>inv_SeqElems</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>a</span></span><span class="main"><span>#</span></span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_inv_SeqElems_Cons|fact"><span>l_inv_SeqElems_Cons</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_inv_SeqElems_append|fact"><span class="entity_def" id="VDMToolkit.l_inv_SeqElems_append|thm"><span>l_inv_SeqElems_append</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_SeqElems|const"><span>inv_SeqElems</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>xs</span></span><span> </span><span class="main"><span>@</span></span><span> </span><span class="main"><span>[</span></span><span class="free"><span>x</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚àß</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_SeqElems|const"><span>inv_SeqElems</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_SeqElems_def|fact"><span>inv_SeqElems_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.elems_def|fact"><span>elems_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_inv_SeqElems_append&apos;|fact"><span class="entity_def" id="VDMToolkit.l_inv_SeqElems_append&apos;|thm"><span>l_inv_SeqElems_append'</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_SeqElems|const"><span>inv_SeqElems</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_SeqElems|const"><span>inv_SeqElems</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>xs</span></span><span> </span><span class="main"><span>@</span></span><span> </span><span class="main"><span>[</span></span><span class="free"><span>x</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_inv_SeqElems_append|fact"><span>l_inv_SeqElems_append</span></a><span class="main"><span>)</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span>
lemma l_invSeqElems_inv_True_True[simp]: "undefined ‚àâ elems r ‚üπ inv_SeqElems inv_True r" 
  by (metis elems_def inv_SeqElems0_def l_inv_SeqElems_alt l_inv_True_True)
</span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_invSeqElems_inv_True_True|fact"><span class="entity_def" id="VDMToolkit.l_invSeqElems_inv_True_True|thm"><span>l_invSeqElems_inv_True_True</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_SeqElems|const"><span>inv_SeqElems</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_True|const"><span>inv_True</span></a><span> </span><span class="free"><span>r</span></span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_SeqElems0_def|fact"><span>inv_SeqElems0_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_inv_SeqElems_alt|fact"><span>l_inv_SeqElems_alt</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_inv_True_True|fact"><span>l_inv_True_True</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_len_nat1|fact"><span class="entity_def" id="VDMToolkit.l_len_nat1|thm"><span>l_len_nat1</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><span>‚â†</span></span><span> </span><span class="main"><span>[]</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len|const"><span>len</span></a><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len_def|fact"><span>len_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_len_append_single|fact"><span class="entity_def" id="VDMToolkit.l_len_append_single|thm"><span>l_len_append_single</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len|const"><span>len</span></a><span class="main"><span>(</span></span><span class="free"><span>xs</span></span><span> </span><span class="main"><span>@</span></span><span> </span><span class="main"><span>[</span></span><span class="free"><span>x</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>+</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len|const"><span>len</span></a><span> </span><span class="free"><span>xs</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induct</span></span><span> </span><span class="quoted"><span class="free"><span>xs</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span>
</span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len_def|fact"><span>len_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_len_empty|fact"><span class="entity_def" id="VDMToolkit.l_len_empty|thm"><span>l_len_empty</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len|const"><span>len</span></a><span> </span><span class="main"><span>[]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len_def|fact"><span>len_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_len_cons|fact"><span class="entity_def" id="VDMToolkit.l_len_cons|thm"><span>l_len_cons</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len|const"><span>len</span></a><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>#</span></span><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>+</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len|const"><span>len</span></a><span> </span><span class="free"><span>xs</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induct</span></span><span> </span><span class="quoted"><span class="free"><span>xs</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len_def|fact"><span>len_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_elems_append|fact"><span class="entity_def" id="VDMToolkit.l_elems_append|thm"><span>l_elems_append</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.elems|const"><span>elems</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>xs</span></span><span> </span><span class="main"><span>@</span></span><span> </span><span class="main"><span>[</span></span><span class="free"><span>x</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>insert</span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.elems|const"><span>elems</span></a><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.elems_def|fact"><span>elems_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_elems_cons|fact"><span class="entity_def" id="VDMToolkit.l_elems_cons|thm"><span>l_elems_cons</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.elems|const"><span>elems</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>#</span></span><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>insert</span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.elems|const"><span>elems</span></a><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.elems_def|fact"><span>elems_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_elems_empty|fact"><span class="entity_def" id="VDMToolkit.l_elems_empty|thm"><span>l_elems_empty</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.elems|const"><span>elems</span></a><span> </span><span class="main"><span>[]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.elems_def|fact"><span>elems_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_inj_seq|fact"><span class="entity_def" id="VDMToolkit.l_inj_seq|thm"><span>l_inj_seq</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>distinct</span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len|const"><span>len</span></a><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.elems|const"><span>elems</span></a><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induct</span></span><span> </span><span class="quoted"><span class="free"><span>s</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.elems_def|fact"><span>elems_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len_def|fact"><span>len_def</span></a><span class="main"><span>)</span></span><span> </span><span class="comment1"><span>(</span><span>*</span><span> add: l_elems_cons </span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_elems_finite|fact"><span class="entity_def" id="VDMToolkit.l_elems_finite|thm"><span>l_elems_finite</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.elems|const"><span>elems</span></a><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.elems_def|fact"><span>elems_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_inds_append|fact"><span class="entity_def" id="VDMToolkit.l_inds_append|thm"><span>l_inds_append</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inds|const"><span>inds</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>xs</span></span><span> </span><span class="main"><span>@</span></span><span> </span><span class="main"><span>[</span></span><span class="free"><span>x</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>insert</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len|const"><span>len</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>xs</span></span><span> </span><span class="main"><span>@</span></span><span> </span><span class="main"><span>[</span></span><span class="free"><span>x</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inds|const"><span>inds</span></a><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inds_def|fact"><span>inds_def</span></a><span>  
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>atLeastAtMostPlus1_int_conv</span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len_def|fact"><span>len_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_inds_cons|fact"><span class="entity_def" id="VDMToolkit.l_inds_cons|thm"><span>l_inds_cons</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inds|const"><span>inds</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>#</span></span><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>1</span></span><span> </span><span class="main"><span>..</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len|const"><span>len</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inds_def|fact"><span>inds_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len_def|fact"><span>len_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_len_within_inds|fact"><span class="entity_def" id="VDMToolkit.l_len_within_inds|thm"><span>l_len_within_inds</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><span>‚â†</span></span><span> </span><span class="main"><span>[]</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len|const"><span>len</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inds|const"><span>inds</span></a><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len_def|fact"><span>len_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inds_def|fact"><span>inds_def</span></a><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induct</span></span><span> </span><span class="quoted"><span class="free"><span>s</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_inds_empty|fact"><span class="entity_def" id="VDMToolkit.l_inds_empty|thm"><span>l_inds_empty</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inds|const"><span>inds</span></a><span> </span><span class="main"><span>[]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inds_def|fact"><span>inds_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len_def|fact"><span>len_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_inds_as_nat_append|fact"><span class="entity_def" id="VDMToolkit.l_inds_as_nat_append|thm"><span>l_inds_as_nat_append</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inds_as_nat|const"><span>inds_as_nat</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>xs</span></span><span> </span><span class="main"><span>@</span></span><span> </span><span class="main"><span>[</span></span><span class="free"><span>x</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>insert</span><span> </span><span class="main"><span>(</span></span><span>length</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>xs</span></span><span> </span><span class="main"><span>@</span></span><span> </span><span class="main"><span>[</span></span><span class="free"><span>x</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inds_as_nat|const"><span>inds_as_nat</span></a><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inds_as_nat_def|fact"><span>inds_as_nat_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len_def|fact"><span>len_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_applyVDM_len1|fact"><span class="entity_def" id="VDMToolkit.l_applyVDM_len1|thm"><span>l_applyVDM_len1</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSeq|const"><span>$</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len|const"><span>len</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>undefined</span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSeq_def|fact"><span>applyVDMSeq_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len_def|fact"><span>len_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_applyVDM_zero|fact"><span class="entity_def" id="VDMToolkit.l_applyVDM_zero|thm"><span>l_applyVDM_zero</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSeq|const"><span>$</span></a></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>undefined</span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSeq_defs|fact"><span>applyVDMSeq_defs</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> this goal is too specific; they are useful in specific situations </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_applyVDM1|fact"><span class="entity_def" id="VDMToolkit.l_applyVDM1|thm"><span>l_applyVDM1</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>#</span></span><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSeq|const"><span>$</span></a></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSeq_defs|fact"><span>applyVDMSeq_defs</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_applyVDM2|fact"><span class="entity_def" id="VDMToolkit.l_applyVDM2|thm"><span>l_applyVDM2</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>#</span></span><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSeq|const"><span>$</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSeq|const"><span>$</span></a></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSeq_defs|fact"><span>applyVDMSeq_defs</span></a><span class="main"><span>)</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> generalise previous failure for a better matching goal: trade $ for ! </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_applyVDM1_gen|fact"><span class="entity_def" id="VDMToolkit.l_applyVDM1_gen|thm"><span>l_applyVDM1_gen</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><span>‚â†</span></span><span> </span><span class="main"><span>[]</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSeq|const"><span>$</span></a></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induct</span></span><span> </span><span class="quoted"><span class="free"><span>s</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSeq_defs|fact"><span>applyVDMSeq_defs</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_applyVDMSeq_i|fact"><span class="entity_def" id="VDMToolkit.l_applyVDMSeq_i|thm"><span>l_applyVDMSeq_i</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inds|const"><span>inds</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSeq|const"><span>$</span></a></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span>nat</span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSeq_defs|fact"><span>applyVDMSeq_defs</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inds_def|fact"><span>inds_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_applyVDM_cons_gt1empty|fact"><span class="entity_def" id="VDMToolkit.l_applyVDM_cons_gt1empty|thm"><span>l_applyVDM_cons_gt1empty</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>#</span></span><span> </span><span class="main"><span>[]</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSeq|const"><span>$</span></a></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>undefined</span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSeq_defs|fact"><span>applyVDMSeq_defs</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_applyVDM_cons_gt1|fact"><span class="entity_def" id="VDMToolkit.l_applyVDM_cons_gt1|thm"><span>l_applyVDM_cons_gt1</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len|const"><span>len</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>#</span></span><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSeq|const"><span>$</span></a></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSeq|const"><span>$</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSeq_defs|fact"><span>applyVDMSeq_defs</span></a><span class="main"><span>)</span></span><span> </span><span class="comment1"><span>(</span><span>*</span><span> again too complex; try avoiding the trade $ for ! again </span><span>*</span><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>impI</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induct</span></span><span> </span><span class="quoted"><span class="free"><span>xs</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>length_induct</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span>nat_1</span><span> </span><span>nat_diff_distrib</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_applyVDMSeq_defined|fact"><span class="entity_def" id="VDMToolkit.l_applyVDMSeq_defined|thm"><span>l_applyVDMSeq_defined</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><span>‚â†</span></span><span> </span><span class="main"><span>[]</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_SeqElems|const"><span>inv_SeqElems</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Œª</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>‚â†</span></span><span> </span><span>undefined</span><span class="main"><span>)</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>‚üπ</span></span><span>  </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSeq|const"><span>$</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len|const"><span>len</span></a><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚â†</span></span><span> </span><span>undefined</span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSeq_defs|fact"><span>applyVDMSeq_defs</span></a><span>  
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span> </span><span class="comment1"><span>(</span><span>*</span><span> add: l_len_nat1)</span><span>*</span><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>nat</span><span> </span><span class="main"><span>(</span></span><span>int</span><span> </span><span class="main"><span>(</span></span><span>length</span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="free"><span>s</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_SeqElems_def|fact"><span>inv_SeqElems_def</span></a><span> 
   </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>list_all_length</span><span class="main"><span>)</span></span><span>
  </span><span class="comment1"><span>(</span><span>*</span><span>thm ssubst[OF l_inv_SeqElems_alt]
  apply (subst ssubst[OF l_inv_SeqElems_alt])</span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_applyVDMSeq_append_last|fact"><span class="entity_def" id="VDMToolkit.l_applyVDMSeq_append_last|thm"><span>l_applyVDMSeq_append_last</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>ms</span></span><span> </span><span class="main"><span>@</span></span><span> </span><span class="main"><span>[</span></span><span class="free"><span>m</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSeq|const"><span>$</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len|const"><span>len</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>ms</span></span><span> </span><span class="main"><span>@</span></span><span> </span><span class="main"><span>[</span></span><span class="free"><span>m</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>m</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSeq_defs|fact"><span>applyVDMSeq_defs</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_applyVDMSeq_cons_last|fact"><span class="entity_def" id="VDMToolkit.l_applyVDMSeq_cons_last|thm"><span>l_applyVDMSeq_cons_last</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>m</span></span><span> </span><span class="main"><span>#</span></span><span> </span><span class="free"><span>ms</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSeq|const"><span>$</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len|const"><span>len</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>m</span></span><span> </span><span class="main"><span>#</span></span><span> </span><span class="free"><span>ms</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>if</span></span><span> </span><span class="free"><span>ms</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[]</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="free"><span>ms</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSeq|const"><span>$</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len|const"><span>len</span></a><span> </span><span class="free"><span>ms</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSeq_defs|fact"><span>applyVDMSeq_defs</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>nat_diff_distrib'</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_inds_in_set|fact"><span class="entity_def" id="VDMToolkit.l_inds_in_set|thm"><span>l_inds_in_set</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inds|const"><span>inds</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSeq|const"><span>$</span></a></span><span class="free"><span>i</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span>set</span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inds_def|fact"><span>inds_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSeq_def|fact"><span>applyVDMSeq_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMNat1_def|fact"><span>inv_VDMNat1_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len_def|fact"><span>len_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span class="operator"><span>safe</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_inv_SeqElems_inds_inv_T|fact"><span class="entity_def" id="VDMToolkit.l_inv_SeqElems_inds_inv_T|thm"><span>l_inv_SeqElems_inds_inv_T</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_SeqElems|const"><span>inv_SeqElems</span></a><span> </span><span class="free"><span>inv_T</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inds|const"><span>inds</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>inv_T</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSeq|const"><span>$</span></a></span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_inv_SeqElems_alt|fact"><span>l_inv_SeqElems_alt</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_SeqElems0_def|fact"><span>inv_SeqElems0_def</span></a><span> 
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>erule_tac</span></span><span> x</span><span class="main"><span class="main"><span>=</span></span></span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSeq|const"><span>$</span></a></span><span class="free"><span>i</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>in</span></span></span></span><span> </span><span>ballE</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_inds_in_set|fact"><span>l_inds_in_set</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_inv_SeqElems_all|fact"><span class="entity_def" id="VDMToolkit.l_inv_SeqElems_all|thm"><span>l_inv_SeqElems_all</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_SeqElems|const"><span>inv_SeqElems</span></a><span> </span><span class="free"><span>inv_T</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>‚àÄ</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inds|const"><span>inds</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>inv_T</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSeq|const"><span>$</span></a></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_SeqElems_def|fact"><span>inv_SeqElems_def</span></a><span> 
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>list_all_length</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inds_def|fact"><span>inds_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len_def|fact"><span>len_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>safe</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>safe</span></span><span class="main"><span>)</span></span><span>
   </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>erule_tac</span></span><span> x</span><span class="main"><span class="main"><span>=</span></span></span><span class="quoted"><span class="quoted"><span>"</span><span>nat</span><span class="main"><span>(</span></span><span class="improper"><span>i</span></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>in</span></span></span></span><span> </span><span>allE</span><span class="main"><span>)</span></span><span>
   </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
   </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>erule_tac</span></span><span> x</span><span class="main"><span class="main"><span>=</span></span></span><span class="quoted"><span class="quoted"><span>"</span><span>int</span><span> </span><span class="improper"><span>n</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>in</span></span></span></span><span> </span><span>ballE</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_inds_upto|fact"><span class="entity_def" id="VDMToolkit.l_inds_upto|thm"><span>l_inds_upto</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inds|const"><span>inds</span></a><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>1</span></span><span class="main"><span>..</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len|const"><span>len</span></a><span> </span><span class="free"><span>s</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inds_def|fact"><span>inds_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_vdmtake_take|fact"><span class="entity_def" id="VDMToolkit.l_vdmtake_take|thm"><span>l_vdmtake_take</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdmtake|const"><span>vdmtake</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>take</span><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdmtake_def|fact"><span>vdmtake_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMNat_def|fact"><span>inv_VDMNat_def</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_seq_prefix_append_empty|fact"><span class="entity_def" id="VDMToolkit.l_seq_prefix_append_empty|thm"><span>l_seq_prefix_append_empty</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.seq_prefix|const"><span>‚äë</span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>@</span></span><span> </span><span class="main"><span>[]</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.seq_prefix_def|fact"><span>seq_prefix_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_seq_prefix_id|fact"><span class="entity_def" id="VDMToolkit.l_seq_prefix_id|thm"><span>l_seq_prefix_id</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.seq_prefix|const"><span>‚äë</span></a></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.seq_prefix_def|fact"><span>seq_prefix_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_len_append|fact"><span class="entity_def" id="VDMToolkit.l_len_append|thm"><span>l_len_append</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len|const"><span>len</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>‚â§</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len|const"><span>len</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="main"><span>@</span></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induct</span></span><span> </span><span class="quoted"><span class="free"><span>t</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len_def|fact"><span>len_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_vdmtake_len|fact"><span class="entity_def" id="VDMToolkit.l_vdmtake_len|thm"><span>l_vdmtake_len</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdmtake|const"><span>vdmtake</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len|const"><span>len</span></a><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdmtake_def|fact"><span>vdmtake_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len_def|fact"><span>len_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMNat_def|fact"><span>inv_VDMNat_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_vdmtake_len_append|fact"><span class="entity_def" id="VDMToolkit.l_vdmtake_len_append|thm"><span>l_vdmtake_len_append</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdmtake|const"><span>vdmtake</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len|const"><span>len</span></a><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="main"><span>@</span></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdmtake_def|fact"><span>vdmtake_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len_def|fact"><span>len_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMNat_def|fact"><span>inv_VDMNat_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_vdmtake_append|fact"><span class="entity_def" id="VDMToolkit.l_vdmtake_append|thm"><span>l_vdmtake_append</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdmtake|const"><span>vdmtake</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len|const"><span>len</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>+</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len|const"><span>len</span></a><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="main"><span>@</span></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="main"><span>@</span></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induct</span></span><span> </span><span class="quoted"><span class="free"><span>t</span></span></span><span class="main"><span>)</span></span><span>
   </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdmtake_def|fact"><span>vdmtake_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len_def|fact"><span>len_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMNat_def|fact"><span>inv_VDMNat_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdmtake|const"><span>vdmtake</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span> </span><span class="main"><span>+</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len|const"><span>len</span></a><span> </span><span class="main"><span>[</span></span><span class="free"><span>a</span></span><span class="main"><span>,</span></span><span class="free"><span>b</span></span><span class="main"><span>,</span></span><span class="free"><span>c</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>[</span></span><span class="free"><span>a</span></span><span class="main"><span>,</span></span><span class="free"><span>b</span></span><span class="main"><span>,</span></span><span class="free"><span>c</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>@</span></span><span> </span><span class="main"><span>[</span></span><span class="free"><span>a</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_seq_prefix_append|fact"><span class="entity_def" id="VDMToolkit.l_seq_prefix_append|thm"><span>l_seq_prefix_append</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.seq_prefix|const"><span>‚äë</span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>@</span></span><span> </span><span class="free"><span>t</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.seq_prefix_def|fact"><span>seq_prefix_def</span></a><span>  
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induct</span></span><span> </span><span class="quoted"><span class="free"><span>t</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>elim</span></span><span> </span><span>disjE</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="free"><span>s</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>disjI2</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>rule</span></span><span> </span><span>disjI2</span><span class="main"><span>)</span></span><span>
   </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule_tac</span></span><span> x</span><span class="main"><span class="main"><span>=</span></span></span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len|const"><span>len</span></a><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>in</span></span></span></span><span> </span><span>bexI</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_vdmtake_len_append|fact"><span>l_vdmtake_len_append</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_len_within_inds|fact"><span>l_len_within_inds</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>full_types</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>atLeastAtMost_iff</span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inds_def|fact"><span>inds_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_len_append|fact"><span>l_len_append</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_len_within_inds|fact"><span>l_len_within_inds</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_vdmtake_len_append|fact"><span>l_vdmtake_len_append</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_elems_of_inds_of_nth|fact"><span class="entity_def" id="VDMToolkit.l_elems_of_inds_of_nth|thm"><span>l_elems_of_inds_of_nth</span></span></span><span class="main"><span>:</span></span><span>  
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>1</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>int</span><span> </span><span class="main"><span>(</span></span><span>length</span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>j</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span>set</span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_elems_inds_found|fact"><span class="entity_def" id="VDMToolkit.l_elems_inds_found|thm"><span>l_elems_inds_found</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span>set</span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>‚àÉ</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>‚àß</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="comment1"><span>(</span><span>*</span><span>apply (simp only: ListMem_iff[symmetric])</span><span>*</span><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induct</span></span><span> </span><span class="quoted"><span class="free"><span>s</span></span></span><span class="main"><span>)</span></span><span>
   </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>safe</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_elems_of_inds|fact"><span class="entity_def" id="VDMToolkit.l_elems_of_inds|thm"><span>l_elems_of_inds</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.elems|const"><span>elems</span></a><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>‚àÉ</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inds|const"><span>inds</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>‚àß</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSeq|const"><span>$</span></a></span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.elems_def|fact"><span>elems_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inds_def|fact"><span>inds_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>iffI</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSeq_def|fact"><span>applyVDMSeq_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len_def|fact"><span>len_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>frule</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_elems_inds_found|fact"><span>l_elems_inds_found</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>safe</span></span><span>
   </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule_tac</span></span><span> x</span><span class="main"><span class="main"><span>=</span></span></span><span class="quoted"><span class="quoted"><span>"</span><span>int</span><span class="main"><span>(</span></span><span class="improper"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>in</span></span></span></span><span> </span><span>exI</span><span class="main"><span>)</span></span><span>
   </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMNat1_def|fact"><span>inv_VDMNat1_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMNat1_def|fact"><span>inv_VDMNat1_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span>***************************************************************</span><span>*</span><span>)</span></span><span>      
</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span> </span><span>Optional inner type invariant check</span><span> </span><span>‚Ä∫</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.inv_Option_def|fact"><span class="entity_def" id="VDMToolkit.inv_Option_def|thm"><span class="entity_def" id="VDMToolkit.inv_Option_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.inv_Option|const"><span>inv_Option</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span>option</span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span class="main"><span class="main"><span class="main"><span>!</span></span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>inv_Option</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>inv_type</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><span>‚â†</span></span><span> </span><span>None</span><span> </span><span class="main"><span>‚ü∂</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>inv_type</span></span></span></span><span> </span><span class="main"><span>(</span></span><span>the</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_inv_option_Some|fact"><span class="entity_def" id="VDMToolkit.l_inv_option_Some|thm"><span>l_inv_option_Some</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_Option|const"><span>inv_Option</span></a><span> </span><span class="free"><span>inv_type</span></span><span> </span><span class="main"><span>(</span></span><span>Some</span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>inv_type</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_Option_def|fact"><span>inv_Option_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_inv_option_None|fact"><span class="entity_def" id="VDMToolkit.l_inv_option_None|thm"><span>l_inv_option_None</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_Option|const"><span>inv_Option</span></a><span> </span><span class="free"><span>inv_type</span></span><span> </span><span>None</span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_Option_def|fact"><span>inv_Option_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span>***************************************************************</span><span>*</span><span>)</span></span><span>      
</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span> </span><span>Maps</span><span> </span><span>‚Ä∫</span></span></span><span>
  
</span><span class="comment1"><span>(</span><span>*</span><span>type_synonym ('a, 'b) "VDMMap" = "'a ‚áÄ 'b" (infixr "‚áÄ" 0)</span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span>
   </span><span>In Isabelle, VDM maps can be declared by the </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>text</span></span><span> </span><span class="raw_text"><span>"‚áÄ"</span></span><span class="antiquote"><span>}</span></span></span><span> operator (not </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>text</span></span><span> </span><span class="raw_text"><span>"‚áí"</span></span><span class="antiquote"><span>}</span></span></span><span>) 
</span><span>   (i.e. type 'right' and you will see the arrow on dropdown menu).
</span><span>
</span><span>   It represents a function to an optional result as follows:
</span><span>
</span><span>   VDM     : map X to Y
</span><span>   Isabelle: </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>text</span></span><span> </span><span class="raw_text"><span>"X ‚áÄ Y"</span></span><span class="antiquote"><span>}</span></span></span><span>
</span><span>
</span><span>   which is the same as 
</span><span>
</span><span>   Isabelle: </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>text</span></span><span> </span><span class="raw_text"><span>"X ‚áí Y option"</span></span><span class="antiquote"><span>}</span></span></span><span>
</span><span>   
</span><span>   where an optional type is like using nil in VDM (map X to [Y]).
</span><span>   That is, Isabele makes the map total by mapping everything outside
</span><span>   the domain to None (or nil). In Isabelle
</span><span>
</span><span>   </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>text</span></span><span> </span><span class="raw_text"><span>"datatype 'a option = None | Some 'a"</span></span><span class="antiquote"><span>}</span></span></span><span>
</span><span>
</span><span> Some VDM functions for map domain/range restriction and filtering. You use some like &lt;: and :&gt;.
</span><span> The use of some of these functions is one reason that makes the use of maps a bit more demanding,
</span><span> but it works fine. Given these are new definitions, "apply auto" won't finish proofs as Isabelle
</span><span> needs to know more (lemmas) about the new operators.</span><span> </span><span>‚Ä∫</span></span></span><span>
  
</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.inv_Map_def|fact"><span class="entity_def" id="VDMToolkit.inv_Map_def|thm"><span class="entity_def" id="VDMToolkit.inv_Map_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.inv_Map|const"><span>inv_Map</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áÄ</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚áí</span></span><span class="main"><span>ùîπ</span></span><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span class="main"><span class="main"><span class="main"><span>!</span></span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>inv_Map</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>inv_Dom</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>inv_Rng</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> 
      </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMSet&apos;|const"><span>inv_VDMSet'</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>inv_Dom</span></span></span></span><span> </span><span class="main"><span>(</span></span><span>dom</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚àß</span></span><span> 
      </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMSet&apos;|const"><span>inv_VDMSet'</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>inv_Rng</span></span></span></span><span> </span><span class="main"><span>(</span></span><span>ran</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  
</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.inv_Map1_def|fact"><span class="entity_def" id="VDMToolkit.inv_Map1_def|thm"><span class="entity_def" id="VDMToolkit.inv_Map1_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.inv_Map1|const"><span>inv_Map1</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áÄ</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span class="main"><span class="main"><span class="main"><span>!</span></span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>inv_Map1</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>inv_Dom</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>inv_Ran</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> 
    </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_Map|const"><span>inv_Map</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>inv_Dom</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>inv_Ran</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span> </span><span class="main"><span>‚àß</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span> </span><span class="main"><span>‚â†</span></span><span> </span><span>Map.empty</span><span>"</span></span></span><span>
  </span><span class="comment1"><span>(</span><span>*</span><span>vdm_card (dom m) &gt; 0 ‚àß is worst more complicated for nothing</span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.inv_Inmap_def|fact"><span class="entity_def" id="VDMToolkit.inv_Inmap_def|thm"><span class="entity_def" id="VDMToolkit.inv_Inmap_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.inv_Inmap|const"><span>inv_Inmap</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áÄ</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span class="main"><span class="main"><span class="main"><span>!</span></span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>inv_Inmap</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>inv_Dom</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>inv_Ran</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> 
    </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_Map|const"><span>inv_Map</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>inv_Dom</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>inv_Ran</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span> </span><span class="main"><span>‚àß</span></span><span> </span><span>inj</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.inv_Map_defs|fact"><span class="entity_def" id="VDMToolkit.inv_Map_defs(4)|thm"><span class="entity_def" id="VDMToolkit.inv_Map_defs(3)|thm"><span class="entity_def" id="VDMToolkit.inv_Map_defs(2)|thm"><span class="entity_def" id="VDMToolkit.inv_Map_defs(1)|thm"><span>inv_Map_defs</span></span></span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_Map_def|fact"><span>inv_Map_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMSet&apos;_defs|fact"><span>inv_VDMSet'_defs</span></a><span>
</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.inv_Map1_defs|fact"><span class="entity_def" id="VDMToolkit.inv_Map1_defs(5)|thm"><span class="entity_def" id="VDMToolkit.inv_Map1_defs(4)|thm"><span class="entity_def" id="VDMToolkit.inv_Map1_defs(3)|thm"><span class="entity_def" id="VDMToolkit.inv_Map1_defs(2)|thm"><span class="entity_def" id="VDMToolkit.inv_Map1_defs(1)|thm"><span>inv_Map1_defs</span></span></span></span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_Map1_def|fact"><span>inv_Map1_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_Map_defs|fact"><span>inv_Map_defs</span></a><span>
</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.inv_Inmap_defs|fact"><span class="entity_def" id="VDMToolkit.inv_Inmap_defs(6)|thm"><span class="entity_def" id="VDMToolkit.inv_Inmap_defs(5)|thm"><span class="entity_def" id="VDMToolkit.inv_Inmap_defs(4)|thm"><span class="entity_def" id="VDMToolkit.inv_Inmap_defs(3)|thm"><span class="entity_def" id="VDMToolkit.inv_Inmap_defs(2)|thm"><span class="entity_def" id="VDMToolkit.inv_Inmap_defs(1)|thm"><span>inv_Inmap_defs</span></span></span></span></span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_Inmap_def|fact"><span>inv_Inmap_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_Map_defs|fact"><span>inv_Map_defs</span></a><span> </span><span>inj_def</span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.rng_def|fact"><span class="entity_def" id="VDMToolkit.rng_def|thm"><span class="entity_def" id="VDMToolkit.rng_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.rng|const"><span>rng</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áÄ</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSet|type"><span>VDMSet</span></a><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span class="main"><span class="main"><span class="main"><span>!</span></span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>rng</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span>ran</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.rng_defs|fact"><span class="entity_def" id="VDMToolkit.rng_defs(2)|thm"><span class="entity_def" id="VDMToolkit.rng_defs(1)|thm"><span>rng_defs</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.rng_def|fact"><span>rng_def</span></a><span> </span><span>ran_def</span><span>
  
</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.dagger_def|fact"><span class="entity_def" id="VDMToolkit.dagger_def|thm"><span class="entity_def" id="VDMToolkit.dagger_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.dagger|const"><span>dagger</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áÄ</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áÄ</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áÄ</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>infixl</span></span></span><span> </span><span class="quoted"><span>"</span><span class="keyword1"><span>‚Ä†</span></span><span>"</span></span><span> 100</span><span class="main"><span>)</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span class="main"><span class="main"><span class="main"><span>!</span></span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="main"><span class="free"><span>‚Ä†</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="main"><span>++</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.munion_def|fact"><span class="entity_def" id="VDMToolkit.munion_def|thm"><span class="entity_def" id="VDMToolkit.munion_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.munion|const"><span>munion</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áÄ</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áÄ</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áÄ</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>infixl</span></span></span><span> </span><span class="quoted"><span>"</span><span class="keyword1"><span>‚à™m</span></span><span>"</span></span><span> 90</span><span class="main"><span>)</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span class="main"><span class="main"><span class="main"><span>!</span></span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="keyword1"><span class="free"><span>‚à™m</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>if</span></span><span> </span><span>dom</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="main"><span>‚à©</span></span><span> </span><span>dom</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger|const"><span>‚Ä†</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span>undefined</span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.dom_restr_def|fact"><span class="entity_def" id="VDMToolkit.dom_restr_def|thm"><span class="entity_def" id="VDMToolkit.dom_restr_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> 
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.dom_restr|const"><span>dom_restr</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span>set</span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áÄ</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áÄ</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>infixr</span></span></span><span> </span><span class="quoted"><span>"</span><span class="keyword1"><span>‚óÉ</span></span><span>"</span></span><span> 110</span><span class="main"><span>)</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span class="main"><span class="main"><span class="main"><span>!</span></span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span class="free"><span>‚óÉ</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span> </span><span class="main"><span>|`</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span>"</span></span></span><span>
   </span><span class="comment1"><span>(</span><span>*</span><span> same as VDM  s &lt;: m </span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.dom_antirestr_def|fact"><span class="entity_def" id="VDMToolkit.dom_antirestr_def|thm"><span class="entity_def" id="VDMToolkit.dom_antirestr_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.dom_antirestr|const"><span>dom_antirestr</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span>set</span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áÄ</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áÄ</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>infixr</span></span></span><span> </span><span class="quoted"><span>"</span><span class="keyword1"><span>-‚óÉ</span></span><span>"</span></span><span> 110</span><span class="main"><span>)</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span class="main"><span class="main"><span class="main"><span>!</span></span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span class="free"><span>-‚óÉ</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Œª</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>if</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>:</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span>None</span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
   </span><span class="comment1"><span>(</span><span>*</span><span> same as VDM   s &lt;-: m </span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.rng_restr_def|fact"><span class="entity_def" id="VDMToolkit.rng_restr_def|thm"><span class="entity_def" id="VDMToolkit.rng_restr_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.rng_restr|const"><span>rng_restr</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áÄ</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span>set</span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áÄ</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>infixl</span></span></span><span> </span><span class="quoted"><span>"</span><span class="keyword1"><span>‚ñπ</span></span><span>"</span></span><span> 105</span><span class="main"><span>)</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span class="main"><span class="main"><span class="main"><span>!</span></span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span> </span><span class="main"><span class="free"><span>‚ñπ</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Œª</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>if</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>‚àÉ</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>Some</span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><span>‚àß</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span>None</span><span class="main"><span>)</span></span><span>"</span></span></span><span>
   </span><span class="comment1"><span>(</span><span>*</span><span> same as VDM   m :&gt; s </span><span>*</span><span>)</span></span><span>
 
</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.rng_antirestr_def|fact"><span class="entity_def" id="VDMToolkit.rng_antirestr_def|thm"><span class="entity_def" id="VDMToolkit.rng_antirestr_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.rng_antirestr|const"><span>rng_antirestr</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áÄ</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span>set</span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áÄ</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>infixl</span></span></span><span> </span><span class="quoted"><span>"</span><span class="keyword1"><span>‚ñπ-</span></span><span>"</span></span><span> 105</span><span class="main"><span>)</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span class="main"><span class="main"><span class="main"><span>!</span></span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span> </span><span class="main"><span class="free"><span>‚ñπ-</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Œª</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>if</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>‚àÉ</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>Some</span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><span>‚àß</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span>None</span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
   </span><span class="comment1"><span>(</span><span>*</span><span> same as VDM   m :-&gt; s </span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.vdm_merge_def|fact"><span class="entity_def" id="VDMToolkit.vdm_merge_def|thm"><span class="entity_def" id="VDMToolkit.vdm_merge_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.vdm_merge|const"><span>vdm_merge</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áÄ</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSet|type"><span>VDMSet</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áÄ</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>vdm_merge</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>mm</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span>undefined</span><span>"</span></span></span><span> </span><span class="comment1"><span>(</span><span>*</span><span>TODO: (Œª x . x ‚àà ‚ãÉ { dom mmi | mmi ‚àà mm )} )"</span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.vdm_inverse_def|fact"><span class="entity_def" id="VDMToolkit.vdm_inverse_def|thm"><span class="entity_def" id="VDMToolkit.vdm_inverse_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.vdm_inverse|const"><span>vdm_inverse</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áÄ</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>‚áÄ</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>vdm_inverse</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span>undefined</span><span>"</span></span></span><span> </span><span class="comment1"><span>(</span><span>*</span><span>(Œª x . if (x ‚àà rng m) then (m x) else None)"</span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.map_subset_def|fact"><span class="entity_def" id="VDMToolkit.map_subset_def|thm"><span class="entity_def" id="VDMToolkit.map_subset_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.map_subset|const"><span>map_subset</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áÄ</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áÄ</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span>"</span></span></span><span>  </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword3"><span>(</span></span><span class="keyword3"><span>(</span></span><span>_</span><span class="keyword3"><span>)</span></span><span class="keyword3"><span>/ </span></span><span class="keyword1"><span>‚äÜ<span class="hidden">‚á©</span><sub>s</sub></span></span><span> </span><span class="keyword3"><span>(</span></span><span>_</span><span class="keyword3"><span>)</span></span><span class="keyword3"><span>/</span></span><span class="keyword1"><span>,</span></span><span> </span><span class="keyword3"><span>(</span></span><span>_</span><span class="keyword3"><span>)</span></span><span class="keyword3"><span>)</span></span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>,</span></span><span> 0</span><span class="main"><span>,</span></span><span> 50</span><span class="main"><span>]</span></span><span> 50</span><span class="main"><span>)</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>m<span class="hidden">‚á©</span><sub>1</sub></span></span></span></span><span> </span><span class="keyword1"><span class="free"><span>‚äÜ<span class="hidden">‚á©</span><sub>s</sub></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m<span class="hidden">‚á©</span><sub>2</sub></span></span></span></span><span class="main"><span class="free"><span>,</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>subset_of</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚ü∑</span></span><span> </span><span class="main"><span>(</span></span><span>dom</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m<span class="hidden">‚á©</span><sub>1</sub></span></span></span></span><span> </span><span class="main"><span>‚äÜ</span></span><span> </span><span>dom</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m<span class="hidden">‚á©</span><sub>2</sub></span></span></span></span><span> </span><span class="main"><span>‚àß</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>‚àÄ</span></span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span>dom</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m<span class="hidden">‚á©</span><sub>1</sub></span></span></span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>subset_of</span></span></span></span><span> </span><span class="main"><span>(</span></span><span>the</span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>m<span class="hidden">‚á©</span><sub>1</sub></span></span></span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>the</span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>m<span class="hidden">‚á©</span><sub>2</sub></span></span></span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span> </span><span>Map application is just function application, but the result is an optional type, 
</span><span>  so it is up to the user to unpick the optional type with the </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>the</span></span><span class="antiquote"><span>}</span></span></span><span> operator. 
</span><span>  It means we shouldn't get to undefined,
</span><span>        rather than we are handling undefinedness. That's because the value
</span><span>        is comparable (see next lemma). In effect, if we ever reach undefined
</span><span>        it means we have some partial function application outside its domain
</span><span>        somewhere within any rewriting chain. As one cannot reason about this
</span><span>        value, it can be seen as a flag for an error to be avoided.</span><span>‚Ä∫</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.map_comp_def|fact"><span class="entity_def" id="VDMToolkit.map_comp_def|thm"><span class="entity_def" id="VDMToolkit.map_comp_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.map_comp|const"><span>map_comp</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>‚áÄ</span></span><span> </span><span class="tfree"><span>'c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áÄ</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áÄ</span></span><span> </span><span class="tfree"><span>'c</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>infixl</span></span></span><span> </span><span class="quoted"><span>"</span><span class="keyword1"><span>‚àòm</span></span><span>"</span></span><span> 55</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="keyword1"><span class="free"><span>‚àòm</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Œª</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>if</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span>dom</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="main"><span>(</span></span><span>the</span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span>None</span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.map_compatible_def|fact"><span class="entity_def" id="VDMToolkit.map_compatible_def|thm"><span class="entity_def" id="VDMToolkit.map_compatible_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> 
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.map_compatible|const"><span>map_compatible</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áÄ</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áÄ</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>map_compatible</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m1</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m2</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>‚àÄ</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span>dom</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m1</span></span></span></span><span> </span><span class="main"><span>‚à©</span></span><span> </span><span>dom</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m2</span></span></span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m1</span></span></span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m2</span></span></span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span>***************************************************************</span><span>*</span><span>)</span></span><span>      
</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span>Map comprehension</span><span>‚Ä∫</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span>Isabelle maps are similar to VDMs, but with some significant differences worth observing. 
</span><span> 
</span><span>      If the filtering is not unique (i.e. result is not a function), then the </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><span class="keyword1"><span>THE</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>x</span></span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span> expression
</span><span>      might lead to (undefined) unexpected results. In Isabelle maps, repetitions is equivalent to overriding,
</span><span>      so that </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>lemma</span></span><span> </span><span class="quoted"><span>"</span><span class="main"><span>[</span></span><span class="main"><span>1</span></span><span class="main"><span>::</span></span><span>nat</span><span> </span><span class="main"><span>‚Ü¶</span></span><span> </span><span class="numeral"><span>2</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>‚Ü¶</span></span><span> </span><span class="numeral"><span>3</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>Some</span><span> </span><span class="numeral"><span>3</span></span><span>"</span></span><span> </span><span class="quasi_keyword"><span>by</span></span><span> </span><span class="operator"><span>simp</span></span><span class="antiquote"><span>}</span></span></span><span>. 
</span><span>
</span><span>      In various VDMToolkit definitions, we default to </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>undefined</span></span><span class="antiquote"><span>}</span></span></span><span> in case where the situation is out of hand,
</span><span>      hence, proofs will fail, and users will know that </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>undefined</span></span><span class="antiquote"><span>}</span></span></span><span> being reached means some earlier problem has
</span><span>      occurred.</span><span>  
    </span><span>‚Ä∫</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span>Type bound map comprehension cannot filter for type invariants, hence won't have </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>undefined</span></span><span class="antiquote"><span>}</span></span></span><span> results.
</span><span>      This corresponds to the VDMSL expression
</span><span>      %
</span><span>      \begin{verbatim}
</span><span>        { domexpr(d) |-&gt; rngexpr(d, r) | d:S, r: T &amp; P(d, r) }
</span><span>      \end{verbatim}
</span><span>      % 
</span><span>      where the maplet expression can be just variables or functions over the domain/range input(s). 
</span><span>
</span><span>      VDM also issues a proof obligation for type bound maps (i.e. avoid it please!) to ensure the resulting map is finite.
</span><span>      Concretely, the example below generates the corresponding proof obligation:
</span><span>      %
</span><span>      \begin{verbatim}
</span><span>      	ex: () -&gt; map nat to nat
</span><span>	      ex() == { x+y |-&gt; 10 | x: nat, y in set {4,5,6} \&amp; x &lt; 10 };
</span><span>
</span><span>        exists finmap1: map nat to (map (nat1) to (nat1)) &amp; 
</span><span>            forall x:nat, y in set {4, 5, 6} &amp; (x &lt; 10) =&gt; 
</span><span>              exists findex2 in set dom finmap1 &amp; 
</span><span>                finmap1(findex2) = {(x + y) |-&gt; 10}
</span><span>      \end{verbatim}</span><span>
     </span><span>‚Ä∫</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.mapCompTypeBound_def|fact"><span class="entity_def" id="VDMToolkit.mapCompTypeBound_def|thm"><span class="entity_def" id="VDMToolkit.mapCompTypeBound_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> 
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.mapCompTypeBound|const"><span>mapCompTypeBound</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áÄ</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>mapCompTypeBound</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>inv_S</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>inv_T</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>domexpr</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>rngexpr</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>pred</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> 
        </span><span class="main"><span>(</span></span><span class="main"><span>Œª</span></span><span> </span><span class="bound"><span>dummy</span></span><span class="main"><span>::</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>.</span></span><span> 
            </span><span class="keyword1"><span>if</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>‚àÉ</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>inv_S</span></span></span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><span>‚àß</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>inv_T</span></span></span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="main"><span>‚àß</span></span><span> </span><span class="bound"><span>dummy</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>domexpr</span></span></span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="main"><span>‚àß</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>rngexpr</span></span></span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="main"><span>‚àß</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>pred</span></span></span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="bound"><span>r</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>then</span></span><span>
                </span><span>Some</span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>THE</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>inv_T</span></span></span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="main"><span>‚àß</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>‚àÉ</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>dummy</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>domexpr</span></span></span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="main"><span>‚àß</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>rngexpr</span></span></span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="main"><span>‚àß</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>pred</span></span></span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="bound"><span>r</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> 
              </span><span class="keyword1"><span>else</span></span><span> 
                </span><span>None</span><span>
        </span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>[</span></span><span class="main"><span>1</span></span><span class="main"><span>::</span></span><span>nat</span><span> </span><span class="main"><span>‚Ü¶</span></span><span> </span><span class="numeral"><span>2</span></span><span class="main"><span>::</span></span><span>nat</span><span class="main"><span>,</span></span><span> </span><span class="numeral"><span>3</span></span><span> </span><span class="main"><span>‚Ü¶</span></span><span> </span><span class="numeral"><span>3</span></span><span class="main"><span>]</span></span><span> </span><span class="numeral"><span>10</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span>Set bound map comprehension can filter bound set for their elements invariants.
</span><span>      This corresponds to the VDMSL expression
</span><span>      %
</span><span>      \begin{verbatim}
</span><span>        { domexpr(d, r) |-&gt; rngexpr(d, r) | d in set S, r in set T &amp; pred(d, r) } 
</span><span>        { domexpr(d, r) | d in set S , r in set T &amp; pred(d, r) }  
</span><span>        { rngexpr(d, r) | d in set S , r in set T &amp; pred(d, r) } 
</span><span>        domexpr: S * T -&gt; S 
</span><span>        rngexpr: S * T -&gt; T 
</span><span>        pred   : S * T -&gt; bool 
</span><span>      \end{verbatim}
</span><span>      % 
</span><span>      If the types of \verb'domexpr' or \verb'rngexpr' are different from \verb'S' or \verb'T' then this will not work! 
</span><span>      If the filtering is not unique (i.e. result is not a function), then the </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><span class="keyword1"><span>THE</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>x</span></span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span> expression
</span><span>      might lead to (undefined) unexpected results. In Isabelle maps, repetitions is equivalent to overriding,
</span><span>      so that </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>lemma</span></span><span> </span><span class="quoted"><span>"</span><span class="main"><span>[</span></span><span class="main"><span>1</span></span><span class="main"><span>::</span></span><span>nat</span><span> </span><span class="main"><span>‚Ü¶</span></span><span> </span><span class="numeral"><span>2</span></span><span class="main"><span>::</span></span><span>nat</span><span class="main"><span>,</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>‚Ü¶</span></span><span> </span><span class="numeral"><span>3</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>Some</span><span> </span><span class="numeral"><span>3</span></span><span>"</span></span><span> </span><span class="quasi_keyword"><span>by</span></span><span> </span><span class="operator"><span>simp</span></span><span class="antiquote"><span>}</span></span></span><span>.</span><span> 
     </span><span>‚Ä∫</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.mapCompSetBound_def|fact"><span class="entity_def" id="VDMToolkit.mapCompSetBound_def|thm"><span class="entity_def" id="VDMToolkit.mapCompSetBound_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> 
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.mapCompSetBound|const"><span>mapCompSetBound</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span>set</span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span>set</span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áÄ</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>mapCompSetBound</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>S</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>T</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>inv_S</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>inv_T</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>domexpr</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>rngexpr</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>pred</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> 
        </span><span class="main"><span>(</span></span><span class="main"><span>Œª</span></span><span> </span><span class="bound"><span>dummy</span></span><span class="main"><span>::</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>.</span></span><span> 
            </span><span class="comment1"><span>‚Äï ‚Äπ</span><span>In fact you have to check the </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">term</span><span class="hidden">&gt;</span></span></span><span class="quoted"><span>‚Äπ</span><span class="free"><span>inv_Type</span></span><span>‚Ä∫</span></span></span><span> of domexpr and rngexpr!!!</span><span>‚Ä∫</span></span><span>
            </span><span class="keyword1"><span>if</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMSet&apos;|const"><span>inv_VDMSet'</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>inv_S</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>S</span></span></span></span><span> </span><span class="main"><span>‚àß</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMSet&apos;|const"><span>inv_VDMSet'</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>inv_T</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>T</span></span></span></span><span> </span><span class="keyword1"><span>then</span></span><span>
              </span><span class="keyword1"><span>if</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>‚àÉ</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>T</span></span></span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>‚àÉ</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>S</span></span></span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>dummy</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>domexpr</span></span></span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="main"><span>‚àß</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>rngexpr</span></span></span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="main"><span>‚àß</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>pred</span></span></span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="bound"><span>r</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>then</span></span><span>
                </span><span>Some</span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>THE</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>T</span></span></span></span><span> </span><span class="main"><span>‚àß</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>inv_T</span></span></span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="main"><span>‚àß</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>‚àÉ</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>S</span></span></span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>dummy</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>domexpr</span></span></span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="main"><span>‚àß</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>rngexpr</span></span></span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="main"><span>‚àß</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>pred</span></span></span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="bound"><span>r</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> 
              </span><span class="keyword1"><span>else</span></span><span> 
                </span><span class="comment1"><span>‚Äï ‚Äπ</span><span>This is for map application outside its domain error, VDMJ 4061</span><span> ‚Ä∫</span></span><span>
                </span><span>None</span><span>
            </span><span class="keyword1"><span>else</span></span><span>
              </span><span class="comment1"><span>‚Äï ‚Äπ</span><span>This is for type invariant violation errors, VDMJ ????</span><span>‚Ä∫</span></span><span>
              </span><span>undefined</span><span>
        </span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span>Identity functions to be used for the dom/rng expression functions for the case they are variables.</span><span>‚Ä∫</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.domid_def|fact"><span class="entity_def" id="VDMToolkit.domid_def|thm"><span class="entity_def" id="VDMToolkit.domid_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> 
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.domid|const"><span>domid</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'a</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>domid</span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Œª</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Œª</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.rngid_def|fact"><span class="entity_def" id="VDMToolkit.rngid_def|thm"><span class="entity_def" id="VDMToolkit.rngid_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.rngid|const"><span>rngid</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>rngid</span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Œª</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span>id</span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span>Constant function to be used for the dom expression function for the case they are constants.</span><span>‚Ä∫</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.domcnst_def|fact"><span class="entity_def" id="VDMToolkit.domcnst_def|thm"><span class="entity_def" id="VDMToolkit.domcnst_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.domcnst|const"><span>domcnst</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'a</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>domcnst</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Œª</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Œª</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span>Constant function to be used for the rng expression function for the case they are constants.</span><span>‚Ä∫</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.rngcnst_def|fact"><span class="entity_def" id="VDMToolkit.rngcnst_def|thm"><span class="entity_def" id="VDMToolkit.rngcnst_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.rngcnst|const"><span>rngcnst</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>rngcnst</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Œª</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Œª</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.truecnst_def|fact"><span class="entity_def" id="VDMToolkit.truecnst_def|thm"><span class="entity_def" id="VDMToolkit.truecnst_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.truecnst|const"><span>truecnst</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>truecnst</span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Œª</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_True|const"><span>inv_True</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.predcnst_def|fact"><span class="entity_def" id="VDMToolkit.predcnst_def|thm"><span class="entity_def" id="VDMToolkit.predcnst_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.predcnst|const"><span>predcnst</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>ùîπ</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>predcnst</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Œª</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Œª</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.domidI|fact"><span class="entity_def" id="VDMToolkit.domidI|thm"><span>domidI</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.domid|const"><span>domid</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>d</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.domid_def|fact"><span>domid_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.rngidI|fact"><span class="entity_def" id="VDMToolkit.rngidI|thm"><span>rngidI</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.rngid|const"><span>rngid</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>r</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.rngid_def|fact"><span>rngid_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.domcnstI|fact"><span class="entity_def" id="VDMToolkit.domcnstI|thm"><span>domcnstI</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.domcnst|const"><span>domcnst</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.domcnst_def|fact"><span>domcnst_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.rngcnstI|fact"><span class="entity_def" id="VDMToolkit.rngcnstI|thm"><span>rngcnstI</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.rngcnst|const"><span>rngcnst</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.rngcnst_def|fact"><span>rngcnst_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.predcnstI|fact"><span class="entity_def" id="VDMToolkit.predcnstI|thm"><span>predcnstI</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.predcnst|const"><span>predcnst</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.predcnst_def|fact"><span>predcnst_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.truecnstI|fact"><span class="entity_def" id="VDMToolkit.truecnstI|thm"><span>truecnstI</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>r</span></span><span> </span><span class="main"><span>‚â†</span></span><span> </span><span>undefined</span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.truecnst|const"><span>truecnst</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>r</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.truecnst_def|fact"><span>truecnst_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.maplet_defs|fact"><span class="entity_def" id="VDMToolkit.maplet_defs(6)|thm"><span class="entity_def" id="VDMToolkit.maplet_defs(5)|thm"><span class="entity_def" id="VDMToolkit.maplet_defs(4)|thm"><span class="entity_def" id="VDMToolkit.maplet_defs(3)|thm"><span class="entity_def" id="VDMToolkit.maplet_defs(2)|thm"><span class="entity_def" id="VDMToolkit.maplet_defs(1)|thm"><span>maplet_defs</span></span></span></span></span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.domid_def|fact"><span>domid_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.rngid_def|fact"><span>rngid_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.rngcnst_def|fact"><span>rngcnst_def</span></a><span> </span><span>id_def</span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.truecnst_def|fact"><span>truecnst_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_True_def|fact"><span>inv_True_def</span></a><span>
</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.mapCompSetBound_defs|fact"><span class="entity_def" id="VDMToolkit.mapCompSetBound_defs(11)|thm"><span class="entity_def" id="VDMToolkit.mapCompSetBound_defs(10)|thm"><span class="entity_def" id="VDMToolkit.mapCompSetBound_defs(9)|thm"><span class="entity_def" id="VDMToolkit.mapCompSetBound_defs(8)|thm"><span class="entity_def" id="VDMToolkit.mapCompSetBound_defs(7)|thm"><span class="entity_def" id="VDMToolkit.mapCompSetBound_defs(6)|thm"><span class="entity_def" id="VDMToolkit.mapCompSetBound_defs(5)|thm"><span class="entity_def" id="VDMToolkit.mapCompSetBound_defs(4)|thm"><span class="entity_def" id="VDMToolkit.mapCompSetBound_defs(3)|thm"><span class="entity_def" id="VDMToolkit.mapCompSetBound_defs(2)|thm"><span class="entity_def" id="VDMToolkit.mapCompSetBound_defs(1)|thm"><span>mapCompSetBound_defs</span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.mapCompSetBound_def|fact"><span>mapCompSetBound_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMSet&apos;_def|fact"><span>inv_VDMSet'_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMSet_def|fact"><span>inv_VDMSet_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.maplet_defs|fact"><span>maplet_defs</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.rng_defs|fact"><span>rng_defs</span></a><span>
</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.mapCompTypeBound_defs|fact"><span class="entity_def" id="VDMToolkit.mapCompTypeBound_defs(9)|thm"><span class="entity_def" id="VDMToolkit.mapCompTypeBound_defs(8)|thm"><span class="entity_def" id="VDMToolkit.mapCompTypeBound_defs(7)|thm"><span class="entity_def" id="VDMToolkit.mapCompTypeBound_defs(6)|thm"><span class="entity_def" id="VDMToolkit.mapCompTypeBound_defs(5)|thm"><span class="entity_def" id="VDMToolkit.mapCompTypeBound_defs(4)|thm"><span class="entity_def" id="VDMToolkit.mapCompTypeBound_defs(3)|thm"><span class="entity_def" id="VDMToolkit.mapCompTypeBound_defs(2)|thm"><span class="entity_def" id="VDMToolkit.mapCompTypeBound_defs(1)|thm"><span>mapCompTypeBound_defs</span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.mapCompTypeBound_def|fact"><span>mapCompTypeBound_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.maplet_defs|fact"><span>maplet_defs</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.rng_defs|fact"><span>rng_defs</span></a><span>

</span><span class="comment1"><span>(</span><span>*</span><span>========================================================================</span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span> </span><span>Lambda types</span><span> </span><span>‚Ä∫</span></span></span><span>
</span><span class="comment1"><span>(</span><span>*</span><span>========================================================================</span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span>Lambda definitions entail an implicit satisfiability proof obligation check
</span><span>      as part of its type invariant checks. 
</span><span>
</span><span>      Because Isabelle lambdas are always curried, we need to also take this into
</span><span>      account. For example, \verb'lambda x: nat, y: nat1 &amp; x+y' will effectively become
</span><span>      </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Œª</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>Œª</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span>. Thus callers to this invariant check must 
</span><span>      account for such currying when using more than one parameter in lambdas. 
</span><span>      (i.e. call this as </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><span class="free"><span>inv_Lambda</span></span><span> </span><span class="free"><span>inv_Dom</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>inv_Lambda</span></span><span> </span><span class="free"><span>inv_Dom'</span></span><span> </span><span class="free"><span>inv_Ran</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>l</span></span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span> 
</span><span>       assuming the right invariant checks for the type of x and y and the result 
</span><span>       are used.</span><span>
     </span><span>‚Ä∫</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.inv_Lambda_def|fact"><span class="entity_def" id="VDMToolkit.inv_Lambda_def|thm"><span class="entity_def" id="VDMToolkit.inv_Lambda_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> 
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.inv_Lambda|const"><span>inv_Lambda</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>inv_Lambda</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>inv_Dom</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>inv_Ran</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>‚àÄ</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>inv_Dom</span></span></span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><span>‚ü∂</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>inv_Ran</span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="bound"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.inv_Lambda&apos;_def|fact"><span class="entity_def" id="VDMToolkit.inv_Lambda&apos;_def|thm"><span class="entity_def" id="VDMToolkit.inv_Lambda&apos;_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> 
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.inv_Lambda&apos;|const"><span>inv_Lambda'</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'a</span></span><span>  </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>inv_Lambda'</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>inv_Dom</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>inv_Ran</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>inv_Dom</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="main"><span>‚ü∂</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>inv_Ran</span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span>========================================================================</span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span> </span><span>Is test and type coercions</span><span> </span><span>‚Ä∫</span></span></span><span>
</span><span class="comment1"><span>(</span><span>*</span><span>========================================================================</span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span> </span><span>Basic type coercions</span><span> </span><span>‚Ä∫</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.is_VDMRealWhole_def|fact"><span class="entity_def" id="VDMToolkit.is_VDMRealWhole_def|thm"><span class="entity_def" id="VDMToolkit.is_VDMRealWhole_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.is_VDMRealWhole|const"><span>is_VDMRealWhole</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMReal|type"><span>VDMReal</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
 </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>is_VDMRealWhole</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span> </span><span class="main"><span>‚â•</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>‚àß</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span> </span><span class="main"><span>-</span></span><span> </span><span>real_of_int</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_narrow_real|const"><span>vdm_narrow_real</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.vdmint_of_real_def|fact"><span class="entity_def" id="VDMToolkit.vdmint_of_real_def|thm"><span class="entity_def" id="VDMToolkit.vdmint_of_real_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.vdmint_of_real|const"><span>vdmint_of_real</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMReal|type"><span>VDMReal</span></a><span> </span><span class="main"><span>‚áÄ</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMInt|type"><span>VDMInt</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
 </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>vdmint_of_real</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span class="keyword1"><span>if</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.is_VDMRealWhole|const"><span>is_VDMRealWhole</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span>Some</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_narrow_real|const"><span>vdm_narrow_real</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span>None</span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.is_VDMRatWhole_def|fact"><span class="entity_def" id="VDMToolkit.is_VDMRatWhole_def|thm"><span class="entity_def" id="VDMToolkit.is_VDMRatWhole_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.is_VDMRatWhole|const"><span>is_VDMRatWhole</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMRat|type"><span>VDMRat</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
 </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>is_VDMRatWhole</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span> </span><span class="main"><span>‚â•</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>‚àß</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span> </span><span class="main"><span>-</span></span><span> </span><span>rat_of_int</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_narrow_real|const"><span>vdm_narrow_real</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.vdmint_of_rat_def|fact"><span class="entity_def" id="VDMToolkit.vdmint_of_rat_def|thm"><span class="entity_def" id="VDMToolkit.vdmint_of_rat_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.vdmint_of_rat|const"><span>vdmint_of_rat</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMRat|type"><span>VDMRat</span></a><span> </span><span class="main"><span>‚áÄ</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMInt|type"><span>VDMInt</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
 </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>vdmint_of_rat</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span class="keyword1"><span>if</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.is_VDMRatWhole|const"><span>is_VDMRatWhole</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span>Some</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_narrow_real|const"><span>vdm_narrow_real</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span>None</span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span> </span><span>Structured type coercions</span><span> </span><span>‚Ä∫</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>type_synonym</span></span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>,</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><span class="entity_def" id="VDMToolkit.VDMTypeCoercion|type"><span>VDMTypeCoercion</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áÄ</span></span><span> </span><span class="tfree"><span>'b</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span>A total VDM type coercion is one where every element in the type space of
</span><span>      interest is convertible under the given type coercion 
</span><span>      (e.g., set of real = {1,2,3} into set of nat is total; whereas 
</span><span>             set of real = {0.5,2,3} into set of nat is not total given 0.5 is not nat).</span><span>  
     </span><span>‚Ä∫</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.total_coercion_def|fact"><span class="entity_def" id="VDMToolkit.total_coercion_def|thm"><span class="entity_def" id="VDMToolkit.total_coercion_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> 
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.total_coercion|const"><span>total_coercion</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSet|type"><span>VDMSet</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>,</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMTypeCoercion|type"><span>VDMTypeCoercion</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>total_coercion</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>space</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>conv</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>‚àÄ</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>space</span></span></span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>conv</span></span></span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>‚â†</span></span><span> </span><span>None</span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span>To convert a VDM set s of type 'a into type 'b (e.g., set of real into set of nat),
</span><span>      it must be possible to convert every element of s under given type coercion</span><span>
     </span><span>‚Ä∫</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.vdmset_of_t_def|fact"><span class="entity_def" id="VDMToolkit.vdmset_of_t_def|thm"><span class="entity_def" id="VDMToolkit.vdmset_of_t_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> 
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.vdmset_of_t|const"><span>vdmset_of_t</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>,</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMTypeCoercion|type"><span>VDMTypeCoercion</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSet|type"><span>VDMSet</span></a><span class="main"><span>,</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSet|type"><span>VDMSet</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMTypeCoercion|type"><span>VDMTypeCoercion</span></a><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>vdmset_of_t</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>conv</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> 
      </span><span class="main"><span>(</span></span><span class="main"><span>Œª</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>if</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.total_coercion|const"><span>total_coercion</span></a><span> </span><span class="bound"><span>x</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>conv</span></span></span></span><span> </span><span class="keyword1"><span>then</span></span><span>
                </span><span>Some</span><span> </span><span class="main"><span>{</span></span><span> </span><span>the</span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>conv</span></span></span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>|</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>‚àß</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>conv</span></span></span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>‚â†</span></span><span> </span><span>None</span><span> </span><span class="main"><span>}</span></span><span>
             </span><span class="keyword1"><span>else</span></span><span>
                </span><span>None</span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span>To convert a VDM seq s of type 'a into type 'b (e.g., seq of real into seq of nat),
</span><span>      it must be possible to convert every element of s under given type coercion</span><span>
     </span><span>‚Ä∫</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.vdmseq_of_t_def|fact"><span class="entity_def" id="VDMToolkit.vdmseq_of_t_def|thm"><span class="entity_def" id="VDMToolkit.vdmseq_of_t_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> 
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.vdmseq_of_t|const"><span>vdmseq_of_t</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>,</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMTypeCoercion|type"><span>VDMTypeCoercion</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSeq|type"><span>VDMSeq</span></a><span class="main"><span>,</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSeq|type"><span>VDMSeq</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMTypeCoercion|type"><span>VDMTypeCoercion</span></a><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>vdmseq_of_t</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>conv</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> 
      </span><span class="main"><span>(</span></span><span class="main"><span>Œª</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>if</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.total_coercion|const"><span>total_coercion</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.elems|const"><span>elems</span></a><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>conv</span></span></span></span><span> </span><span class="keyword1"><span>then</span></span><span>
                </span><span>Some</span><span> </span><span class="main"><span>[</span></span><span> </span><span>the</span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>conv</span></span></span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>.</span></span><span> i </span><span class="main"><span>‚Üê</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>conv</span></span></span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>‚â†</span></span><span> </span><span>None</span><span> </span><span class="main"><span>]</span></span><span>
             </span><span class="keyword1"><span>else</span></span><span>
                </span><span>None</span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> map coercion will be tricky because result d2 depends on dconv call, which needs x's d1!
definition 
  vdmmap_of_dr :: "('d1, 'd2) VDMTypeCoercion ‚áí ('r1, 'r2) VDMTypeCoercion ‚áí ('d1 ‚áÄ 'r1, 'd2 ‚áÄ 'r2) VDMTypeCoercion" 
  where
  "vdmmap_of_dr dconv rconv ‚â° 
      ‚Äï ‚Äπx is a 'd1 ‚áÄ 'r1, d is a 'd2 ‚áí 'r2; where dconv/rconv is applied throughout and succeeded‚Ä∫
      (Œª x . if total_coercion (dom x) dconv ‚àß total_coercion (rng x) rconv then 
                Some (Œª d . if (‚àÉ xd . d = dconv xd) then None else None)
             else
                None)"
</span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span> </span><span>Is tests</span><span> </span><span>‚Ä∫</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span>"Successful" is expr test is simply a call to the test expression invariant</span><span>‚Ä∫</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.isTest_def|fact"><span class="entity_def" id="VDMToolkit.isTest_def|thm"><span class="entity_def" id="VDMToolkit.isTest_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> 
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.isTest|const"><span>isTest</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span class="main"><span class="main"><span class="main"><span>!</span></span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>isTest</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>inv_X</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>inv_X</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_isTestI|fact"><span class="entity_def" id="VDMToolkit.l_isTestI|thm"><span>l_isTestI</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.isTest|const"><span>isTest</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>inv_X</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>inv_X</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.isTest_def|fact"><span>isTest_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span>Possibly failing is expr tests up to given type coercion</span><span> </span><span>‚Ä∫</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.isTest&apos;_def|fact"><span class="entity_def" id="VDMToolkit.isTest&apos;_def|thm"><span class="entity_def" id="VDMToolkit.isTest&apos;_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> 
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.isTest&apos;|const"><span>isTest'</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>,</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMTypeCoercion|type"><span>VDMTypeCoercion</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span class="main"><span class="main"><span class="main"><span>!</span></span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>isTest'</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>conv</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>inv_X</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> 
    </span><span class="main"><span>(</span></span><span class="keyword1"><span>case</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>conv</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="keyword1"><span>of</span></span><span>
        None </span><span class="main"><span>‚áí</span></span><span> </span><span>False</span><span> 
      </span><span class="main"><span>|</span></span><span> Some </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>inv_X</span></span></span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span>========================================================================</span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span> </span><span>Well founded relation useful for sets in recursive functions</span><span> </span><span>‚Ä∫</span></span></span><span>
</span><span class="comment1"><span>(</span><span>*</span><span>========================================================================</span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.gen_set_term_def|fact"><span class="entity_def" id="VDMToolkit.gen_set_term_def|thm"><span class="entity_def" id="VDMToolkit.gen_set_term_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.gen_set_term|const"><span>gen_set_term</span></span></span><span> </span><span class="main"><span>::</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSet|type"><span>VDMSet</span></a><span> </span><span class="main"><span>√ó</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSet|type"><span>VDMSet</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSet|type"><span>VDMSet</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSet|type"><span>VDMSet</span></a><span> </span><span class="main"><span>√ó</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSet|type"><span>VDMSet</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSet|type"><span>VDMSet</span></a><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>gen_set_term</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>rel</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span>finite_psubset</span><span> </span><span class="main"><span>‚à©</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>rel</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.gen_VDMInt_term_def|fact"><span class="entity_def" id="VDMToolkit.gen_VDMInt_term_def|thm"><span class="entity_def" id="VDMToolkit.gen_VDMInt_term_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.gen_VDMInt_term|const"><span>gen_VDMInt_term</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>‚Äπ</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMInt|type"><span>VDMInt</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMInt|type"><span>VDMInt</span></a><span> </span><span class="main"><span>√ó</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMInt|type"><span>VDMInt</span></a><span class="main"><span>)</span></span><span> </span><span>set</span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMInt|type"><span>VDMInt</span></a><span> </span><span class="main"><span>√ó</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMInt|type"><span>VDMInt</span></a><span class="main"><span>)</span></span><span> </span><span>set</span><span>‚Ä∫</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>‚Äπ</span><span class="free"><span>gen_VDMInt_term</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>rel</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span class="main"><span>(</span></span><span>int_ge_less_than</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚à©</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>rel</span></span></span></span><span>‚Ä∫</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.gen_VDMNat_term_def|fact"><span class="entity_def" id="VDMToolkit.gen_VDMNat_term_def|thm"><span class="entity_def" id="VDMToolkit.gen_VDMNat_term_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.gen_VDMNat_term|const"><span>gen_VDMNat_term</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>‚Äπ</span><span class="main"><span>(</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMNat|type"><span>VDMNat</span></a><span> </span><span class="main"><span>√ó</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMNat|type"><span>VDMNat</span></a><span class="main"><span>)</span></span><span> </span><span>set</span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMNat|type"><span>VDMNat</span></a><span> </span><span class="main"><span>√ó</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMNat|type"><span>VDMNat</span></a><span class="main"><span>)</span></span><span> </span><span>set</span><span>‚Ä∫</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>‚Äπ</span><span class="free"><span>gen_VDMNat_term</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>rel</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.gen_VDMInt_term|const"><span>gen_VDMInt_term</span></a><span> </span><span class="main"><span>0</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>rel</span></span></span></span><span>‚Ä∫</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_gen_set_term_wf|fact"><span class="entity_def" id="VDMToolkit.l_gen_set_term_wf|thm"><span>l_gen_set_term_wf</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>wf</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.gen_set_term|const"><span>gen_set_term</span></a><span> </span><span class="free"><span>rel</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>wf_Int1</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_gen_VDMInt_term_wf|fact"><span class="entity_def" id="VDMToolkit.l_gen_VDMInt_term_wf|thm"><span>l_gen_VDMInt_term_wf</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>wf</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.gen_VDMInt_term|const"><span>gen_VDMInt_term</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>rel</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>wf_Int1</span><span> </span><span>wf_int_ge_less_than</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_gen_VDMNat_term_wf|fact"><span class="entity_def" id="VDMToolkit.l_gen_VDMNat_term_wf|thm"><span>l_gen_VDMNat_term_wf</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>wf</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.gen_VDMNat_term|const"><span>gen_VDMNat_term</span></a><span> </span><span class="free"><span>rel</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>wf_Int1</span><span> </span><span>wf_int_ge_less_than</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span>Cast the well founded infrastructure from </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>typ</span></span><span> </span><span class="quoted"><span class="main"><span>‚Ñï</span></span></span><span class="antiquote"><span>}</span></span></span><span> to </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>typ</span></span><span> </span><span class="quoted"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMNat|type"><span>VDMNat</span></a></span><span class="antiquote"><span>}</span></span></span><span>.</span><span>‚Ä∫</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.pred_VDMNat_def|fact"><span class="entity_def" id="VDMToolkit.pred_VDMNat_def|thm"><span class="entity_def" id="VDMToolkit.pred_VDMNat_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="VDMToolkit.pred_VDMNat|const"><span>pred_VDMNat</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMNat|type"><span>VDMNat</span></a><span> </span><span class="main"><span>√ó</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMNat|type"><span>VDMNat</span></a><span class="main"><span>)</span></span><span> </span><span>set</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>pred_VDMNat</span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="bound"><span>z</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>z</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>|</span></span><span> </span><span class="bound"><span>z</span></span><span> </span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMNat|const"><span>inv_VDMNat</span></a><span> </span><span class="bound"><span>z</span></span><span> </span><span class="main"><span>}</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span>Project </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.pred_VDMNat|const"><span>pred_VDMNat</span></a></span><span class="antiquote"><span>}</span></span></span><span> into </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>typ</span></span><span> </span><span class="quoted"><span class="main"><span>‚Ñï</span></span></span><span class="antiquote"><span>}</span></span></span><span> for link to well foundedness</span><span>‚Ä∫</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_pred_VDMNat_wf|fact"><span class="entity_def" id="VDMToolkit.l_pred_VDMNat_wf|thm"><span>l_pred_VDMNat_wf</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>‚Äπ</span><span>wf</span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.pred_VDMNat|const"><span>pred_VDMNat</span></a><span>‚Ä∫</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.pred_VDMNat|const"><span>pred_VDMNat</span></a><span> </span><span class="main"><span>‚äÜ</span></span><span> </span><span>measure</span><span> </span><span>nat</span><span>"</span></span></span><span> 
     </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.pred_VDMNat_def|fact"><span>pred_VDMNat_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMNat_def|fact"><span>inv_VDMNat_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
     </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>wf_subset</span><span> </span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><span>wf_measure</span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_pred_VDMNat_subset_int_ge_less_than|fact"><span class="entity_def" id="VDMToolkit.l_pred_VDMNat_subset_int_ge_less_than|thm"><span>l_pred_VDMNat_subset_int_ge_less_than</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>‚Äπ</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.pred_VDMNat|const"><span>pred_VDMNat</span></a><span> </span><span class="main"><span>‚äÜ</span></span><span> </span><span>int_ge_less_than</span><span> </span><span class="main"><span>0</span></span><span>‚Ä∫</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>int_ge_less_than_def</span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMNat_def|fact"><span>inv_VDMNat_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.pred_VDMNat_def|fact"><span>pred_VDMNat_def</span></a><span> </span><span>subset_iff</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.less_than_VDMNat_def|fact"><span class="entity_def" id="VDMToolkit.less_than_VDMNat_def|thm"><span class="entity_def" id="VDMToolkit.less_than_VDMNat_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="VDMToolkit.less_than_VDMNat|const"><span>less_than_VDMNat</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMNat|type"><span>VDMNat</span></a><span> </span><span class="main"><span>√ó</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMNat|type"><span>VDMNat</span></a><span class="main"><span>)</span></span><span> </span><span>set</span><span>"</span></span></span><span>
</span><span class="comment1"><span>(</span><span>*</span><span>  where "less_than_VDMNat ‚â° pred_VDMNat<span class="hidden">‚áß</span><sup>+</sup>"</span><span>*</span><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‚Äπ</span><span class="free"><span>less_than_VDMNat</span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span class="main"><span>(</span></span><span>int_ge_less_than</span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span class="main"><span><span class="hidden">‚áß</span><sup>+</sup></span></span><span>‚Ä∫</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_less_than_VDMNat_wf|fact"><span class="entity_def" id="VDMToolkit.l_less_than_VDMNat_wf|thm"><span>l_less_than_VDMNat_wf</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>iff</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>wf</span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.less_than_VDMNat|const"><span>less_than_VDMNat</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.less_than_VDMNat_def|fact"><span>less_than_VDMNat_def</span></a><span> </span><span>wf_int_ge_less_than</span><span> </span><span>wf_trancl</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.trans_less_than_VDMNat|fact"><span class="entity_def" id="VDMToolkit.trans_less_than_VDMNat|thm"><span>trans_less_than_VDMNat</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>iff</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>trans</span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.less_than_VDMNat|const"><span>less_than_VDMNat</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.less_than_VDMNat_def|fact"><span>less_than_VDMNat_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_less_than_VDMNat_irrefl|fact"><span class="entity_def" id="VDMToolkit.l_less_than_VDMNat_irrefl|thm"><span>l_less_than_VDMNat_irrefl</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>irrefl</span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.less_than_VDMNat|const"><span>less_than_VDMNat</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>wf_imp_irrefl</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_less_than_VDMNat_asym|fact"><span class="entity_def" id="VDMToolkit.l_less_than_VDMNat_asym|thm"><span>l_less_than_VDMNat_asym</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>asym</span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.less_than_VDMNat|const"><span>less_than_VDMNat</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><span>asym_iff</span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_less_than_VDMNat_wf|fact"><span>l_less_than_VDMNat_wf</span></a><span> </span><span>wf_not_sym</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.less_int_rel|fact"><span class="entity_def" id="VDMToolkit.less_int_rel|thm"><span>less_int_rel</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(&lt;)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Œª</span></span><span class="bound"><span>m</span></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>m</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>n</span></span><span class="main"><span>::</span></span><span>int</span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span><span class="hidden">‚áß</span><sup>+</sup><span class="hidden">‚áß</span><sup>+</sup></span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>ext</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>rule</span></span><span> </span><span>ext</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>rule</span></span><span> </span><span>iffI</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="skolem"><span>m</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span>int</span></span><span>
  </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_46598..46602">show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Œª</span></span><span class="bound"><span>m</span></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>m</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>n</span></span><span class="main"><span>::</span></span><span>int</span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span><span class="hidden">‚áß</span><sup>+</sup><span class="hidden">‚áß</span><sup>+</sup></span></span><span> </span><span class="skolem"><span>m</span></span><span> </span><span class="skolem"><span>n</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>m</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="skolem"><span>n</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#offset_46598..46602"><span>that</span></a><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induct</span></span><span> </span><span class="quoted"><span class="skolem"><span>n</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>base</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>step</span><span> </span><span class="skolem"><span>i</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>tranclp.trancl_into_trancl</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_46825..46829">show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>m</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="skolem"><span>n</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Œª</span></span><span class="bound"><span>m</span></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>m</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>n</span></span><span class="main"><span>::</span></span><span>int</span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span><span class="hidden">‚áß</span><sup>+</sup><span class="hidden">‚áß</span><sup>+</sup></span></span><span> </span><span class="skolem"><span>m</span></span><span> </span><span class="skolem"><span>n</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#offset_46825..46829"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induct</span></span><span> </span><span class="quoted"><span class="skolem"><span>n</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_less_than_VDMNat_subset_int_ge_less_than|fact"><span class="entity_def" id="VDMToolkit.l_less_than_VDMNat_subset_int_ge_less_than|thm"><span>l_less_than_VDMNat_subset_int_ge_less_than</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.less_than_VDMNat|const"><span>less_than_VDMNat</span></a><span> </span><span class="main"><span>‚äÜ</span></span><span> </span><span>int_ge_less_than</span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.less_than_VDMNat_def|fact"><span>less_than_VDMNat_def</span></a><span> </span><span>int_ge_less_than_def</span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMNat_def|fact"><span>inv_VDMNat_def</span></a><span>  </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.pred_VDMNat_def|fact"><span>pred_VDMNat_def</span></a><span> </span><span>subset_iff</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>allI</span><span> </span><span>impI</span><span> </span><span>conjI</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>tranclD</span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>z3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>case_prodD</span><span> </span><span>mem_Collect_eq</span><span> </span><span>trancl_trans_induct</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_less_than_VDMNat_iff|fact"><span class="entity_def" id="VDMToolkit.l_less_than_VDMNat_iff|thm"><span>l_less_than_VDMNat_iff</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>iff</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMNat|const"><span>inv_VDMNat</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span class="main"><span>,</span></span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.less_than_VDMNat|const"><span>less_than_VDMNat</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span class="main"><span>&lt;</span></span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>iffI</span><span class="main"><span>)</span></span><span>  
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>int_ge_less_than_def</span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_less_than_VDMNat_subset_int_ge_less_than|fact"><span>l_less_than_VDMNat_subset_int_ge_less_than</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.less_than_VDMNat_def|fact"><span>less_than_VDMNat_def</span></a><span> </span><span>int_ge_less_than_def</span><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>r_into_trancl</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMNat_def|fact"><span>inv_VDMNat_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_total_on_less_than_VDMNat|fact"><span class="entity_def" id="VDMToolkit.l_total_on_less_than_VDMNat|thm"><span>l_total_on_less_than_VDMNat</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>total_on</span><span> </span><span class="main"><span>{</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMNat|const"><span>inv_VDMNat</span></a><span> </span><span class="bound"><span>x</span></span><span class="main"><span>}</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.less_than_VDMNat|const"><span>less_than_VDMNat</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><span>total_on_def</span><span> 
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMNat_def|fact"><span>inv_VDMNat_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.pair_less_VDMNat_def|fact"><span class="entity_def" id="VDMToolkit.pair_less_VDMNat_def|thm"><span class="entity_def" id="VDMToolkit.pair_less_VDMNat_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.pair_less_VDMNat|const"><span>pair_less_VDMNat</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>‚Äπ</span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMNat|type"><span>VDMNat</span></a><span> </span><span class="main"><span>√ó</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMNat|type"><span>VDMNat</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>√ó</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMNat|type"><span>VDMNat</span></a><span> </span><span class="main"><span>√ó</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMNat|type"><span>VDMNat</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMSet|type"><span>VDMSet</span></a><span>‚Ä∫</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>pair_less_VDMNat</span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.less_than_VDMNat|const"><span>less_than_VDMNat</span></a><span> </span><span class="keyword1"><span>&lt;*lex*&gt;</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.less_than_VDMNat|const"><span>less_than_VDMNat</span></a><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.wf_pair_less_VDMNat|fact"><span class="entity_def" id="VDMToolkit.wf_pair_less_VDMNat|thm"><span>wf_pair_less_VDMNat</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>wf</span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.pair_less_VDMNat|const"><span>pair_less_VDMNat</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.pair_less_VDMNat_def|fact"><span>pair_less_VDMNat_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_trans_pair_less_VDMNat|fact"><span class="entity_def" id="VDMToolkit.l_trans_pair_less_VDMNat|thm"><span>l_trans_pair_less_VDMNat</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>iff</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>trans</span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.pair_less_VDMNat|const"><span>pair_less_VDMNat</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.pair_less_VDMNat_def|fact"><span>pair_less_VDMNat_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.total_pair_less_VDMNat|fact"><span class="entity_def" id="VDMToolkit.total_pair_less_VDMNat|thm"><span>total_pair_less_VDMNat</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>iff</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>total_on</span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.less_than_VDMNat|const"><span>less_than_VDMNat</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.pair_less_VDMNat|const"><span>pair_less_VDMNat</span></a><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><span>total_on_def</span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.pair_less_VDMNat_def|fact"><span>pair_less_VDMNat_def</span></a><span> </span><span>lex_prod_def</span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>safe</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>mono_tags</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>case_prodD</span><span> </span><span>int_ge_less_than_def</span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMNat_def|fact"><span>inv_VDMNat_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_less_than_VDMNat_iff|fact"><span>l_less_than_VDMNat_iff</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_less_than_VDMNat_subset_int_ge_less_than|fact"><span>l_less_than_VDMNat_subset_int_ge_less_than</span></a><span> </span><span>mem_Collect_eq</span><span> </span><span>not_less_iff_gr_or_eq</span><span> </span><span>subsetD</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>Product_Type.Collect_case_prodD</span><span> </span><span>fst_conv</span><span> </span><span>insert_absorb</span><span> </span><span>insert_subset</span><span> </span><span>int_ge_less_than_def</span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMNat_def|fact"><span>inv_VDMNat_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_less_than_VDMNat_iff|fact"><span>l_less_than_VDMNat_iff</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_less_than_VDMNat_subset_int_ge_less_than|fact"><span>l_less_than_VDMNat_subset_int_ge_less_than</span></a><span> </span><span>not_less_iff_gr_or_eq</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>case_prodD</span><span> </span><span>in_mono</span><span> </span><span>int_ge_less_than_def</span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMNat_def|fact"><span>inv_VDMNat_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_less_than_VDMNat_iff|fact"><span>l_less_than_VDMNat_iff</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_less_than_VDMNat_subset_int_ge_less_than|fact"><span>l_less_than_VDMNat_subset_int_ge_less_than</span></a><span> </span><span>mem_Collect_eq</span><span> </span><span>not_less_iff_gr_or_eq</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>case_prodD</span><span> </span><span>int_ge_less_than_def</span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMNat_def|fact"><span>inv_VDMNat_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_less_than_VDMNat_iff|fact"><span>l_less_than_VDMNat_iff</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_less_than_VDMNat_subset_int_ge_less_than|fact"><span>l_less_than_VDMNat_subset_int_ge_less_than</span></a><span> </span><span>mem_Collect_eq</span><span> </span><span>not_less_iff_gr_or_eq</span><span> </span><span>subsetD</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>mono_tags</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>case_prodD</span><span> </span><span>in_mono</span><span> </span><span>int_ge_less_than_def</span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMNat_def|fact"><span>inv_VDMNat_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_less_than_VDMNat_iff|fact"><span>l_less_than_VDMNat_iff</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_less_than_VDMNat_subset_int_ge_less_than|fact"><span>l_less_than_VDMNat_subset_int_ge_less_than</span></a><span> </span><span>mem_Collect_eq</span><span> </span><span>not_less_iff_gr_or_eq</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>case_prodD</span><span> </span><span>int_ge_less_than_def</span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMNat_def|fact"><span>inv_VDMNat_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_less_than_VDMNat_iff|fact"><span>l_less_than_VDMNat_iff</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_less_than_VDMNat_subset_int_ge_less_than|fact"><span>l_less_than_VDMNat_subset_int_ge_less_than</span></a><span> </span><span>mem_Collect_eq</span><span> </span><span>not_less_iff_gr_or_eq</span><span> </span><span>subsetD</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>case_prodD</span><span> </span><span>in_mono</span><span> </span><span>int_ge_less_than_def</span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMNat_def|fact"><span>inv_VDMNat_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_less_than_VDMNat_iff|fact"><span>l_less_than_VDMNat_iff</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_less_than_VDMNat_subset_int_ge_less_than|fact"><span>l_less_than_VDMNat_subset_int_ge_less_than</span></a><span> </span><span>mem_Collect_eq</span><span> </span><span>not_less_iff_gr_or_eq</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> best</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>Product_Type.Collect_case_prodD</span><span> </span><span>fst_conv</span><span> </span><span>int_ge_less_than_def</span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMNat_def|fact"><span>inv_VDMNat_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_less_than_VDMNat_iff|fact"><span>l_less_than_VDMNat_iff</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_less_than_VDMNat_subset_int_ge_less_than|fact"><span>l_less_than_VDMNat_subset_int_ge_less_than</span></a><span> </span><span>subset_iff</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_pair_less_VDMNat_iff1_case1|fact"><span class="entity_def" id="VDMToolkit.l_pair_less_VDMNat_iff1_case1|thm"><span>l_pair_less_VDMNat_iff1_case1</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMNat|const"><span>inv_VDMNat</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>z</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.pair_less_VDMNat|const"><span>pair_less_VDMNat</span></a><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>z</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>CollectD</span><span> </span><span>case_prodD</span><span> </span><span>in_lex_prod</span><span> </span><span>int_ge_less_than_def</span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_less_than_VDMNat_subset_int_ge_less_than|fact"><span>l_less_than_VDMNat_subset_int_ge_less_than</span></a><span> </span><span>order_less_irrefl</span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.pair_less_VDMNat_def|fact"><span>pair_less_VDMNat_def</span></a><span> </span><span>subset_iff</span><span class="main"><span>)</span></span><span>
  </span><span class="comment1"><span>(</span><span>*</span><span> 
  proof -
    assume "((x, y), x, z) ‚àà pair_less_VDMNat"
    then have "((x, y), x, z) ‚àà less_than_VDMNat &lt;*lex*&gt; less_than_VDMNat"
      using pair_less_VDMNat_def by blast
    then show ?thesis
      using int_ge_less_than_def l_less_than_VDMNat_subset_int_ge_less_than by auto
  </span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_pair_less_VDMNat_iff1|fact"><span class="entity_def" id="VDMToolkit.l_pair_less_VDMNat_iff1|thm"><span>l_pair_less_VDMNat_iff1</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMNat|const"><span>inv_VDMNat</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMNat|const"><span>inv_VDMNat</span></a><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span class="main"><span>,</span></span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span class="main"><span>,</span></span><span class="free"><span>z</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.pair_less_VDMNat|const"><span>pair_less_VDMNat</span></a><span> </span><span class="main"><span>‚ü∑</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>&lt;</span></span><span class="free"><span>z</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>iffI</span><span class="main"><span>)</span></span><span> 
   </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_pair_less_VDMNat_iff1_case1|fact"><span>l_pair_less_VDMNat_iff1_case1</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.pair_less_VDMNat_def|fact"><span>pair_less_VDMNat_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_pair_less_VDMNat_I1|fact"><span class="entity_def" id="VDMToolkit.l_pair_less_VDMNat_I1|thm"><span>l_pair_less_VDMNat_I1</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMNat|const"><span>inv_VDMNat</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMNat|const"><span>inv_VDMNat</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>b</span></span><span>  </span><span class="main"><span>‚üπ</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>a</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>b</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.pair_less_VDMNat|const"><span>pair_less_VDMNat</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.pair_less_VDMNat_def|fact"><span>pair_less_VDMNat_def</span></a><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_pair_less_VDMNat_I2|fact"><span class="entity_def" id="VDMToolkit.l_pair_less_VDMNat_I2|thm"><span>l_pair_less_VDMNat_I2</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMNat|const"><span>inv_VDMNat</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMNat|const"><span>inv_VDMNat</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>‚â§</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>t</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>a</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>b</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.pair_less_VDMNat|const"><span>pair_less_VDMNat</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_pair_less_VDMNat_I1|fact"><span>l_pair_less_VDMNat_I1</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span>========================================================================</span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span> </span><span>Set operators lemmas</span><span> </span><span>‚Ä∫</span></span></span><span>
</span><span class="comment1"><span>(</span><span>*</span><span>========================================================================</span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_psubset_insert|fact"><span class="entity_def" id="VDMToolkit.l_psubset_insert|thm"><span>l_psubset_insert</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚àâ</span></span><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><span>‚äÇ</span></span><span> </span><span>insert</span><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>S</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_right_diff_left_dist|fact"><span class="entity_def" id="VDMToolkit.l_right_diff_left_dist|thm"><span>l_right_diff_left_dist</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>S</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>T</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>U</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>S</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>T</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚à™</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>S</span></span><span> </span><span class="main"><span>‚à©</span></span><span> </span><span class="free"><span>U</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>Diff_Compl</span><span> </span><span>Diff_Int</span><span> </span><span>diff_eq</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>thm</span></span></span><span> </span><span>Diff_Compl</span><span>
      </span><span>Diff_Int</span><span>
      </span><span>diff_eq</span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_diff_un_not_equal|fact"><span class="entity_def" id="VDMToolkit.l_diff_un_not_equal|thm"><span>l_diff_un_not_equal</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>R</span></span><span> </span><span class="main"><span>‚äÇ</span></span><span> </span><span class="free"><span>T</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>T</span></span><span> </span><span class="main"><span>‚äÜ</span></span><span> </span><span class="free"><span>S</span></span><span>  </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>T</span></span><span> </span><span class="main"><span>‚à™</span></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="main"><span>‚â†</span></span><span> </span><span class="free"><span>S</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>


</span><span class="comment1"><span>(</span><span>*</span><span>========================================================================</span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span> </span><span>Map operators lemmas</span><span> </span><span>‚Ä∫</span></span></span><span>
</span><span class="comment1"><span>(</span><span>*</span><span>========================================================================</span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_map_non_empty_has_elem_conv|fact"><span class="entity_def" id="VDMToolkit.l_map_non_empty_has_elem_conv|thm"><span>l_map_non_empty_has_elem_conv</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>g</span></span><span> </span><span class="main"><span>‚â†</span></span><span> </span><span>Map.empty</span><span> </span><span class="main"><span>‚ü∑</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>‚àÉ</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>domIff</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_map_non_empty_dom_conv|fact"><span class="entity_def" id="VDMToolkit.l_map_non_empty_dom_conv|thm"><span>l_map_non_empty_dom_conv</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>g</span></span><span> </span><span class="main"><span>‚â†</span></span><span> </span><span>Map.empty</span><span> </span><span class="main"><span>‚ü∑</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>‚â†</span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>dom_eq_empty_conv</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_map_non_empty_ran_conv|fact"><span class="entity_def" id="VDMToolkit.l_map_non_empty_ran_conv|thm"><span>l_map_non_empty_ran_conv</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>g</span></span><span> </span><span class="main"><span>‚â†</span></span><span> </span><span>Map.empty</span><span> </span><span class="main"><span>‚ü∑</span></span><span> </span><span>ran</span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>‚â†</span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>empty_iff</span><span> </span><span>equals0I</span><span> 
          </span><span>fun_upd_triv</span><span> </span><span>option.exhaust</span><span> 
          </span><span>ranI</span><span> </span><span>ran_restrictD</span><span> </span><span>restrict_complement_singleton_eq</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_finite_rng|fact"><span class="entity_def" id="VDMToolkit.l_finite_rng|thm"><span>l_finite_rng</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="main"><span>(</span></span><span>dom</span><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span>finite</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.rng|const"><span>rng</span></a><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>finite_ran</span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.rng_def|fact"><span>rng_def</span></a><span class="main"><span>)</span></span><span>
</span><span class="comment1"><span>(</span><span>*</span><span> +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span> </span><span>Domain restriction weakening lemmas [EXPERT]</span><span> </span><span>‚Ä∫</span></span></span><span>
</span><span class="comment1"><span>(</span><span>*</span><span> +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ </span><span>*</span><span>)</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> Lemma: dom restriction set inter equiv [ZEVES-LEMMA] </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_dom_r_iff|fact"><span class="entity_def" id="VDMToolkit.l_dom_r_iff|thm"><span>l_dom_r_iff</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dom</span><span class="main"><span>(</span></span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_restr|const"><span>‚óÉ</span></a></span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><span>‚à©</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>g</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>Int_commute</span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_restr_def|fact"><span>dom_restr_def</span></a><span> </span><span>dom_restrict</span><span class="main"><span>)</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> Lemma: dom restriction set inter equiv [ZEVES-LEMMA] </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_dom_r_subset|fact"><span class="entity_def" id="VDMToolkit.l_dom_r_subset|thm"><span>l_dom_r_subset</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_restr|const"><span>‚óÉ</span></a></span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>‚äÜ<span class="hidden">‚á©</span><sub>m</sub></span></span><span> </span><span class="free"><span>g</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>Int_iff</span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_restr_def|fact"><span>dom_restr_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dom_r_iff|fact"><span>l_dom_r_iff</span></a><span> </span><span>map_le_def</span><span> </span><span>restrict_in</span><span class="main"><span>)</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> Lemma: dom restriction set inter equiv [ZEVES-LEMMA] </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_dom_r_accum|fact"><span class="entity_def" id="VDMToolkit.l_dom_r_accum|thm"><span>l_dom_r_accum</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_restr|const"><span>‚óÉ</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>T</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_restr|const"><span>‚óÉ</span></a></span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>S</span></span><span> </span><span class="main"><span>‚à©</span></span><span> </span><span class="free"><span>T</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_restr|const"><span>‚óÉ</span></a></span><span> </span><span class="free"><span>g</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>Int_commute</span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_restr_def|fact"><span>dom_restr_def</span></a><span> </span><span>restrict_restrict</span><span class="main"><span>)</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> Lemma: dom restriction set inter equiv [ZEVES-LEMMA] </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_dom_r_nothing|fact"><span class="entity_def" id="VDMToolkit.l_dom_r_nothing|thm"><span>l_dom_r_nothing</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{}</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_restr|const"><span>‚óÉ</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>Map.empty</span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_restr_def|fact"><span>dom_restr_def</span></a><span> </span><span>restrict_map_to_empty</span><span class="main"><span>)</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> Lemma: dom restriction set inter equiv [ZEVES-LEMMA] </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_dom_r_empty|fact"><span class="entity_def" id="VDMToolkit.l_dom_r_empty|thm"><span>l_dom_r_empty</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_restr|const"><span>‚óÉ</span></a></span><span> </span><span>Map.empty</span><span> </span><span class="main"><span>=</span></span><span> </span><span>Map.empty</span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_restr_def|fact"><span>dom_restr_def</span></a><span> </span><span>restrict_map_empty</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_dres_absorb|fact"><span class="entity_def" id="VDMToolkit.l_dres_absorb|thm"><span>l_dres_absorb</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>UNIV</span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_restr|const"><span>‚óÉ</span></a></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>m</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_restr_def|fact"><span>dom_restr_def</span></a><span> </span><span>map_le_antisym</span><span> </span><span>map_le_def</span><span class="main"><span>)</span></span><span>  
  
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_dom_r_nothing_empty|fact"><span class="entity_def" id="VDMToolkit.l_dom_r_nothing_empty|thm"><span>l_dom_r_nothing_empty</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>S</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_restr|const"><span>‚óÉ</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>Map.empty</span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dom_r_nothing|fact"><span>l_dom_r_nothing</span></a><span class="main"><span>)</span></span><span>
</span><span class="comment1"><span>(</span><span>*</span><span> FD: in specific dom subsumes application (over Some+None) [ZEVES-LEMMA] </span><span>*</span><span>)</span></span><span>
</span><span class="comment1"><span>(</span><span>*</span><span>
lemmX f_in_dom_r_apply_elem: 
  "l ‚àà dom f ‚àß l ‚àà S ‚üπ ((S ‚óÉ f) l) = (f l)"
unfolding dom_restr_def
by (cases "l‚ààS", auto)
</span><span>*</span><span>)</span></span><span>
</span><span class="comment1"><span>(</span><span>*</span><span> Simplified as doesn't need the l:dom f case </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span>  </span><span class="entity_def" id="VDMToolkit.f_in_dom_r_apply_elem|fact"><span class="entity_def" id="VDMToolkit.f_in_dom_r_apply_elem|thm"><span>f_in_dom_r_apply_elem</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_restr|const"><span>‚óÉ</span></a></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_restr_def|fact"><span>dom_restr_def</span></a><span> </span><span>restrict_in</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span>  </span><span class="entity_def" id="VDMToolkit.f_in_dom_r_apply_the_elem|fact"><span class="entity_def" id="VDMToolkit.f_in_dom_r_apply_the_elem|thm"><span>f_in_dom_r_apply_the_elem</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_restr|const"><span>‚óÉ</span></a></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>Some</span><span class="main"><span>(</span></span><span>the</span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>domIff</span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.f_in_dom_r_apply_elem|fact"><span>f_in_dom_r_apply_elem</span></a><span> </span><span>option.collapse</span><span class="main"><span>)</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> TODO: classify; rename. </span><span>*</span><span>)</span></span><span> 
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_dom_r_disjoint_weakening|fact"><span class="entity_def" id="VDMToolkit.l_dom_r_disjoint_weakening|thm"><span>l_dom_r_disjoint_weakening</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><span>‚à©</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span>dom</span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_restr|const"><span>‚óÉ</span></a></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚à©</span></span><span> </span><span>dom</span><span class="main"><span>(</span></span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_restr|const"><span>‚óÉ</span></a></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_restr_def|fact"><span>dom_restr_def</span></a><span> </span><span>dom_restrict</span><span> </span><span>inf_bot_right</span><span> </span><span>inf_left_commute</span><span> </span><span>restrict_restrict</span><span class="main"><span>)</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> TODO: classify; rename - refactor out for l_dom_r_iff? </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_dom_r_subseteq|fact"><span class="entity_def" id="VDMToolkit.l_dom_r_subseteq|thm"><span>l_dom_r_subseteq</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>S</span></span><span> </span><span class="main"><span>‚äÜ</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span>dom</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_restr|const"><span>‚óÉ</span></a></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>S</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_restr_def|fact"><span>dom_restr_def</span></a><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>Int_absorb1</span><span> </span><span>dom_restrict</span><span class="main"><span>)</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> TODO: classift; rename  - refactor out for l_dom_r_subset? </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_dom_r_dom_subseteq|fact"><span class="entity_def" id="VDMToolkit.l_dom_r_dom_subseteq|thm"><span>l_dom_r_dom_subseteq</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>dom</span><span> </span><span class="main"><span>(</span></span><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_restr|const"><span>‚óÉ</span></a></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚äÜ</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span> 
</span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_restr_def|fact"><span>dom_restr_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_the_dom_r|fact"><span class="entity_def" id="VDMToolkit.l_the_dom_r|thm"><span>l_the_dom_r</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span>the</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_restr|const"><span>‚óÉ</span></a></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>the</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.f_in_dom_r_apply_elem|fact"><span>f_in_dom_r_apply_elem</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_in_dom_dom_r|fact"><span class="entity_def" id="VDMToolkit.l_in_dom_dom_r|thm"><span>l_in_dom_dom_r</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span>dom</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_restr|const"><span>‚óÉ</span></a></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span class="free"><span>S</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>Int_iff</span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dom_r_iff|fact"><span>l_dom_r_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_dom_r_singleton|fact"><span class="entity_def" id="VDMToolkit.l_dom_r_singleton|thm"><span>l_dom_r_singleton</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>{</span></span><span class="free"><span>x</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_restr|const"><span>‚óÉ</span></a></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚Ü¶</span></span><span> </span><span>the</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_restr_def|fact"><span>dom_restr_def</span></a><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_54490..54495">lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.singleton_map_dom|fact"><span class="entity_def" id="VDMToolkit.singleton_map_dom|thm"><span>singleton_map_dom</span></span></span><span class="main"><span>:</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dom</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>x</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚Ü¶</span></span><span> </span><span>the</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
</span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#offset_54490..54495"><span>assms</span></a><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>y</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚Ü¶</span></span><span> </span><span class="skolem"><span>y</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>dom_eq_singleton_conv</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>y</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>the</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>fun_upd_same</span><span> </span><span>option.sel</span><span class="main"><span>)</span></span><span>
</span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="quoted"><span class="quoted"><span>`</span><span class="free"><span>f</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚Ü¶</span></span><span> </span><span class="skolem"><span>y</span></span><span class="main"><span>]</span></span><span>`</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_relimg_ran_subset|fact"><span class="entity_def" id="VDMToolkit.l_relimg_ran_subset|thm"><span>l_relimg_ran_subset</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span>ran</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_restr|const"><span>‚óÉ</span></a></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚äÜ</span></span><span> </span><span>ran</span><span> </span><span class="free"><span>m</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>full_types</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_restr_def|fact"><span>dom_restr_def</span></a><span> </span><span>ranI</span><span> </span><span>ran_restrictD</span><span> </span><span>subsetI</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.f_in_relimg_ran|fact"><span class="entity_def" id="VDMToolkit.f_in_relimg_ran|thm"><span>f_in_relimg_ran</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>y</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span>ran</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_restr|const"><span>‚óÉ</span></a></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span>ran</span><span> </span><span class="free"><span>m</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_relimg_ran_subset|fact"><span>l_relimg_ran_subset</span></a><span> </span><span>subsetCE</span><span class="main"><span>)</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> An experiment - not sure which are the best rules to choose! </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.restr_simps|fact"><span class="entity_def" id="VDMToolkit.restr_simps(8)|thm"><span class="entity_def" id="VDMToolkit.restr_simps(7)|thm"><span class="entity_def" id="VDMToolkit.restr_simps(6)|thm"><span class="entity_def" id="VDMToolkit.restr_simps(5)|thm"><span class="entity_def" id="VDMToolkit.restr_simps(4)|thm"><span class="entity_def" id="VDMToolkit.restr_simps(3)|thm"><span class="entity_def" id="VDMToolkit.restr_simps(2)|thm"><span class="entity_def" id="VDMToolkit.restr_simps(1)|thm"><span>restr_simps</span></span></span></span></span></span></span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dom_r_iff|fact"><span>l_dom_r_iff</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dom_r_accum|fact"><span>l_dom_r_accum</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dom_r_nothing|fact"><span>l_dom_r_nothing</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dom_r_empty|fact"><span>l_dom_r_empty</span></a><span>
                     </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.f_in_dom_r_apply_elem|fact"><span>f_in_dom_r_apply_elem</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dom_r_disjoint_weakening|fact"><span>l_dom_r_disjoint_weakening</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dom_r_subseteq|fact"><span>l_dom_r_subseteq</span></a><span>
                     </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dom_r_dom_subseteq|fact"><span>l_dom_r_dom_subseteq</span></a><span>

</span><span class="comment1"><span>(</span><span>*</span><span> +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span> </span><span>Domain anti restriction weakening lemmas [EXPERT]</span><span> </span><span>‚Ä∫</span></span></span><span>
</span><span class="comment1"><span>(</span><span>*</span><span> +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ </span><span>*</span><span>)</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> FD: dom elem subsume dom ar </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.f_in_dom_ar_subsume|fact"><span class="entity_def" id="VDMToolkit.f_in_dom_ar_subsume|thm"><span>f_in_dom_ar_subsume</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>l</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span>dom</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚üπ</span></span><span>  </span><span class="free"><span>l</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr_def|fact"><span>dom_antirestr_def</span></a><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>l</span></span><span class="main"><span>‚àà</span></span><span class="free"><span>S</span></span><span>"</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>auto</span></span><span class="main"><span>)</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> FD: in specific dom_ar cannot be what's filtered </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.f_in_dom_ar_notelem|fact"><span class="entity_def" id="VDMToolkit.f_in_dom_ar_notelem|thm"><span>f_in_dom_ar_notelem</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>l</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span>dom</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>{</span></span><span class="free"><span>r</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><span>‚â†</span></span><span> </span><span class="free"><span>r</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr_def|fact"><span>dom_antirestr_def</span></a><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> FD: in specific dom_ar subsumes application (over Some) </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.f_in_dom_ar_the_subsume|fact"><span class="entity_def" id="VDMToolkit.f_in_dom_ar_the_subsume|thm"><span>f_in_dom_ar_the_subsume</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>l</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span>dom</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span>the</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>the</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr_def|fact"><span>dom_antirestr_def</span></a><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>l</span></span><span class="main"><span>‚àà</span></span><span class="free"><span>S</span></span><span>"</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>auto</span></span><span class="main"><span>)</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> FD: in specific dom_ar subsumes application (over Some+None) </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.f_in_dom_ar_apply_subsume|fact"><span class="entity_def" id="VDMToolkit.f_in_dom_ar_apply_subsume|thm"><span>f_in_dom_ar_apply_subsume</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>l</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span>dom</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr_def|fact"><span>dom_antirestr_def</span></a><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>l</span></span><span class="main"><span>‚àà</span></span><span class="free"><span>S</span></span><span>"</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>auto</span></span><span class="main"><span>)</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> FD: in specific dom subsumes application (over Some+None) [ZEVES-LEMMA] </span><span>*</span><span>)</span></span><span>
</span><span class="comment1"><span>(</span><span>*</span><span>
lemmX f_in_dom_ar_apply_not_elem: 
  "l ‚àà dom f ‚àß l ‚àâ S ‚üπ ((S -‚óÉ f) l) = (f l)"
unfolding dom_antirestr_def
by (cases "l‚ààS", auto)
</span><span>*</span><span>)</span></span><span>
</span><span class="comment1"><span>(</span><span>*</span><span> TODO: I had a more general lemma: </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.f_in_dom_ar_apply_not_elem|fact"><span class="entity_def" id="VDMToolkit.f_in_dom_ar_apply_not_elem|thm"><span>f_in_dom_ar_apply_not_elem</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>l</span></span><span> </span><span class="main"><span>‚àâ</span></span><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>l</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr_def|fact"><span>dom_antirestr_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> FD: dom_ar subset dom [ZEVES-LEMMA] </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.f_dom_ar_subset_dom|fact"><span class="entity_def" id="VDMToolkit.f_dom_ar_subset_dom|thm"><span>f_dom_ar_subset_dom</span></span></span><span class="main"><span>:</span></span><span>
	</span><span class="quoted"><span class="quoted"><span>"</span><span>dom</span><span class="main"><span>(</span></span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚äÜ</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr_def|fact"><span>dom_antirestr_def</span></a><span> </span><span>dom_def</span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> Lemma: dom_ar as set different [ZEVES-LEMMA] </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_dom_dom_ar|fact"><span class="entity_def" id="VDMToolkit.l_dom_dom_ar|thm"><span>l_dom_dom_ar</span></span></span><span class="main"><span>:</span></span><span>
	</span><span class="quoted"><span class="quoted"><span>"</span><span>dom</span><span class="main"><span>(</span></span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>S</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr_def|fact"><span>dom_antirestr_def</span></a><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span>Collect_cong</span><span> </span><span>domIff</span><span> </span><span>dom_def</span><span> </span><span>set_diff_eq</span><span class="main"><span>)</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> Lemma: dom_ar accumulates to left [ZEVES-LEMMA] </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_dom_ar_accum|fact"><span class="entity_def" id="VDMToolkit.l_dom_ar_accum|thm"><span>l_dom_ar_accum</span></span></span><span class="main"><span>:</span></span><span>
	</span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>T</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>S</span></span><span> </span><span class="main"><span>‚à™</span></span><span> </span><span class="free"><span>T</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr_def|fact"><span>dom_antirestr_def</span></a><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> Lemma: dom_ar subsumption [ZEVES-LEMMA] </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_dom_ar_nothing|fact"><span class="entity_def" id="VDMToolkit.l_dom_ar_nothing|thm"><span>l_dom_ar_nothing</span></span></span><span class="main"><span>:</span></span><span>
	</span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>S</span></span><span> </span><span class="main"><span>‚à©</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr_def|fact"><span>dom_antirestr_def</span></a><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>fun_eq_iff</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>disjoint_iff_not_equal</span><span> </span><span>domIff</span><span class="main"><span>)</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> NOTE: After finding fun_eq_iff, there is also map_le_antisym for maps!</span><span>*</span><span>)</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> Lemma: dom_ar nothing LHS [ZEVES-LEMMA] </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_dom_ar_empty_lhs|fact"><span class="entity_def" id="VDMToolkit.l_dom_ar_empty_lhs|thm"><span>l_dom_ar_empty_lhs</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{}</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>Int_empty_left</span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dom_ar_nothing|fact"><span>l_dom_ar_nothing</span></a><span class="main"><span>)</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> Lemma: dom_ar nothing RHS [ZEVES-LEMMA] </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_dom_ar_empty_rhs|fact"><span class="entity_def" id="VDMToolkit.l_dom_ar_empty_rhs|thm"><span>l_dom_ar_empty_rhs</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span>Map.empty</span><span> </span><span class="main"><span>=</span></span><span> </span><span>Map.empty</span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>Int_empty_right</span><span> </span><span>dom_empty</span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dom_ar_nothing|fact"><span>l_dom_ar_nothing</span></a><span class="main"><span>)</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> Lemma: dom_ar all RHS is empty [ZEVES-LEMMA] </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_dom_ar_everything|fact"><span class="entity_def" id="VDMToolkit.l_dom_ar_everything|thm"><span>l_dom_ar_everything</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span>dom</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>‚äÜ</span></span><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>Map.empty</span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>domIff</span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr_def|fact"><span>dom_antirestr_def</span></a><span> </span><span>in_mono</span><span class="main"><span>)</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> Lemma: dom_ar submap [ZEVES-LEMMA] </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_map_dom_ar_subset|fact"><span class="entity_def" id="VDMToolkit.l_map_dom_ar_subset|thm"><span>l_map_dom_ar_subset</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><span>‚äÜ<span class="hidden">‚á©</span><sub>m</sub></span></span><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>domIff</span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr_def|fact"><span>dom_antirestr_def</span></a><span> </span><span>map_le_def</span><span class="main"><span>)</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> Lemma: dom_ar nothing RHS is f [ZEVES-LEMMA] </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_dom_ar_none|fact"><span class="entity_def" id="VDMToolkit.l_dom_ar_none|thm"><span>l_dom_ar_none</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{}</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr_def|fact"><span>dom_antirestr_def</span></a><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>fun_eq_iff</span><span class="main"><span>)</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> Lemma: dom_ar something RHS isn't f [ZEVES-LEMMA] </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_map_dom_ar_neq|fact"><span class="entity_def" id="VDMToolkit.l_map_dom_ar_neq|thm"><span>l_map_dom_ar_neq</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>S</span></span><span> </span><span class="main"><span>‚äÜ</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><span>‚â†</span></span><span> </span><span class="main"><span>{}</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>‚â†</span></span><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>fun_eq_iff</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>insert</span></span><span> </span><span>ex_in_conv</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span class="quoted"><span class="free"><span>S</span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>erule</span></span><span> </span><span>exE</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr_def|fact"><span>dom_antirestr_def</span></a><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>exI</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>impI</span><span> </span><span>conjI</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>domIff</span><span> </span><span>set_mp</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_dom_rres_same_map_weaken|fact"><span class="entity_def" id="VDMToolkit.l_dom_rres_same_map_weaken|thm"><span>l_dom_rres_same_map_weaken</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>S</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>T</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>T</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>   

</span><span class="comment1"><span>(</span><span>*</span><span>  TODO classify; rename </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_dom_ar_not_in_dom|fact"><span class="entity_def" id="VDMToolkit.l_dom_ar_not_in_dom|thm"><span>l_dom_ar_not_in_dom</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_58416..58417">*</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚àâ</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚àâ</span></span><span> </span><span>dom</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#offset_58416..58417"><span>*</span></a><span> </span><span>domIff</span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr_def|fact"><span>dom_antirestr_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span>  TODO: classify; rename </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_dom_ar_not_in_dom2|fact"><span class="entity_def" id="VDMToolkit.l_dom_ar_not_in_dom2|thm"><span>l_dom_ar_not_in_dom2</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span class="free"><span>F</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚àâ</span></span><span> </span><span>dom</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>F</span></span><span>  </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>domIff</span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr_def|fact"><span>dom_antirestr_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_dom_ar_notin_dom_or|fact"><span class="entity_def" id="VDMToolkit.l_dom_ar_notin_dom_or|thm"><span>l_dom_ar_notin_dom_or</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚àâ</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>‚à®</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚àâ</span></span><span> </span><span>dom</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>Diff_iff</span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dom_dom_ar|fact"><span>l_dom_dom_ar</span></a><span class="main"><span>)</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span>  TODO: classify - shows conditions for being in antri restr dom </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_in_dom_ar|fact"><span class="entity_def" id="VDMToolkit.l_in_dom_ar|thm"><span>l_in_dom_ar</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚àâ</span></span><span> </span><span class="free"><span>F</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span>dom</span><span>  </span><span class="main"><span>(</span></span><span class="free"><span>F</span></span><span>  </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.f_in_dom_ar_apply_not_elem|fact"><span>f_in_dom_ar_apply_not_elem</span></a><span> </span><span>domIff</span><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_Some_in_dom|fact"><span class="entity_def" id="VDMToolkit.l_Some_in_dom|thm"><span>l_Some_in_dom</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>Some</span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span>  TODO: classify; fix proof; rename; decide whether needed?! </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_dom_ar_insert|fact"><span class="entity_def" id="VDMToolkit.l_dom_ar_insert|thm"><span>l_dom_ar_insert</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span>insert</span><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>F</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>x</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>F</span></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>xa</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>insert</span><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>F</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>xa</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>{</span></span><span class="free"><span>x</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="free"><span>F</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>xa</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>xa</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr_def|fact"><span>dom_antirestr_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>xa</span></span><span class="main"><span>‚àà</span></span><span class="free"><span>F</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr_def|fact"><span>dom_antirestr_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.f_in_dom_ar_apply_not_elem|fact"><span>f_in_dom_ar_apply_not_elem</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.f_in_dom_ar_apply_not_elem|fact"><span>f_in_dom_ar_apply_not_elem</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.f_in_dom_ar_apply_not_elem|fact"><span>f_in_dom_ar_apply_not_elem</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>  
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>


</span><span class="comment1"><span>(</span><span>*</span><span>  TODO: classify; rename?; subsume by l_dom_ar_accum? </span><span>*</span><span>)</span></span><span>
</span><span class="comment1"><span>(</span><span>*</span><span>  Think it may also be unused? </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_dom_ar_absorb_singleton|fact"><span class="entity_def" id="VDMToolkit.l_dom_ar_absorb_singleton|thm"><span>l_dom_ar_absorb_singleton</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span class="free"><span>F</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>{</span></span><span class="free"><span>x</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="free"><span>F</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span class="main"><span>(</span></span><span class="free"><span>F</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dom_ar_insert|fact"><span>l_dom_ar_insert</span></a><span> </span><span>insert_absorb</span><span class="main"><span>)</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span>  TODO: rename; classify; generalise? </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_dom_ar_disjoint_weakening|fact"><span class="entity_def" id="VDMToolkit.l_dom_ar_disjoint_weakening|thm"><span>l_dom_ar_disjoint_weakening</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span>dom</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>‚à©</span></span><span> </span><span class="free"><span>Y</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span>dom</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚à©</span></span><span> </span><span class="free"><span>Y</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span> 
 </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>Diff_Int_distrib2</span><span> </span><span>empty_Diff</span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dom_dom_ar|fact"><span>l_dom_dom_ar</span></a><span class="main"><span>)</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> TODO: not used? </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_dom_ar_singletons_comm|fact"><span class="entity_def" id="VDMToolkit.l_dom_ar_singletons_comm|thm"><span>l_dom_ar_singletons_comm</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="free"><span>x</span></span><span class="main"><span>}</span></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>y</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>y</span></span><span class="main"><span>}</span></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>x</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dom_ar_insert|fact"><span>l_dom_ar_insert</span></a><span> </span><span>insert_commute</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_dom_r_ar_set_minus|fact"><span class="entity_def" id="VDMToolkit.l_dom_r_ar_set_minus|thm"><span>l_dom_r_ar_set_minus</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_restr|const"><span>‚óÉ</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>T</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>S</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>T</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_restr|const"><span>‚óÉ</span></a></span><span> </span><span class="free"><span>m</span></span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>find_theorems</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>_</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>_</span></span><span>"</span></span></span><span> name</span><span class="main"><span>:</span></span><span>HOL name</span><span class="main"><span>:</span></span><span class="quoted"><span>"</span><span>fun</span><span>"</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>ext</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_restr_def|fact"><span>dom_restr_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr_def|fact"><span>dom_antirestr_def</span></a><span> </span><span>restrict_map_def</span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_VDMMap_filtering_psubset|fact"><span class="entity_def" id="VDMToolkit.l_VDMMap_filtering_psubset|thm"><span>l_VDMMap_filtering_psubset</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>d</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span>dom</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>{</span></span><span class="free"><span>d</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚äÇ</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>m</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>find_theorems</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‚Äπ</span><span class="main"><span>(</span></span><span class="main"><span>_</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="main"><span>_</span></span><span class="main"><span>)</span></span><span>‚Ä∫</span></span></span><span>  
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>psubsetI</span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.f_dom_ar_subset_dom|fact"><span>f_dom_ar_subset_dom</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.f_in_dom_ar_notelem|fact"><span>f_in_dom_ar_notelem</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_VDMMap_filtering_card|fact"><span class="entity_def" id="VDMToolkit.l_VDMMap_filtering_card|thm"><span>l_VDMMap_filtering_card</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="main"><span>(</span></span><span>dom</span><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><span>dom</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>{</span></span><span class="free"><span>d</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><span>dom</span><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_VDMMap_filtering_psubset|fact"><span>l_VDMMap_filtering_psubset</span></a><span> </span><span>psubset_card_mono</span><span class="main"><span>)</span></span><span>


</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.antirestr_simps|fact"><span class="entity_def" id="VDMToolkit.antirestr_simps(20)|thm"><span class="entity_def" id="VDMToolkit.antirestr_simps(19)|thm"><span class="entity_def" id="VDMToolkit.antirestr_simps(18)|thm"><span class="entity_def" id="VDMToolkit.antirestr_simps(17)|thm"><span class="entity_def" id="VDMToolkit.antirestr_simps(16)|thm"><span class="entity_def" id="VDMToolkit.antirestr_simps(15)|thm"><span class="entity_def" id="VDMToolkit.antirestr_simps(14)|thm"><span class="entity_def" id="VDMToolkit.antirestr_simps(13)|thm"><span class="entity_def" id="VDMToolkit.antirestr_simps(12)|thm"><span class="entity_def" id="VDMToolkit.antirestr_simps(11)|thm"><span class="entity_def" id="VDMToolkit.antirestr_simps(10)|thm"><span class="entity_def" id="VDMToolkit.antirestr_simps(9)|thm"><span class="entity_def" id="VDMToolkit.antirestr_simps(8)|thm"><span class="entity_def" id="VDMToolkit.antirestr_simps(7)|thm"><span class="entity_def" id="VDMToolkit.antirestr_simps(6)|thm"><span class="entity_def" id="VDMToolkit.antirestr_simps(5)|thm"><span class="entity_def" id="VDMToolkit.antirestr_simps(4)|thm"><span class="entity_def" id="VDMToolkit.antirestr_simps(3)|thm"><span class="entity_def" id="VDMToolkit.antirestr_simps(2)|thm"><span class="entity_def" id="VDMToolkit.antirestr_simps(1)|thm"><span>antirestr_simps</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.f_in_dom_ar_subsume|fact"><span>f_in_dom_ar_subsume</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.f_in_dom_ar_notelem|fact"><span>f_in_dom_ar_notelem</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.f_in_dom_ar_the_subsume|fact"><span>f_in_dom_ar_the_subsume</span></a><span>
</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.f_in_dom_ar_apply_subsume|fact"><span>f_in_dom_ar_apply_subsume</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.f_in_dom_ar_apply_not_elem|fact"><span>f_in_dom_ar_apply_not_elem</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.f_dom_ar_subset_dom|fact"><span>f_dom_ar_subset_dom</span></a><span>
</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dom_dom_ar|fact"><span>l_dom_dom_ar</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dom_ar_accum|fact"><span>l_dom_ar_accum</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dom_ar_nothing|fact"><span>l_dom_ar_nothing</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dom_ar_empty_lhs|fact"><span>l_dom_ar_empty_lhs</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dom_ar_empty_rhs|fact"><span>l_dom_ar_empty_rhs</span></a><span>
</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dom_ar_everything|fact"><span>l_dom_ar_everything</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dom_ar_none|fact"><span>l_dom_ar_none</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dom_ar_not_in_dom|fact"><span>l_dom_ar_not_in_dom</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dom_ar_not_in_dom2|fact"><span>l_dom_ar_not_in_dom2</span></a><span>
</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dom_ar_notin_dom_or|fact"><span>l_dom_ar_notin_dom_or</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_in_dom_ar|fact"><span>l_in_dom_ar</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dom_ar_disjoint_weakening|fact"><span>l_dom_ar_disjoint_weakening</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_VDMMap_filtering_psubset|fact"><span>l_VDMMap_filtering_psubset</span></a><span>
</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_VDMMap_filtering_card|fact"><span>l_VDMMap_filtering_card</span></a><span>

</span><span class="comment1"><span>(</span><span>*</span><span> +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span> </span><span>Map override weakening lemmas [EXPERT]</span><span> </span><span>‚Ä∫</span></span></span><span>
</span><span class="comment1"><span>(</span><span>*</span><span> +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ </span><span>*</span><span>)</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> Lemma: dagger associates [ZEVES-LEMMA] </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_dagger_assoc|fact"><span class="entity_def" id="VDMToolkit.l_dagger_assoc|thm"><span>l_dagger_assoc</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger|const"><span>‚Ä†</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>g</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger|const"><span>‚Ä†</span></a></span><span> </span><span class="free"><span>h</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger|const"><span>‚Ä†</span></a></span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger|const"><span>‚Ä†</span></a></span><span> </span><span class="free"><span>h</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger_def|fact"><span>dagger_def</span></a><span> </span><span>map_add_assoc</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>thm</span></span></span><span> </span><span>ext</span><span> </span><span>option.split</span><span> </span><span>fun_eq_iff</span><span> </span><span class="comment1"><span>(</span><span>*</span><span> EXT! Just found function extensionality! </span><span>*</span><span>)</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> Lemma: dagger application [ZEVES-LEMMA] </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_dagger_apply|fact"><span class="entity_def" id="VDMToolkit.l_dagger_apply|thm"><span>l_dagger_apply</span></span></span><span class="main"><span>:</span></span><span>
	</span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger|const"><span>‚Ä†</span></a></span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>if</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>g</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>g</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger_def|fact"><span>dagger_def</span></a><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>full_types</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>map_add_dom_app_simps</span><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>map_add_dom_app_simps</span><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> Lemma: dagger domain [ZEVES-LEMMA] </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_dagger_dom|fact"><span class="entity_def" id="VDMToolkit.l_dagger_dom|thm"><span>l_dagger_dom</span></span></span><span class="main"><span>:</span></span><span>
	</span><span class="quoted"><span class="quoted"><span>"</span><span>dom</span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger|const"><span>‚Ä†</span></a></span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>‚à™</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>g</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger_def|fact"><span>dagger_def</span></a><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>dom_map_add</span><span> </span><span>sup_commute</span><span class="main"><span>)</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> Lemma: dagger absorption LHS </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_dagger_lhs_absorb|fact"><span class="entity_def" id="VDMToolkit.l_dagger_lhs_absorb|thm"><span>l_dagger_lhs_absorb</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span>dom</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>‚äÜ</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger|const"><span>‚Ä†</span></a></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>g</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>ext</span><span class="main"><span>)</span></span><span> 
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger_def|fact"><span>dagger_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dagger_apply|fact"><span>l_dagger_apply</span></a><span> </span><span>map_add_dom_app_simps</span><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>set_rev_mp</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_dagger_lhs_absorb_ALT_PROOF|fact"><span class="entity_def" id="VDMToolkit.l_dagger_lhs_absorb_ALT_PROOF|thm"><span>l_dagger_lhs_absorb_ALT_PROOF</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span>dom</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>‚äÜ</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger|const"><span>‚Ä†</span></a></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>g</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>ext</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dagger_apply|fact"><span>l_dagger_apply</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>impI</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>find_theorems</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>_</span></span><span> </span><span class="main"><span>‚àâ</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="main"><span>_</span></span><span>"</span></span></span><span> name</span><span class="main"><span>:</span></span><span>Set</span><span> 
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>drule</span></span><span> </span><span>contra_subsetD</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><span>dom_def</span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span class="main"><span>)</span></span><span>   </span><span class="comment1"><span>(</span><span>*</span><span> NOTE: foun nice lemmas to be used: contra_subsetD</span><span>*</span><span>)</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> Lemma: dagger empty absorption lhs [ZEVES-LEMMA] </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_dagger_empty_lhs|fact"><span class="entity_def" id="VDMToolkit.l_dagger_empty_lhs|thm"><span>l_dagger_empty_lhs</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span>Map.empty</span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger|const"><span>‚Ä†</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger_def|fact"><span>dagger_def</span></a><span> </span><span>empty_map_add</span><span class="main"><span>)</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> Lemma: dagger empty absorption rhs [ZEVES-LEMMA] </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_dagger_empty_rhs|fact"><span class="entity_def" id="VDMToolkit.l_dagger_empty_rhs|thm"><span>l_dagger_empty_rhs</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger|const"><span>‚Ä†</span></a></span><span> </span><span>Map.empty</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger_def|fact"><span>dagger_def</span></a><span> </span><span>map_add_empty</span><span class="main"><span>)</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> Interesting observation here:

A few times I have spotted this. I then to get these
lemmas and use them in Isar; whereas Leo, you don't seem
to use this variety. Probably because the automation takes
care of the reasoning?...
</span><span>*</span><span>)</span></span><span>
</span><span class="comment1"><span>(</span><span>*</span><span>  TODO: Rename; classify </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.dagger_notemptyL|fact"><span class="entity_def" id="VDMToolkit.dagger_notemptyL|thm"><span>dagger_notemptyL</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span> </span><span class="main"><span>‚â†</span></span><span> </span><span>Map.empty</span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger|const"><span>‚Ä†</span></a></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>‚â†</span></span><span> </span><span>Map.empty</span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger_def|fact"><span>dagger_def</span></a><span> </span><span>map_add_None</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.dagger_notemptyR|fact"><span class="entity_def" id="VDMToolkit.dagger_notemptyR|thm"><span>dagger_notemptyR</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>g</span></span><span> </span><span class="main"><span>‚â†</span></span><span> </span><span>Map.empty</span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger|const"><span>‚Ä†</span></a></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>‚â†</span></span><span> </span><span>Map.empty</span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger_def|fact"><span>dagger_def</span></a><span> </span><span>map_add_None</span><span class="main"><span>)</span></span><span>


</span><span class="comment1"><span>(</span><span>*</span><span> Lemma: dagger associates with dom_ar [ZEVES-LEMMA] </span><span>*</span><span>)</span></span><span>
</span><span class="comment1"><span>(</span><span>*</span><span>  It's not really an assoc prop? Well, kinda, but also kinda distrib </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_dagger_dom_ar_assoc|fact"><span class="entity_def" id="VDMToolkit.l_dagger_dom_ar_assoc|thm"><span>l_dagger_dom_ar_assoc</span></span></span><span class="main"><span>:</span></span><span>
	</span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>S</span></span><span> </span><span class="main"><span>‚à©</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger|const"><span>‚Ä†</span></a></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger|const"><span>‚Ä†</span></a></span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>fun_eq_iff</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dagger_apply|fact"><span>l_dagger_apply</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>allI</span><span> </span><span>impI</span><span> </span><span>conjI</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr_def|fact"><span>dom_antirestr_def</span></a><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dagger_apply|fact"><span>l_dagger_apply</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr_def|fact"><span>dom_antirestr_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dom_ar_nothing|fact"><span>l_dom_ar_nothing</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>thm</span></span></span><span> </span><span>map_add_comm</span><span>
   </span><span class="comment1"><span>(</span><span>*</span><span> NOTE: This should be provable, if only I know how to do map extensionality :-(. Now I do! fun_eq_iff! 
   			Thm map_add_comm is quite nice lemma two, and could be used here, yet l_dagger_apply seems nicer.
    </span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_dagger_not_empty|fact"><span class="entity_def" id="VDMToolkit.l_dagger_not_empty|thm"><span>l_dagger_not_empty</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>g</span></span><span> </span><span class="main"><span>‚â†</span></span><span> </span><span>Map.empty</span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger|const"><span>‚Ä†</span></a></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>‚â†</span></span><span> </span><span>Map.empty</span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger_def|fact"><span>dagger_def</span></a><span> </span><span>map_add_None</span><span class="main"><span>)</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> TODO: Following 6 need renamed; classified? LEO: how do you do such choices? </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.in_dagger_domL|fact"><span class="entity_def" id="VDMToolkit.in_dagger_domL|thm"><span>in_dagger_domL</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span>dom</span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger|const"><span>‚Ä†</span></a></span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger_def|fact"><span>dagger_def</span></a><span> </span><span>domIff</span><span> </span><span>map_add_None</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.in_dagger_domR|fact"><span class="entity_def" id="VDMToolkit.in_dagger_domR|thm"><span>in_dagger_domR</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span>dom</span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger|const"><span>‚Ä†</span></a></span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger_def|fact"><span>dagger_def</span></a><span> </span><span>domIff</span><span> </span><span>map_add_None</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_63984..63989">lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.the_dagger_dom_right|fact"><span class="entity_def" id="VDMToolkit.the_dagger_dom_right|thm"><span>the_dagger_dom_right</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>g</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>the</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger|const"><span>‚Ä†</span></a></span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>the</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>g</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>    
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#offset_63984..63989"><span>assms</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger_def|fact"><span>dagger_def</span></a><span> </span><span>map_add_dom_app_simps</span><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_64130..64135">lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.the_dagger_dom_left|fact"><span class="entity_def" id="VDMToolkit.the_dagger_dom_left|thm"><span>the_dagger_dom_left</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚àâ</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>g</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>the</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger|const"><span>‚Ä†</span></a></span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>the</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#offset_64130..64135"><span>assms</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger_def|fact"><span>dagger_def</span></a><span> </span><span>map_add_dom_app_simps</span><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>    

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.the_dagger_mapupd_dom|fact"><span class="entity_def" id="VDMToolkit.the_dagger_mapupd_dom|thm"><span>the_dagger_mapupd_dom</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span class="main"><span>‚â†</span></span><span class="free"><span>y</span></span><span> </span><span class="main"><span>‚üπ</span></span><span>  </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger|const"><span>‚Ä†</span></a></span><span> </span><span class="main"><span>[</span></span><span class="free"><span>y</span></span><span> </span><span class="main"><span>‚Ü¶</span></span><span> </span><span class="free"><span>z</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger_def|fact"><span>dagger_def</span></a><span> </span><span>fun_upd_other</span><span> </span><span>map_add_empty</span><span> </span><span>map_add_upd</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.dagger_upd_dist|fact"><span class="entity_def" id="VDMToolkit.dagger_upd_dist|thm"><span>dagger_upd_dist</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger|const"><span>‚Ä†</span></a></span><span> </span><span class="free"><span>fa</span></span><span class="main"><span>(</span></span><span class="free"><span>e</span></span><span> </span><span class="main"><span>‚Ü¶</span></span><span> </span><span class="free"><span>r</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger|const"><span>‚Ä†</span></a></span><span> </span><span class="free"><span>fa</span></span><span class="main"><span>)</span></span><span class="main"><span>(</span></span><span class="free"><span>e</span></span><span> </span><span class="main"><span>‚Ü¶</span></span><span> </span><span class="free"><span>r</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger_def|fact"><span>dagger_def</span></a><span> </span><span>map_add_upd</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.antirestr_then_dagger_notin|fact"><span class="entity_def" id="VDMToolkit.antirestr_then_dagger_notin|thm"><span>antirestr_then_dagger_notin</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚àâ</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>x</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger|const"><span>‚Ä†</span></a></span><span> </span><span class="main"><span>[</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚Ü¶</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>z</span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚àâ</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>{</span></span><span class="free"><span>x</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger|const"><span>‚Ä†</span></a></span><span> </span><span class="main"><span>[</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚Ü¶</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>z</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>z</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="quoted"><span class="quoted"><span>`</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚àâ</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>f</span></span><span>`</span></span></span><span>  </span><span>domIff</span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr_def|fact"><span>dom_antirestr_def</span></a><span> </span><span>fun_upd_other</span><span> </span><span>insertI1</span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dagger_apply|fact"><span>l_dagger_apply</span></a><span> </span><span>singleton_iff</span><span class="main"><span>)</span></span><span>  
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.antirestr_then_dagger|fact"><span class="entity_def" id="VDMToolkit.antirestr_then_dagger|thm"><span>antirestr_then_dagger</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>r</span></span><span class="main"><span>‚àà</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>r</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger|const"><span>‚Ä†</span></a></span><span> </span><span class="main"><span>[</span></span><span class="free"><span>r</span></span><span> </span><span class="main"><span>‚Ü¶</span></span><span> </span><span>the</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="free"><span>r</span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>x</span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_64846..64847">*</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>r</span></span><span class="main"><span>‚àà</span></span><span>dom</span><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>{</span></span><span class="free"><span>r</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger|const"><span>‚Ä†</span></a></span><span> </span><span class="main"><span>[</span></span><span class="free"><span>r</span></span><span> </span><span class="main"><span>‚Ü¶</span></span><span> </span><span>the</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="free"><span>r</span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dagger_apply|fact"><span>l_dagger_apply</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span class="operator"><span>intro</span></span><span> </span><span>conjI</span><span> </span><span>impI</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span class="main"><span>=</span></span><span class="free"><span>r</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>Some</span><span> </span><span class="main"><span>(</span></span><span>the</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="free"><span>r</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>r</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#offset_64846..64847"><span>*</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>‚â†</span></span><span class="free"><span>r</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>{</span></span><span class="free"><span>r</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.f_in_dom_ar_apply_not_elem|fact"><span>f_in_dom_ar_apply_not_elem</span></a><span> </span><span>singleton_iff</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> 


</span><span class="comment1"><span>(</span><span>*</span><span> TODO: rename; classify </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.dagger_notin_right|fact"><span class="entity_def" id="VDMToolkit.dagger_notin_right|thm"><span>dagger_notin_right</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚àâ</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger|const"><span>‚Ä†</span></a></span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span> 
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dagger_apply|fact"><span>l_dagger_apply</span></a><span class="main"><span>)</span></span><span>
</span><span class="comment1"><span>(</span><span>*</span><span> TODO: rename; classify </span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.dagger_notin_left|fact"><span class="entity_def" id="VDMToolkit.dagger_notin_left|thm"><span>dagger_notin_left</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚àâ</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger|const"><span>‚Ä†</span></a></span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
 </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger_def|fact"><span>dagger_def</span></a><span> </span><span>map_add_dom_app_simps</span><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_dagger_commute|fact"><span class="entity_def" id="VDMToolkit.l_dagger_commute|thm"><span>l_dagger_commute</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dom</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>‚à©</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span> </span><span class="main"><span>‚üπ</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger|const"><span>‚Ä†</span></a></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger|const"><span>‚Ä†</span></a></span><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger_def|fact"><span>dagger_def</span></a><span> 
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>map_add_comm</span><span class="main"><span>)</span></span><span> 
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.dagger_simps|fact"><span class="entity_def" id="VDMToolkit.dagger_simps(19)|thm"><span class="entity_def" id="VDMToolkit.dagger_simps(18)|thm"><span class="entity_def" id="VDMToolkit.dagger_simps(17)|thm"><span class="entity_def" id="VDMToolkit.dagger_simps(16)|thm"><span class="entity_def" id="VDMToolkit.dagger_simps(15)|thm"><span class="entity_def" id="VDMToolkit.dagger_simps(14)|thm"><span class="entity_def" id="VDMToolkit.dagger_simps(13)|thm"><span class="entity_def" id="VDMToolkit.dagger_simps(12)|thm"><span class="entity_def" id="VDMToolkit.dagger_simps(11)|thm"><span class="entity_def" id="VDMToolkit.dagger_simps(10)|thm"><span class="entity_def" id="VDMToolkit.dagger_simps(9)|thm"><span class="entity_def" id="VDMToolkit.dagger_simps(8)|thm"><span class="entity_def" id="VDMToolkit.dagger_simps(7)|thm"><span class="entity_def" id="VDMToolkit.dagger_simps(6)|thm"><span class="entity_def" id="VDMToolkit.dagger_simps(5)|thm"><span class="entity_def" id="VDMToolkit.dagger_simps(4)|thm"><span class="entity_def" id="VDMToolkit.dagger_simps(3)|thm"><span class="entity_def" id="VDMToolkit.dagger_simps(2)|thm"><span class="entity_def" id="VDMToolkit.dagger_simps(1)|thm"><span>dagger_simps</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dagger_assoc|fact"><span>l_dagger_assoc</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dagger_apply|fact"><span>l_dagger_apply</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dagger_dom|fact"><span>l_dagger_dom</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dagger_lhs_absorb|fact"><span>l_dagger_lhs_absorb</span></a><span>
</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dagger_empty_lhs|fact"><span>l_dagger_empty_lhs</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dagger_empty_rhs|fact"><span>l_dagger_empty_rhs</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger_notemptyL|fact"><span>dagger_notemptyL</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger_notemptyR|fact"><span>dagger_notemptyR</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dagger_not_empty|fact"><span>l_dagger_not_empty</span></a><span>
</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.in_dagger_domL|fact"><span>in_dagger_domL</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.in_dagger_domR|fact"><span>in_dagger_domR</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.the_dagger_dom_right|fact"><span>the_dagger_dom_right</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.the_dagger_dom_left|fact"><span>the_dagger_dom_left</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.the_dagger_mapupd_dom|fact"><span>the_dagger_mapupd_dom</span></a><span>
</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger_upd_dist|fact"><span>dagger_upd_dist</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.antirestr_then_dagger_notin|fact"><span>antirestr_then_dagger_notin</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.antirestr_then_dagger|fact"><span>antirestr_then_dagger</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger_notin_right|fact"><span>dagger_notin_right</span></a><span>
</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger_notin_left|fact"><span>dagger_notin_left</span></a><span>

</span><span class="comment1"><span>(</span><span>*</span><span> +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span> </span><span>Map update weakening lemmas [EXPERT]</span><span> </span><span>‚Ä∫</span></span></span><span>
</span><span class="comment1"><span>(</span><span>*</span><span> +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ </span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span> </span><span>without the condition nitpick finds counter example</span><span> </span><span>‚Ä∫</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_inmapupd_dom_iff|fact"><span class="entity_def" id="VDMToolkit.l_inmapupd_dom_iff|thm"><span>l_inmapupd_dom_iff</span></span></span><span class="main"><span>:</span></span><span>  
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>l</span></span><span> </span><span class="main"><span>‚â†</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span>dom</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚Ü¶</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>full_types</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>domIff</span><span> </span><span>fun_upd_apply</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_inmapupd_dom|fact"><span class="entity_def" id="VDMToolkit.l_inmapupd_dom|thm"><span>l_inmapupd_dom</span></span></span><span class="main"><span>:</span></span><span>  
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>l</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span>dom</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚Ü¶</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>dom_fun_upd</span><span> </span><span>insert_iff</span><span> </span><span>option.distinct</span><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_dom_extend|fact"><span class="entity_def" id="VDMToolkit.l_dom_extend|thm"><span>l_dom_extend</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚àâ</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>‚üπ</span></span><span>  </span><span>dom</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f1</span></span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚Ü¶</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>f1</span></span><span> </span><span class="main"><span>‚à™</span></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>x</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> 
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_updatedom_eq|fact"><span class="entity_def" id="VDMToolkit.l_updatedom_eq|thm"><span>l_updatedom_eq</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span class="main"><span>=</span></span><span class="free"><span>l</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span>the</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚Ü¶</span></span><span> </span><span>the</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>the</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_updatedom_neq|fact"><span class="entity_def" id="VDMToolkit.l_updatedom_neq|thm"><span>l_updatedom_neq</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span class="main"><span>‚â†</span></span><span class="free"><span>l</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span>the</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚Ü¶</span></span><span> </span><span>the</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>the</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="comment1"><span>‚Äï ‚Äπ</span><span>A helper lemma to have map update when domain is updated</span><span>‚Ä∫</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_insertUpdSpec_aux|fact"><span class="entity_def" id="VDMToolkit.l_insertUpdSpec_aux|thm"><span>l_insertUpdSpec_aux</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dom</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>insert</span><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>F</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f0</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><span>|`</span></span><span> </span><span class="free"><span>F</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>f0</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚Ü¶</span></span><span> </span><span>the</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_66810..66816">insert</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dom</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>insert</span><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>F</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><span>|`</span></span><span> </span><span class="free"><span>F</span></span><span class="main"><span>)</span></span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚Ü¶</span></span><span> </span><span>the</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#offset_66810..66816"><span>insert</span></a><span>
         </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><span>dom_def</span><span>
         </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
         </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>ext</span><span class="main"><span>)</span></span><span>
         </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
         </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>


</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_the_map_union_right|fact"><span class="entity_def" id="VDMToolkit.l_the_map_union_right|thm"><span>l_the_map_union_right</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>‚üπ</span></span><span>dom</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>‚à©</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span>the</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.munion|const"><span>‚à™m</span></a></span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>the</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>g</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dagger_apply|fact"><span>l_dagger_apply</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.munion_def|fact"><span>munion_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_the_map_union_left|fact"><span class="entity_def" id="VDMToolkit.l_the_map_union_left|thm"><span>l_the_map_union_left</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>‚üπ</span></span><span>dom</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>‚à©</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span>the</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.munion|const"><span>‚à™m</span></a></span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>the</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dagger_apply|fact"><span>l_dagger_apply</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dagger_commute|fact"><span>l_dagger_commute</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.munion_def|fact"><span>munion_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_the_map_union|fact"><span class="entity_def" id="VDMToolkit.l_the_map_union|thm"><span>l_the_map_union</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dom</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>‚à©</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span>the</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.munion|const"><span>‚à™m</span></a></span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>if</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span>the</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span>the</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>g</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dagger_apply|fact"><span>l_dagger_apply</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dagger_commute|fact"><span>l_dagger_commute</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.munion_def|fact"><span>munion_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.upd_simps|fact"><span class="entity_def" id="VDMToolkit.upd_simps(5)|thm"><span class="entity_def" id="VDMToolkit.upd_simps(4)|thm"><span class="entity_def" id="VDMToolkit.upd_simps(3)|thm"><span class="entity_def" id="VDMToolkit.upd_simps(2)|thm"><span class="entity_def" id="VDMToolkit.upd_simps(1)|thm"><span>upd_simps</span></span></span></span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_inmapupd_dom_iff|fact"><span>l_inmapupd_dom_iff</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_inmapupd_dom|fact"><span>l_inmapupd_dom</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dom_extend|fact"><span>l_dom_extend</span></a><span>
                  </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_updatedom_eq|fact"><span>l_updatedom_eq</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_updatedom_neq|fact"><span>l_updatedom_neq</span></a><span>

</span><span class="comment1"><span>(</span><span>*</span><span> +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span> </span><span>Map union (VDM-specific) weakening lemmas [EXPERT]</span><span> </span><span>‚Ä∫</span></span></span><span>
</span><span class="comment1"><span>(</span><span>*</span><span> +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ </span><span>*</span><span>)</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> Weaken: munion point-wise update well-definedness condition </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.k_munion_map_upd_wd|fact"><span class="entity_def" id="VDMToolkit.k_munion_map_upd_wd|thm"><span>k_munion_map_upd_wd</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚àâ</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>‚à©</span></span><span> </span><span>dom</span><span> </span><span class="main"><span>[</span></span><span class="free"><span>x</span></span><span class="main"><span>‚Ü¶</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>Int_empty_left</span><span> </span><span>Int_insert_left</span><span> </span><span>dom_eq_singleton_conv</span><span> </span><span>inf_commute</span><span class="main"><span>)</span></span><span>
    </span><span class="comment1"><span>(</span><span>*</span><span> NOTE: munion updates are often over singleton sets. This weakening rule 
             states that's enough to show x is not in f to enable the application
             of f ‚à™m [x ‚Ü¶ y].
     </span><span>*</span><span>)</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> Lemma: munion application </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_munion_apply|fact"><span class="entity_def" id="VDMToolkit.l_munion_apply|thm"><span>l_munion_apply</span></span></span><span class="main"><span>:</span></span><span>
	</span><span class="quoted"><span class="quoted"><span>"</span><span>dom</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>‚à©</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.munion|const"><span>‚à™m</span></a></span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>if</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>g</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>g</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.munion_def|fact"><span>munion_def</span></a><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dagger_apply|fact"><span>l_dagger_apply</span></a><span class="main"><span>)</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> Lemma: munion domain </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_munion_dom|fact"><span class="entity_def" id="VDMToolkit.l_munion_dom|thm"><span>l_munion_dom</span></span></span><span class="main"><span>:</span></span><span>
	</span><span class="quoted"><span class="quoted"><span>"</span><span>dom</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>‚à©</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span>dom</span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.munion|const"><span>‚à™m</span></a></span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>‚à™</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>g</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.munion_def|fact"><span>munion_def</span></a><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dagger_dom|fact"><span>l_dagger_dom</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_diff_union|fact"><span class="entity_def" id="VDMToolkit.l_diff_union|thm"><span>l_diff_union</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚à™</span></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><span>‚à™</span></span><span> </span><span class="free"><span>C</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>B</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>C</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>Compl_Diff_eq</span><span> </span><span>Diff_eq</span><span> </span><span>Un_Int_distrib2</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_munion_ran|fact"><span class="entity_def" id="VDMToolkit.l_munion_ran|thm"><span>l_munion_ran</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dom</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>‚à©</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span>ran</span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.munion|const"><span>‚à™m</span></a></span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>ran</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>‚à™</span></span><span> </span><span>ran</span><span> </span><span class="free"><span>g</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>unfold</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.munion_def|fact"><span>munion_def</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>find_theorems</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>_</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger|const"><span>‚Ä†</span></a></span><span> </span><span class="main"><span>_</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>_</span></span><span>"</span></span></span><span>
</span><span class="comment1"><span>(</span><span>*</span><span>apply (simp add: b_dagger_munion)</span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>set_eqI</span><span> </span><span>iffI</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><span>ran_def</span><span> 
</span><span class="keyword1"><span class="command"><span>thm</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dagger_apply|fact"><span>l_dagger_apply</span></a><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dagger_apply|fact"><span>l_dagger_apply</span></a><span> </span><span>split_ifs</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>metis</span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>Int_iff</span><span> </span><span>all_not_in_conv</span><span> </span><span>domIff</span><span> </span><span>option.distinct</span><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> Bridge: dagger defined through munion [ZEVES-LEMMA] </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.b_dagger_munion_aux|fact"><span class="entity_def" id="VDMToolkit.b_dagger_munion_aux|thm"><span>b_dagger_munion_aux</span></span></span><span class="main"><span>:</span></span><span>
	</span><span class="quoted"><span class="quoted"><span>"</span><span>dom</span><span class="main"><span>(</span></span><span>dom</span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚à©</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dom_dom_ar|fact"><span>l_dom_dom_ar</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>Diff_disjoint</span><span> </span><span>inf_commute</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.b_dagger_munion|fact"><span class="entity_def" id="VDMToolkit.b_dagger_munion|thm"><span>b_dagger_munion</span></span></span><span class="main"><span>:</span></span><span>
	</span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger|const"><span>‚Ä†</span></a></span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>dom</span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.munion|const"><span>‚à™m</span></a></span><span> </span><span class="free"><span>g</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>find_theorems</span></span></span><span> </span><span class="main"><span>(</span></span><span>300</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>_</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>_</span></span><span class="main"><span>::</span></span><span class="main"><span>(</span></span><span class="main"><span>_</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>_</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> -name</span><span class="main"><span>:</span></span><span>Predicate -name</span><span class="main"><span>:</span></span><span>Product -name</span><span class="main"><span>:</span></span><span>Quick -name</span><span class="main"><span>:</span></span><span>New -name</span><span class="main"><span>:</span></span><span>Record -name</span><span class="main"><span>:</span></span><span>Quotient
		-name</span><span class="main"><span>:</span></span><span>Hilbert -name</span><span class="main"><span>:</span></span><span>Nitpick -name</span><span class="main"><span>:</span></span><span>Random -name</span><span class="main"><span>:</span></span><span>Transitive -name</span><span class="main"><span>:</span></span><span>Sum_Type -name</span><span class="main"><span>:</span></span><span>DSeq -name</span><span class="main"><span>:</span></span><span>Datatype -name</span><span class="main"><span>:</span></span><span>Enum
		-name</span><span class="main"><span>:</span></span><span>Big -name</span><span class="main"><span>:</span></span><span>Code -name</span><span class="main"><span>:</span></span><span>Divides</span><span>
</span><span class="keyword1"><span class="command"><span>thm</span></span></span><span> </span><span>fun_eq_iff</span><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger|const"><span>‚Ä†</span></a></span><span> </span><span class="free"><span>g</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>dom</span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.munion|const"><span>‚à™m</span></a></span><span> </span><span class="free"><span>g</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>fun_eq_iff</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dagger_apply|fact"><span>l_dagger_apply</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cut_tac</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.b_dagger_munion_aux|fact"><span>b_dagger_munion_aux</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span class="quoted"><span class="free"><span>g</span></span></span></span></span><span> </span><span class="quoted"><span class="free"><span class="quoted"><span class="free"><span>f</span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> </span><span class="comment1"><span>(</span><span>*</span><span> TODO: How to make this more automatic? Iain, help? subgoal_tac! Try that. </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>allI</span><span> </span><span>impI</span><span> </span><span>conjI</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_munion_apply|fact"><span>l_munion_apply</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr_def|fact"><span>dom_antirestr_def</span></a><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>


</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_munion_assoc|fact"><span class="entity_def" id="VDMToolkit.l_munion_assoc|thm"><span>l_munion_assoc</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span>dom</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>‚à©</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>‚à©</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>h</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.munion|const"><span>‚à™m</span></a></span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.munion|const"><span>‚à™m</span></a></span><span> </span><span class="free"><span>h</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.munion|const"><span>‚à™m</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>g</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.munion|const"><span>‚à™m</span></a></span><span> </span><span class="free"><span>h</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.munion_def|fact"><span>munion_def</span></a><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dagger_dom|fact"><span>l_dagger_dom</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>conjI</span><span> </span><span>impI</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dagger_assoc|fact"><span>l_dagger_assoc</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>disjoint_iff_not_equal</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>erule_tac</span></span><span> </span><span class="main"><span class="improper"><span>[</span></span></span><span>1</span><span class="main"><span>-</span></span><span class="main"><span class="improper"><span>]</span></span></span><span> </span><span>bexE</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_munion_commute|fact"><span class="entity_def" id="VDMToolkit.l_munion_commute|thm"><span>l_munion_commute</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span>dom</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>‚à©</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.munion|const"><span>‚à™m</span></a></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.munion|const"><span>‚à™m</span></a></span><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.b_dagger_munion|fact"><span>b_dagger_munion</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dagger_commute|fact"><span>l_dagger_commute</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dom_ar_nothing|fact"><span>l_dom_ar_nothing</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.munion_def|fact"><span>munion_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_munion_subsume|fact"><span class="entity_def" id="VDMToolkit.l_munion_subsume|thm"><span>l_munion_subsume</span></span></span><span class="main"><span>:</span></span><span>
	</span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span>the</span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>{</span></span><span class="free"><span>x</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.munion|const"><span>‚à™m</span></a></span><span> </span><span class="main"><span>[</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚Ü¶</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>fun_eq_iff</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>allI</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subgoal_tac</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dom</span><span class="main"><span>(</span></span><span class="main"><span>{</span></span><span class="free"><span>x</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚à©</span></span><span> </span><span>dom</span><span> </span><span class="main"><span>[</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚Ü¶</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_munion_apply|fact"><span>l_munion_apply</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>domD</span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr_def|fact"><span>dom_antirestr_def</span></a><span> </span><span>singletonE</span><span> </span><span>option.sel</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>Diff_disjoint</span><span> </span><span>Int_commute</span><span> </span><span>dom_eq_singleton_conv</span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dom_dom_ar|fact"><span>l_dom_dom_ar</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>text_raw</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span> </span><span>Perhaps add </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>text</span></span><span> </span><span class="raw_text"><span>"g ‚äÜ<span class="hidden">‚á©</span><sub>m</sub> f"</span></span><span class="antiquote"><span>}</span></span></span><span> instead?</span><span> </span><span>‚Ä∫</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_munion_subsumeG|fact"><span class="entity_def" id="VDMToolkit.l_munion_subsumeG|thm"><span>l_munion_subsumeG</span></span></span><span class="main"><span>:</span></span><span>  
	</span><span class="quoted"><span class="quoted"><span>"</span><span>dom</span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>‚äÜ</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="main"><span>‚àÄ</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>dom</span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.munion|const"><span>‚à™m</span></a></span><span> </span><span class="free"><span>g</span></span><span>"</span></span></span><span>
	
</span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.munion_def|fact"><span>munion_def</span></a><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subgoal_tac</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dom</span><span> </span><span class="main"><span>(</span></span><span>dom</span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚à©</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>fun_eq_iff</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>allI</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dagger_apply|fact"><span>l_dagger_apply</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>conjI</span><span> </span><span>impI</span><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr_def|fact"><span>dom_antirestr_def</span></a><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fold</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr_def|fact"><span>dom_antirestr_def</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>Diff_disjoint</span><span> </span><span>inf_commute</span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dom_dom_ar|fact"><span>l_dom_dom_ar</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_munion_dom_ar_assoc|fact"><span class="entity_def" id="VDMToolkit.l_munion_dom_ar_assoc|thm"><span>l_munion_dom_ar_assoc</span></span></span><span class="main"><span>:</span></span><span>
	</span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>S</span></span><span> </span><span class="main"><span>‚äÜ</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>‚à©</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.munion|const"><span>‚à™m</span></a></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.munion|const"><span>‚à™m</span></a></span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.munion_def|fact"><span>munion_def</span></a><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subgoal_tac</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dom</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚à©</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>defer</span></span></span></span></span><span> 1</span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>Diff_Int_distrib2</span><span> </span><span>empty_Diff</span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dom_dom_ar|fact"><span>l_dom_dom_ar</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dagger_dom_ar_assoc|fact"><span>l_dagger_dom_ar_assoc</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>equalityE</span><span> </span><span>inf_mono</span><span> </span><span>subset_empty</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_munion_empty_rhs|fact"><span class="entity_def" id="VDMToolkit.l_munion_empty_rhs|thm"><span>l_munion_empty_rhs</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.munion|const"><span>‚à™m</span></a></span><span> </span><span>Map.empty</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.munion_def|fact"><span>munion_def</span></a><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>dom_empty</span><span> </span><span>inf_bot_right</span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dagger_empty_rhs|fact"><span>l_dagger_empty_rhs</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_munion_empty_lhs|fact"><span class="entity_def" id="VDMToolkit.l_munion_empty_lhs|thm"><span>l_munion_empty_lhs</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>Map.empty</span><span> </span><span class="keyword1"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.munion|const"><span>‚à™m</span></a></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.munion_def|fact"><span>munion_def</span></a><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>dom_empty</span><span> </span><span>inf_bot_left</span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dagger_empty_lhs|fact"><span>l_dagger_empty_lhs</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.k_finite_munion|fact"><span class="entity_def" id="VDMToolkit.k_finite_munion|thm"><span>k_finite_munion</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="main"><span>(</span></span><span>dom</span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span>finite</span><span class="main"><span>(</span></span><span>dom</span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>‚à©</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span>finite</span><span class="main"><span>(</span></span><span>dom</span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.munion|const"><span>‚à™m</span></a></span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>finite_Un</span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_munion_dom|fact"><span>l_munion_dom</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_munion_singleton_not_empty|fact"><span class="entity_def" id="VDMToolkit.l_munion_singleton_not_empty|thm"><span>l_munion_singleton_not_empty</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚àâ</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.munion|const"><span>‚à™m</span></a></span><span> </span><span class="main"><span>[</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚Ü¶</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>‚â†</span></span><span> </span><span>Map.empty</span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>Map.empty</span><span>"</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_munion_empty_lhs|fact"><span>l_munion_empty_lhs</span></a><span> </span><span>map_upd_nonempty</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.munion_def|fact"><span>munion_def</span></a><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger_def|fact"><span>dagger_def</span></a><span> </span><span>map_add_None</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_munion_empty_iff|fact"><span class="entity_def" id="VDMToolkit.l_munion_empty_iff|thm"><span>l_munion_empty_iff</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span>dom</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>‚à©</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.munion|const"><span>‚à™m</span></a></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>Map.empty</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚ü∑</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>Map.empty</span><span> </span><span class="main"><span>‚àß</span></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>Map.empty</span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>iffI</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>only</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>dom_eq_empty_conv</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_munion_dom|fact"><span>l_munion_dom</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>Un_empty</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_munion_empty_lhs|fact"><span>l_munion_empty_lhs</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_munion_empty_rhs|fact"><span>l_munion_empty_rhs</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_munion_dom_ar_singleton_subsume|fact"><span class="entity_def" id="VDMToolkit.l_munion_dom_ar_singleton_subsume|thm"><span>l_munion_dom_ar_singleton_subsume</span></span></span><span class="main"><span>:</span></span><span> 
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚àâ</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>x</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.munion|const"><span>‚à™m</span></a></span><span> </span><span class="main"><span>[</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚Ü¶</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>fun_eq_iff</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>allI</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr_def|fact"><span>dom_antirestr_def</span></a><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_munion_apply|fact"><span>l_munion_apply</span></a><span class="main"><span>)</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span>
lemmX l_dom_ar_union:
  "S -‚óÉ (f ‚à™m g) = (S -‚óÉ f) ‚à™m (S -‚óÉ g)"
apply (rule ext)
unfolding munion_def
apply (split split_if, intro conjI impI)+
apply (simp_all add: l_dagger_apply)
apply (intro conjI impI)
apply (insert f_dom_ar_subset_dom[of S f])
apply (insert f_dom_ar_subset_dom[of S g])
oops
</span><span>*</span><span>)</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> TODO: rename? </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_munion_upd|fact"><span class="entity_def" id="VDMToolkit.l_munion_upd|thm"><span>l_munion_upd</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dom</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>‚à©</span></span><span> </span><span>dom</span><span> </span><span class="main"><span>[</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚Ü¶</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span>  </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.munion|const"><span>‚à™m</span></a></span><span> </span><span class="main"><span>[</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚Ü¶</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚Ü¶</span></span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
</span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.munion_def|fact"><span>munion_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger_def|fact"><span>dagger_def</span></a><span> </span><span>map_add_empty</span><span> </span><span>map_add_upd</span><span class="main"><span>)</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> TODO: Do I really need these?! </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.munion_notemp_dagger|fact"><span class="entity_def" id="VDMToolkit.munion_notemp_dagger|thm"><span>munion_notemp_dagger</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dom</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>‚à©</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.munion|const"><span>‚à™m</span></a></span><span> </span><span class="free"><span>g</span></span><span class="main"><span>‚â†</span></span><span>Map.empty</span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger|const"><span>‚Ä†</span></a></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>‚â†</span></span><span> </span><span>Map.empty</span><span>"</span></span></span><span> 
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.munion_def|fact"><span>munion_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.dagger_notemp_munion|fact"><span class="entity_def" id="VDMToolkit.dagger_notemp_munion|thm"><span>dagger_notemp_munion</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dom</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>‚à©</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger|const"><span>‚Ä†</span></a></span><span> </span><span class="free"><span>g</span></span><span class="main"><span>‚â†</span></span><span>Map.empty</span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.munion|const"><span>‚à™m</span></a></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>‚â†</span></span><span> </span><span>Map.empty</span><span>"</span></span></span><span> 
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.munion_def|fact"><span>munion_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.munion_notempty_left|fact"><span class="entity_def" id="VDMToolkit.munion_notempty_left|thm"><span>munion_notempty_left</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dom</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>‚à©</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>‚â†</span></span><span> </span><span>Map.empty</span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.munion|const"><span>‚à™m</span></a></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>‚â†</span></span><span> </span><span>Map.empty</span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger_notemp_munion|fact"><span>dagger_notemp_munion</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger_notemptyL|fact"><span>dagger_notemptyL</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.munion_notempty_right|fact"><span class="entity_def" id="VDMToolkit.munion_notempty_right|thm"><span>munion_notempty_right</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dom</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>‚à©</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>‚â†</span></span><span> </span><span>Map.empty</span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.munion|const"><span>‚à™m</span></a></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>‚â†</span></span><span> </span><span>Map.empty</span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger_notemp_munion|fact"><span>dagger_notemp_munion</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger_notemptyR|fact"><span>dagger_notemptyR</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.unionm_in_dom_left|fact"><span class="entity_def" id="VDMToolkit.unionm_in_dom_left|thm"><span>unionm_in_dom_left</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span>dom</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.munion|const"><span>‚à™m</span></a></span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="main"><span>(</span></span><span>dom</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>‚à©</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚àâ</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_munion_dom|fact"><span>l_munion_dom</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.unionm_in_dom_right|fact"><span class="entity_def" id="VDMToolkit.unionm_in_dom_right|thm"><span>unionm_in_dom_right</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span>dom</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.munion|const"><span>‚à™m</span></a></span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="main"><span>(</span></span><span>dom</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>‚à©</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚àâ</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>g</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_munion_dom|fact"><span>l_munion_dom</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.unionm_notin_dom|fact"><span class="entity_def" id="VDMToolkit.unionm_notin_dom|thm"><span>unionm_notin_dom</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚àâ</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚àâ</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="main"><span>(</span></span><span>dom</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>‚à©</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚àâ</span></span><span> </span><span>dom</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.munion|const"><span>‚à™m</span></a></span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.unionm_in_dom_right|fact"><span>unionm_in_dom_right</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.munion_simps|fact"><span class="entity_def" id="VDMToolkit.munion_simps(15)|thm"><span class="entity_def" id="VDMToolkit.munion_simps(14)|thm"><span class="entity_def" id="VDMToolkit.munion_simps(13)|thm"><span class="entity_def" id="VDMToolkit.munion_simps(12)|thm"><span class="entity_def" id="VDMToolkit.munion_simps(11)|thm"><span class="entity_def" id="VDMToolkit.munion_simps(10)|thm"><span class="entity_def" id="VDMToolkit.munion_simps(9)|thm"><span class="entity_def" id="VDMToolkit.munion_simps(8)|thm"><span class="entity_def" id="VDMToolkit.munion_simps(7)|thm"><span class="entity_def" id="VDMToolkit.munion_simps(6)|thm"><span class="entity_def" id="VDMToolkit.munion_simps(5)|thm"><span class="entity_def" id="VDMToolkit.munion_simps(4)|thm"><span class="entity_def" id="VDMToolkit.munion_simps(3)|thm"><span class="entity_def" id="VDMToolkit.munion_simps(2)|thm"><span class="entity_def" id="VDMToolkit.munion_simps(1)|thm"><span>munion_simps</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.k_munion_map_upd_wd|fact"><span>k_munion_map_upd_wd</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_munion_apply|fact"><span>l_munion_apply</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_munion_dom|fact"><span>l_munion_dom</span></a><span>  </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.b_dagger_munion|fact"><span>b_dagger_munion</span></a><span>
</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_munion_subsume|fact"><span>l_munion_subsume</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_munion_subsumeG|fact"><span>l_munion_subsumeG</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_munion_dom_ar_assoc|fact"><span>l_munion_dom_ar_assoc</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_munion_empty_rhs|fact"><span>l_munion_empty_rhs</span></a><span>
</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_munion_empty_lhs|fact"><span>l_munion_empty_lhs</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.k_finite_munion|fact"><span>k_finite_munion</span></a><span>  </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_munion_upd|fact"><span>l_munion_upd</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.munion_notemp_dagger|fact"><span>munion_notemp_dagger</span></a><span>
</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger_notemp_munion|fact"><span>dagger_notemp_munion</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.munion_notempty_left|fact"><span>munion_notempty_left</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.munion_notempty_right|fact"><span>munion_notempty_right</span></a><span>

</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.vdm_simps|fact"><span class="entity_def" id="VDMToolkit.vdm_simps(67)|thm"><span class="entity_def" id="VDMToolkit.vdm_simps(66)|thm"><span class="entity_def" id="VDMToolkit.vdm_simps(65)|thm"><span class="entity_def" id="VDMToolkit.vdm_simps(64)|thm"><span class="entity_def" id="VDMToolkit.vdm_simps(63)|thm"><span class="entity_def" id="VDMToolkit.vdm_simps(62)|thm"><span class="entity_def" id="VDMToolkit.vdm_simps(61)|thm"><span class="entity_def" id="VDMToolkit.vdm_simps(60)|thm"><span class="entity_def" id="VDMToolkit.vdm_simps(59)|thm"><span class="entity_def" id="VDMToolkit.vdm_simps(58)|thm"><span class="entity_def" id="VDMToolkit.vdm_simps(57)|thm"><span class="entity_def" id="VDMToolkit.vdm_simps(56)|thm"><span class="entity_def" id="VDMToolkit.vdm_simps(55)|thm"><span class="entity_def" id="VDMToolkit.vdm_simps(54)|thm"><span class="entity_def" id="VDMToolkit.vdm_simps(53)|thm"><span class="entity_def" id="VDMToolkit.vdm_simps(52)|thm"><span class="entity_def" id="VDMToolkit.vdm_simps(51)|thm"><span class="entity_def" id="VDMToolkit.vdm_simps(50)|thm"><span class="entity_def" id="VDMToolkit.vdm_simps(49)|thm"><span class="entity_def" id="VDMToolkit.vdm_simps(48)|thm"><span class="entity_def" id="VDMToolkit.vdm_simps(47)|thm"><span class="entity_def" id="VDMToolkit.vdm_simps(46)|thm"><span class="entity_def" id="VDMToolkit.vdm_simps(45)|thm"><span class="entity_def" id="VDMToolkit.vdm_simps(44)|thm"><span class="entity_def" id="VDMToolkit.vdm_simps(43)|thm"><span class="entity_def" id="VDMToolkit.vdm_simps(42)|thm"><span class="entity_def" id="VDMToolkit.vdm_simps(41)|thm"><span class="entity_def" id="VDMToolkit.vdm_simps(40)|thm"><span class="entity_def" id="VDMToolkit.vdm_simps(39)|thm"><span class="entity_def" id="VDMToolkit.vdm_simps(38)|thm"><span class="entity_def" id="VDMToolkit.vdm_simps(37)|thm"><span class="entity_def" id="VDMToolkit.vdm_simps(36)|thm"><span class="entity_def" id="VDMToolkit.vdm_simps(35)|thm"><span class="entity_def" id="VDMToolkit.vdm_simps(34)|thm"><span class="entity_def" id="VDMToolkit.vdm_simps(33)|thm"><span class="entity_def" id="VDMToolkit.vdm_simps(32)|thm"><span class="entity_def" id="VDMToolkit.vdm_simps(31)|thm"><span class="entity_def" id="VDMToolkit.vdm_simps(30)|thm"><span class="entity_def" id="VDMToolkit.vdm_simps(29)|thm"><span class="entity_def" id="VDMToolkit.vdm_simps(28)|thm"><span class="entity_def" id="VDMToolkit.vdm_simps(27)|thm"><span class="entity_def" id="VDMToolkit.vdm_simps(26)|thm"><span class="entity_def" id="VDMToolkit.vdm_simps(25)|thm"><span class="entity_def" id="VDMToolkit.vdm_simps(24)|thm"><span class="entity_def" id="VDMToolkit.vdm_simps(23)|thm"><span class="entity_def" id="VDMToolkit.vdm_simps(22)|thm"><span class="entity_def" id="VDMToolkit.vdm_simps(21)|thm"><span class="entity_def" id="VDMToolkit.vdm_simps(20)|thm"><span class="entity_def" id="VDMToolkit.vdm_simps(19)|thm"><span class="entity_def" id="VDMToolkit.vdm_simps(18)|thm"><span class="entity_def" id="VDMToolkit.vdm_simps(17)|thm"><span class="entity_def" id="VDMToolkit.vdm_simps(16)|thm"><span class="entity_def" id="VDMToolkit.vdm_simps(15)|thm"><span class="entity_def" id="VDMToolkit.vdm_simps(14)|thm"><span class="entity_def" id="VDMToolkit.vdm_simps(13)|thm"><span class="entity_def" id="VDMToolkit.vdm_simps(12)|thm"><span class="entity_def" id="VDMToolkit.vdm_simps(11)|thm"><span class="entity_def" id="VDMToolkit.vdm_simps(10)|thm"><span class="entity_def" id="VDMToolkit.vdm_simps(9)|thm"><span class="entity_def" id="VDMToolkit.vdm_simps(8)|thm"><span class="entity_def" id="VDMToolkit.vdm_simps(7)|thm"><span class="entity_def" id="VDMToolkit.vdm_simps(6)|thm"><span class="entity_def" id="VDMToolkit.vdm_simps(5)|thm"><span class="entity_def" id="VDMToolkit.vdm_simps(4)|thm"><span class="entity_def" id="VDMToolkit.vdm_simps(3)|thm"><span class="entity_def" id="VDMToolkit.vdm_simps(2)|thm"><span class="entity_def" id="VDMToolkit.vdm_simps(1)|thm"><span>vdm_simps</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.restr_simps|fact"><span>restr_simps</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.antirestr_simps|fact"><span>antirestr_simps</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger_simps|fact"><span>dagger_simps</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.upd_simps|fact"><span>upd_simps</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.munion_simps|fact"><span>munion_simps</span></a><span>

</span><span class="comment1"><span>(</span><span>*</span><span> +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span> </span><span>Map finiteness weakening lemmas [EXPERT]</span><span> </span><span>‚Ä∫</span></span></span><span>
</span><span class="comment1"><span>(</span><span>*</span><span> +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ </span><span>*</span><span>)</span></span><span>

</span><span class="comment1"><span>‚Äï ‚ÄπNeed to have the lemma options, otherwise it fails somehow‚Ä∫</span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_74525..74530">lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.finite_map_upd_induct|fact"><span class="entity_def" id="VDMToolkit.finite_map_upd_induct|thm"><span>finite_map_upd_induct</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>case_names</span></span><span> empty insert</span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>induct</span></span><span> </span><span class="quasi_keyword"><span class="quasi_keyword"><span class="quasi_keyword"><span>set</span></span></span></span><span class="main"><span class="main"><span class="main"><span class="main"><span>:</span></span></span></span></span><span> </span><span>finite</span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_74610..74613">fin</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="main"><span>(</span></span><span>dom</span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span>empty</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span>Map.empty</span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span>insert</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>‚ãÄ</span></span><span class="bound"><span>e</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="bound"><span>f</span></span><span class="main"><span>.</span></span><span> </span><span>finite</span><span> </span><span class="main"><span>(</span></span><span>dom</span><span> </span><span class="bound"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="bound"><span>e</span></span><span> </span><span class="main"><span>‚àâ</span></span><span> </span><span>dom</span><span> </span><span class="bound"><span>f</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>f</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>f</span></span><span class="main"><span>(</span></span><span class="bound"><span>e</span></span><span> </span><span class="main"><span>‚Ü¶</span></span><span> </span><span class="bound"><span>r</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#offset_74610..74613"><span>fin</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induct</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dom</span><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span>"</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span>finite_induct</span><span class="main"><span>)</span></span><span> </span><span class="comment1"><span>‚Äï ‚Äπ</span><span>arbitrary statement is a must in here, otherwise cannot prove it</span><span>‚Ä∫</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>empty</span><span> </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dom</span><span> </span><span class="skolem"><span>f</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>   </span><span class="comment1"><span>‚Äï ‚Äπ</span><span>need to reverse to apply rules</span><span>‚Ä∫</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>f</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>Map.empty</span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#offset_74525..74530"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span> 
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_75053..75059">insert</span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>F</span></span><span class="main"><span>)</span></span><span>
  </span><span class="comment1"><span>‚Äï ‚Äπ</span><span>Show that update of the domain means an update of the map</span><span>‚Ä∫</span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_75138..75142">domF</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>insert</span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>F</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>dom</span><span> </span><span class="skolem"><span>f</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_75175..75180">domFr</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dom</span><span> </span><span class="skolem"><span>f</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>insert</span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>F</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>f0</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_75234..75239">f0Def</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>f0</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>f</span></span><span> </span><span class="main"><span>|`</span></span><span> </span><span class="skolem"><span>F</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#offset_75138..75142"><span>domF</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>domF0</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>F</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>dom</span><span> </span><span class="skolem"><span>f0</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#offset_75053..75059"><span>insert</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="main"><span>(</span></span><span>dom</span><span> </span><span class="skolem"><span>f0</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>‚àâ</span></span><span> </span><span>dom</span><span> </span><span class="skolem"><span>f0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="skolem"><span>f0</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_75397..75402">PFUpd</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>f0</span></span><span class="main"><span>(</span></span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>‚Ü¶</span></span><span> </span><span>the</span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>f</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#offset_74525..74530"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#offset_75175..75180"><span>domFr</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#offset_75234..75239"><span>f0Def</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>f</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>f0</span></span><span class="main"><span>(</span></span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>‚Ü¶</span></span><span> </span><span>the</span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>f</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_insertUpdSpec_aux|fact"><span>l_insertUpdSpec_aux</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#offset_75397..75402"><span>PFUpd</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.finiteRan|fact"><span class="entity_def" id="VDMToolkit.finiteRan|thm"><span>finiteRan</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="main"><span>(</span></span><span>dom</span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span>finite</span><span> </span><span class="main"><span>(</span></span><span>ran</span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induct</span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.finite_map_upd_induct|fact"><span>finite_map_upd_induct</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>empty</span><span> </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>insert</span><span> </span><span class="skolem"><span>e</span></span><span> </span><span class="skolem"><span>r</span></span><span> </span><span class="skolem"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_75741..75747">ranIns</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>ran</span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>f</span></span><span class="main"><span>(</span></span><span class="skolem"><span>e</span></span><span> </span><span class="main"><span>‚Ü¶</span></span><span> </span><span class="skolem"><span>r</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>insert</span><span> </span><span class="skolem"><span>r</span></span><span> </span><span class="main"><span>(</span></span><span>ran</span><span> </span><span class="skolem"><span>f</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="main"><span>(</span></span><span>ran</span><span> </span><span class="skolem"><span>f</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="main"><span>(</span></span><span>insert</span><span> </span><span class="skolem"><span>r</span></span><span> </span><span class="main"><span>(</span></span><span>ran</span><span> </span><span class="skolem"><span>f</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>finite.insertI</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#offset_75741..75747"><span>ranIns</span></a><span class="main"><span>)</span></span><span>
 </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> TODO: classify; rename; relocate? </span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_dom_r_finite|fact"><span class="entity_def" id="VDMToolkit.l_dom_r_finite|thm"><span>l_dom_r_finite</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="main"><span>(</span></span><span>dom</span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span>finite</span><span> </span><span class="main"><span>(</span></span><span>dom</span><span> </span><span class="main"><span>(</span></span><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_restr|const"><span>‚óÉ</span></a></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule_tac</span></span><span> B</span><span class="main"><span class="main"><span>=</span></span></span><span class="quoted"><span class="quoted"><span>"</span><span>dom</span><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>in</span></span></span></span><span>  </span><span>finite_subset</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dom_r_dom_subseteq|fact"><span>l_dom_r_dom_subseteq</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>assumption</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.dagger_finite|fact"><span class="entity_def" id="VDMToolkit.dagger_finite|thm"><span>dagger_finite</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="main"><span>(</span></span><span>dom</span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span>finite</span><span> </span><span class="main"><span>(</span></span><span>dom</span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span>finite</span><span> </span><span class="main"><span>(</span></span><span>dom</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger|const"><span>‚Ä†</span></a></span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
     </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger_def|fact"><span>dagger_def</span></a><span> </span><span>dom_map_add</span><span> </span><span>finite_Un</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.finite_singleton|fact"><span class="entity_def" id="VDMToolkit.finite_singleton|thm"><span>finite_singleton</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="main"><span>(</span></span><span>dom</span><span> </span><span class="main"><span>[</span></span><span class="free"><span>a</span></span><span> </span><span class="main"><span>‚Ü¶</span></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>dom_eq_singleton_conv</span><span> </span><span>finite.emptyI</span><span> </span><span>finite_insert</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.not_in_dom_ar|fact"><span class="entity_def" id="VDMToolkit.not_in_dom_ar|thm"><span>not_in_dom_ar</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="main"><span>(</span></span><span>dom</span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>‚à©</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span>dom</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span> 
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induct</span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.finite_map_upd_induct|fact"><span>finite_map_upd_induct</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>unfold</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr_def|fact"><span>dom_antirestr_def</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>IntI</span><span> </span><span>domIff</span><span> </span><span>empty_iff</span><span class="main"><span>)</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> LF: why go for induction ? </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.not_in_dom_ar_2|fact"><span class="entity_def" id="VDMToolkit.not_in_dom_ar_2|thm"><span>not_in_dom_ar_2</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="main"><span>(</span></span><span>dom</span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>‚à©</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span>dom</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span> 
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>set_eq_subset</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>conjI</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule_tac</span></span><span class="main"><span class="improper"><span>[</span></span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="improper"><span>]</span></span></span><span> </span><span>subsetI</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dom_ar_not_in_dom|fact"><span>l_dom_ar_not_in_dom</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dom_ar_nothing|fact"><span>l_dom_ar_nothing</span></a><span class="main"><span>)</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> ======== </span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_dom_ar_commute_quickspec|fact"><span class="entity_def" id="VDMToolkit.l_dom_ar_commute_quickspec|thm"><span>l_dom_ar_commute_quickspec</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>T</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>T</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dom_ar_accum|fact"><span>l_dom_ar_accum</span></a><span> </span><span>sup_commute</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_dom_ar_same_subsume_quickspec|fact"><span class="entity_def" id="VDMToolkit.l_dom_ar_same_subsume_quickspec|thm"><span>l_dom_ar_same_subsume_quickspec</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr|const"><span>-‚óÉ</span></a></span><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dom_ar_accum|fact"><span>l_dom_ar_accum</span></a><span> </span><span>sup_idem</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_map_with_range_not_dom_empty|fact"><span class="entity_def" id="VDMToolkit.l_map_with_range_not_dom_empty|thm"><span>l_map_with_range_not_dom_empty</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dom</span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><span>‚â†</span></span><span> </span><span class="main"><span>{}</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span>ran</span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><span>‚â†</span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_map_non_empty_ran_conv|fact"><span>l_map_non_empty_ran_conv</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_map_dom_ran|fact"><span class="entity_def" id="VDMToolkit.l_map_dom_ran|thm"><span>l_map_dom_ran</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dom</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>‚â†</span></span><span> </span><span>None</span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> Sequential composition combinator </span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.seqcomp_def|fact"><span class="entity_def" id="VDMToolkit.seqcomp_def|thm"><span class="entity_def" id="VDMToolkit.seqcomp_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.seqcomp|const"><span>seqcomp</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'a</span></span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword3"><span>(</span></span><span class="keyword3"><span>(</span></span><span>_</span><span class="keyword3"><span>)</span></span><span class="keyword3"><span>/ </span></span><span class="keyword1"><span>;;</span></span><span> </span><span class="keyword3"><span>(</span></span><span>_</span><span class="keyword3"><span>)</span></span><span class="keyword3"><span>/</span></span><span class="keyword1"><span>,</span></span><span> </span><span class="keyword3"><span>(</span></span><span>_</span><span class="keyword3"><span>)</span></span><span class="keyword3"><span>)</span></span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>,</span></span><span> 0</span><span class="main"><span>,</span></span><span> 10</span><span class="main"><span>]</span></span><span> 10</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span class="main"><span class="main"><span class="main"><span>!</span></span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>P</span></span></span></span><span> </span><span class="main"><span class="free"><span>;;</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>Q</span></span></span></span><span class="main"><span class="free"><span>,</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>bst</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span class="keyword1"><span>let</span></span><span> </span><span class="bound"><span>mst</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>P</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>bst</span></span></span></span><span> </span><span class="keyword1"><span>in</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>Q</span></span></span></span><span> </span><span class="bound"><span>mst</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.seqcomps.elims|fact"><span class="entity_def" id="VDMToolkit.seqcomps.induct|fact"><span class="entity_def" id="VDMToolkit.seqcomps.simps|fact"><span class="entity_def" id="VDMToolkit.seqcomps.pelims|fact"><span class="entity_def" id="VDMToolkit.seqcomps.cases|fact"><span class="entity_def" id="VDMToolkit.seqcomps.termination|fact"><span class="entity_def" id="VDMToolkit.seqcomps.pinduct|fact"><span class="entity_def" id="VDMToolkit.seqcomps.psimps|fact"><span class="entity_def" id="VDMToolkit.seqcomps_rel.inducts|fact"><span class="entity_def" id="VDMToolkit.seqcomps_rel.simps|fact"><span class="entity_def" id="VDMToolkit.seqcomps_rel.induct|fact"><span class="entity_def" id="VDMToolkit.seqcomps_rel.cases|fact"><span class="entity_def" id="VDMToolkit.seqcomps_rel.intros|fact"><span class="entity_def" id="VDMToolkit.seqcomps_graph.inducts|fact"><span class="entity_def" id="VDMToolkit.seqcomps_graph.simps|fact"><span class="entity_def" id="VDMToolkit.seqcomps_graph.induct|fact"><span class="entity_def" id="VDMToolkit.seqcomps_graph.cases|fact"><span class="entity_def" id="VDMToolkit.seqcomps_graph.intros|fact"><span class="entity_def" id="VDMToolkit.seqcomps.elims|thm"><span class="entity_def" id="VDMToolkit.seqcomps.induct|thm"><span class="entity_def" id="VDMToolkit.seqcomps.simps(2)|thm"><span class="entity_def" id="VDMToolkit.seqcomps.simps(1)|thm"><span class="entity_def" id="VDMToolkit.seqcomps.pelims|thm"><span class="entity_def" id="VDMToolkit.seqcomps.cases|thm"><span class="entity_def" id="VDMToolkit.seqcomps.termination|thm"><span class="entity_def" id="VDMToolkit.seqcomps.pinduct|thm"><span class="entity_def" id="VDMToolkit.seqcomps.psimps(2)|thm"><span class="entity_def" id="VDMToolkit.seqcomps.psimps(1)|thm"><span class="entity_def" id="VDMToolkit.seqcomps_rel.inducts|thm"><span class="entity_def" id="VDMToolkit.seqcomps_rel.simps|thm"><span class="entity_def" id="VDMToolkit.seqcomps_rel.induct|thm"><span class="entity_def" id="VDMToolkit.seqcomps_rel.cases|thm"><span class="entity_def" id="VDMToolkit.seqcomps_rel.intros|thm"><span class="entity_def" id="VDMToolkit.seqcomps_graph.inducts|thm"><span class="entity_def" id="VDMToolkit.seqcomps_graph.simps|thm"><span class="entity_def" id="VDMToolkit.seqcomps_graph.induct|thm"><span class="entity_def" id="VDMToolkit.seqcomps_graph.cases|thm"><span class="entity_def" id="VDMToolkit.seqcomps_graph.intros(2)|thm"><span class="entity_def" id="VDMToolkit.seqcomps_graph.intros(1)|thm"><span class="entity_def" id="VDMToolkit.seqcomps_def|axiom"><span class="entity_def" id="VDMToolkit.seqcomps_rel_def|axiom"><span class="entity_def" id="VDMToolkit.seqcomps_sumC_def|axiom"><span class="entity_def" id="VDMToolkit.seqcomps_graph_def|axiom"><span class="entity_def" id="VDMToolkit.seqcomps_dom|const"><span class="entity_def" id="VDMToolkit.seqcomps_rel|const"><span class="entity_def" id="VDMToolkit.seqcomps_sumC|const"><span class="entity_def" id="VDMToolkit.seqcomps_graph|const"><span>fun</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.seqcomps|const"><span>seqcomps</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><span>list</span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'a</span></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span>!</span></span></span></span></span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>seqcomps</span></span><span> </span><span class="main"><span>[]</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>bst</span></span></span></span><span>     </span><span class="main"><span>=</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>bst</span></span></span></span><span>"</span></span></span><span> 
</span><span class="main"><span>|</span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span>!</span></span></span></span></span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>seqcomps</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span class="main"><span>#</span></span><span class="free"><span class="bound"><span class="entity"><span>xs</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>bst</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>seqcomps</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs</span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>bst</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 

</span><span class="comment1"><span>(</span><span>*</span><span>
find_consts name:fold

fun
  seqcomps' :: "('a ‚áí 'a) list ‚áí 'a ‚áí 'a" 
  where
  [intro!]: "seqcomps' [] bst     = foldl (Œª b::'a . (Œª a . b)) bst []" 
| [intro!]: "seqcomps' (x#xs) bst = foldl (Œª b . (Œª a . a b)) l " 

primrec foldl :: "('b ‚áí 'a ‚áí 'b) ‚áí 'b ‚áí 'a list ‚áí 'b" where
foldl_Nil:  "foldl f a [] = a" |
foldl_Cons: "foldl f a (x # xs) = foldl f (f a x) xs"
</span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.seqcomps&apos;_def|fact"><span class="entity_def" id="VDMToolkit.seqcomps&apos;_def|thm"><span class="entity_def" id="VDMToolkit.seqcomps&apos;_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="VDMToolkit.seqcomps&apos;|const"><span>seqcomps'</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><span>list</span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="tfree"><span>'a</span></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span class="main"><span class="main"><span class="main"><span>!</span></span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>seqcomps'</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>bst</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>foldl</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Œª</span></span><span> </span><span class="bound"><span>b</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Œª</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>bst</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span>"</span></span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_seq_comp_simp|fact"><span class="entity_def" id="VDMToolkit.l_seq_comp_simp|thm"><span>l_seq_comp_simp</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>P</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.seqcomp|const"><span>;;</span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.seqcomp|const"><span>,</span></a></span><span> </span><span class="free"><span>bst</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>P</span></span><span> </span><span class="free"><span>bst</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.seqcomp_def|fact"><span>seqcomp_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_ranE_frule|fact"><span class="entity_def" id="VDMToolkit.l_ranE_frule|thm"><span>l_ranE_frule</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>e</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span>ran</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="main"><span>‚àÉ</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>Some</span><span> </span><span class="free"><span>e</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><span>ran_def</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>safe</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_ranE_frule&apos;|fact"><span class="entity_def" id="VDMToolkit.l_ranE_frule&apos;|thm"><span>l_ranE_frule'</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>e</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span>ran</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span class="main"><span>‚àÉ</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>e</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>the</span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_ranE_frule|fact"><span>l_ranE_frule</span></a><span> </span><span>option.sel</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_inv_MapTrue|fact"><span class="entity_def" id="VDMToolkit.l_inv_MapTrue|thm"><span>l_inv_MapTrue</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="main"><span>(</span></span><span>dom</span><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span>undefined</span><span> </span><span class="main"><span>‚àâ</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span>undefined</span><span> </span><span class="main"><span>‚àâ</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.rng|const"><span>rng</span></a><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_Map|const"><span>inv_Map</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_True|const"><span>inv_True</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_True|const"><span>inv_True</span></a><span> </span><span class="free"><span>m</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>finite_ran</span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_Map_def|fact"><span>inv_Map_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMSet&apos;_def|fact"><span>inv_VDMSet'_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.rng_def|fact"><span>rng_def</span></a><span class="main"><span>)</span></span><span>  

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_invMap_domr_absorb|fact"><span class="entity_def" id="VDMToolkit.l_invMap_domr_absorb|thm"><span>l_invMap_domr_absorb</span></span></span><span class="main"><span>:</span></span><span>   
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_Map|const"><span>inv_Map</span></a><span> </span><span class="free"><span>di</span></span><span> </span><span class="free"><span>ri</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_Map|const"><span>inv_Map</span></a><span> </span><span class="free"><span>di</span></span><span> </span><span class="free"><span>ri</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_restr|const"><span>‚óÉ</span></a></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_Map_def|fact"><span>inv_Map_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMSet&apos;_defs|fact"><span>inv_VDMSet'_defs</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMSet_def|fact"><span>inv_VDMSet_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>mono_tags</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>domIff</span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.f_in_dom_r_apply_elem|fact"><span>f_in_dom_r_apply_elem</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.f_in_relimg_ran|fact"><span>f_in_relimg_ran</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.finiteRan|fact"><span>finiteRan</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_dom_r_finite|fact"><span>l_dom_r_finite</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.l_in_dom_dom_r|fact"><span>l_in_dom_dom_r</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_inv_Map_on_dom|fact"><span class="entity_def" id="VDMToolkit.l_inv_Map_on_dom|thm"><span>l_inv_Map_on_dom</span></span></span><span class="main"><span>[</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_Map|const"><span>inv_Map</span></a><span> </span><span class="free"><span>inv_Dom</span></span><span> </span><span class="free"><span>inv_Ran</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_SetElems|const"><span>inv_SetElems</span></a><span> </span><span class="free"><span>inv_Dom</span></span><span> </span><span class="main"><span>(</span></span><span>dom</span><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_Map_defs|fact"><span>inv_Map_defs</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_inv_Map_on_ran|fact"><span class="entity_def" id="VDMToolkit.l_inv_Map_on_ran|thm"><span>l_inv_Map_on_ran</span></span></span><span class="main"><span>[</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_Map|const"><span>inv_Map</span></a><span> </span><span class="free"><span>inv_Dom</span></span><span> </span><span class="free"><span>inv_Ran</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_SetElems|const"><span>inv_SetElems</span></a><span> </span><span class="free"><span>inv_Ran</span></span><span> </span><span class="main"><span>(</span></span><span>ran</span><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_Map_defs|fact"><span>inv_Map_defs</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_inv_Map_finite|fact"><span class="entity_def" id="VDMToolkit.l_inv_Map_finite|thm"><span>l_inv_Map_finite</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_Map|const"><span>inv_Map</span></a><span> </span><span class="free"><span>inv_Dom</span></span><span> </span><span class="free"><span>inv_Ran</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span>finite</span><span> </span><span class="main"><span>(</span></span><span>dom</span><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_Map_defs|fact"><span>inv_Map_defs</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.l_invMap_di_absorb|fact"><span class="entity_def" id="VDMToolkit.l_invMap_di_absorb|thm"><span>l_invMap_di_absorb</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span>undefined</span><span> </span><span class="main"><span>‚àâ</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><span>undefined</span><span> </span><span class="main"><span>‚àâ</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.rng|const"><span>rng</span></a><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_Map|const"><span>inv_Map</span></a><span> </span><span class="free"><span>di</span></span><span> </span><span class="free"><span>ri</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><span>‚üπ</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_Map|const"><span>inv_Map</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_True|const"><span>inv_True</span></a><span> </span><span class="free"><span>ri</span></span><span> </span><span class="free"><span>m</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_Map_def|fact"><span>inv_Map_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMSet&apos;_def|fact"><span>inv_VDMSet'_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span>To tidy up or remove</span><span>‚Ä∫</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_narrow_real|const"><span>vdm_narrow_real</span></a><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>4.5</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMRat|type"><span>VDMRat</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_narrow_real|const"><span>vdm_narrow_real</span></a><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>4.5</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMReal|type"><span>VDMReal</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span> </span><span class="numeral"><span>7</span></span><span> </span><span class="keyword1"><span>div</span></span><span>    </span><span class="main"><span>(</span></span><span> </span><span class="numeral"><span>3</span></span><span class="main"><span>::</span></span><span class="main"><span>‚Ñ§</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span>  </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span> </span><span class="numeral"><span>7</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_div|const"><span>vdmdiv</span></a></span><span> </span><span class="main"><span>(</span></span><span> </span><span class="numeral"><span>3</span></span><span class="main"><span>::</span></span><span class="main"><span>‚Ñ§</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span>  </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>-</span></span><span class="numeral"><span>7</span></span><span> </span><span class="keyword1"><span>div</span></span><span>    </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="numeral"><span>3</span></span><span class="main"><span>::</span></span><span class="main"><span>‚Ñ§</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span>  </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>-</span></span><span class="numeral"><span>7</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_div|const"><span>vdmdiv</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="numeral"><span>3</span></span><span class="main"><span>::</span></span><span class="main"><span>‚Ñ§</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span>  </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>-</span></span><span class="numeral"><span>7</span></span><span> </span><span class="keyword1"><span>div</span></span><span>    </span><span class="main"><span>(</span></span><span> </span><span class="numeral"><span>3</span></span><span class="main"><span>::</span></span><span class="main"><span>‚Ñ§</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>-</span></span><span class="numeral"><span>3</span></span><span>"</span></span></span><span> 
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>-</span></span><span class="numeral"><span>7</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_div|const"><span>vdmdiv</span></a></span><span> </span><span class="main"><span>(</span></span><span> </span><span class="numeral"><span>3</span></span><span class="main"><span>::</span></span><span class="main"><span>‚Ñ§</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>-</span></span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span> </span><span class="numeral"><span>7</span></span><span> </span><span class="keyword1"><span>div</span></span><span>    </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="numeral"><span>3</span></span><span class="main"><span>::</span></span><span class="main"><span>‚Ñ§</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>-</span></span><span class="numeral"><span>3</span></span><span>"</span></span></span><span> 
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span> </span><span class="numeral"><span>7</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_div|const"><span>vdmdiv</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="numeral"><span>3</span></span><span class="main"><span>::</span></span><span class="main"><span>‚Ñ§</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>-</span></span><span class="numeral"><span>2</span></span><span>"</span></span></span><span> 

</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span> </span><span class="main"><span>1</span></span><span> </span><span class="keyword1"><span>div</span></span><span>    </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="numeral"><span>2</span></span><span class="main"><span>::</span></span><span class="main"><span>‚Ñ§</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span>"</span></span></span><span>  
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span> </span><span class="main"><span>1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_div|const"><span>vdmdiv</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="numeral"><span>2</span></span><span class="main"><span>::</span></span><span class="main"><span>‚Ñ§</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span>  </span><span class="main"><span>0</span></span><span>"</span></span></span><span>  
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span> </span><span class="keyword1"><span>div</span></span><span>    </span><span class="main"><span>(</span></span><span> </span><span class="numeral"><span>2</span></span><span class="main"><span>::</span></span><span class="main"><span>‚Ñ§</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span>"</span></span></span><span>  
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_div|const"><span>vdmdiv</span></a></span><span> </span><span class="main"><span>(</span></span><span> </span><span class="numeral"><span>2</span></span><span class="main"><span>::</span></span><span class="main"><span>‚Ñ§</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span>  </span><span class="main"><span>0</span></span><span>"</span></span></span><span>  

</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>0</span></span><span> </span><span class="keyword1"><span>div</span></span><span>    </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="numeral"><span>3</span></span><span class="main"><span>::</span></span><span class="main"><span>‚Ñ§</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>0</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_div|const"><span>vdmdiv</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="numeral"><span>3</span></span><span class="main"><span>::</span></span><span class="main"><span>‚Ñ§</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>0</span></span><span> </span><span class="keyword1"><span>div</span></span><span>    </span><span class="main"><span>(</span></span><span> </span><span class="numeral"><span>3</span></span><span class="main"><span>::</span></span><span class="main"><span>‚Ñ§</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>0</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_div|const"><span>vdmdiv</span></a></span><span> </span><span class="main"><span>(</span></span><span> </span><span class="numeral"><span>3</span></span><span class="main"><span>::</span></span><span class="main"><span>‚Ñ§</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span> </span><span class="numeral"><span>7</span></span><span> </span><span class="keyword1"><span>mod</span></span><span>    </span><span class="main"><span>(</span></span><span> </span><span class="numeral"><span>3</span></span><span class="main"><span>::</span></span><span class="main"><span>‚Ñ§</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span>  </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span> </span><span class="numeral"><span>7</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_mod|const"><span>vdmmod</span></a></span><span> </span><span class="main"><span>(</span></span><span> </span><span class="numeral"><span>3</span></span><span class="main"><span>::</span></span><span class="main"><span>‚Ñ§</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span>  </span><span class="main"><span>1</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>-</span></span><span class="numeral"><span>7</span></span><span> </span><span class="keyword1"><span>mod</span></span><span>    </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="numeral"><span>3</span></span><span class="main"><span>::</span></span><span class="main"><span>‚Ñ§</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>-</span></span><span class="numeral"><span>7</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_mod|const"><span>vdmmod</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="numeral"><span>3</span></span><span class="main"><span>::</span></span><span class="main"><span>‚Ñ§</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>-</span></span><span class="numeral"><span>7</span></span><span> </span><span class="keyword1"><span>mod</span></span><span>    </span><span class="main"><span>(</span></span><span> </span><span class="numeral"><span>3</span></span><span class="main"><span>::</span></span><span class="main"><span>‚Ñ§</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span>  </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>-</span></span><span class="numeral"><span>7</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_mod|const"><span>vdmmod</span></a></span><span> </span><span class="main"><span>(</span></span><span> </span><span class="numeral"><span>3</span></span><span class="main"><span>::</span></span><span class="main"><span>‚Ñ§</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span>  </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span> </span><span class="numeral"><span>7</span></span><span> </span><span class="keyword1"><span>mod</span></span><span>    </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="numeral"><span>3</span></span><span class="main"><span>::</span></span><span class="main"><span>‚Ñ§</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>-</span></span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span> </span><span class="numeral"><span>7</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_mod|const"><span>vdmmod</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="numeral"><span>3</span></span><span class="main"><span>::</span></span><span class="main"><span>‚Ñ§</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>-</span></span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span> </span><span class="numeral"><span>7</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_mod|const"><span>vdmmod</span></a></span><span> </span><span class="main"><span>(</span></span><span> </span><span class="numeral"><span>3</span></span><span class="main"><span>::</span></span><span class="main"><span>‚Ñ§</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span>  </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>-</span></span><span class="numeral"><span>7</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_mod|const"><span>vdmmod</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="numeral"><span>3</span></span><span class="main"><span>::</span></span><span class="main"><span>‚Ñ§</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>-</span></span><span class="numeral"><span>7</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_mod|const"><span>vdmmod</span></a></span><span> </span><span class="main"><span>(</span></span><span> </span><span class="numeral"><span>3</span></span><span class="main"><span>::</span></span><span class="main"><span>‚Ñ§</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span>  </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span> 
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span> </span><span class="numeral"><span>7</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_mod|const"><span>vdmmod</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="numeral"><span>3</span></span><span class="main"><span>::</span></span><span class="main"><span>‚Ñ§</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>-</span></span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span> </span><span class="numeral"><span>7</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_rem|const"><span>vdmrem</span></a></span><span> </span><span class="main"><span>(</span></span><span> </span><span class="numeral"><span>3</span></span><span class="main"><span>::</span></span><span class="main"><span>‚Ñ§</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span>  </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>-</span></span><span class="numeral"><span>7</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_rem|const"><span>vdmrem</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="numeral"><span>3</span></span><span class="main"><span>::</span></span><span class="main"><span>‚Ñ§</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>-</span></span><span class="numeral"><span>7</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_rem|const"><span>vdmrem</span></a></span><span> </span><span class="main"><span>(</span></span><span> </span><span class="numeral"><span>3</span></span><span class="main"><span>::</span></span><span class="main"><span>‚Ñ§</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span>"</span></span></span><span> 
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span> </span><span class="numeral"><span>7</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_rem|const"><span>vdmrem</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="numeral"><span>3</span></span><span class="main"><span>::</span></span><span class="main"><span>‚Ñ§</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span>  </span><span class="main"><span>1</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inds0|const"><span>inds0</span></a><span> </span><span class="main"><span>[</span></span><span class="free"><span>A</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>C</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>nths</span><span> </span><span class="main"><span>[</span></span><span class="main"><span>1</span></span><span class="main"><span>,</span></span><span class="numeral"><span>2</span></span><span class="main"><span>,</span></span><span class="main"><span>(</span></span><span class="numeral"><span>3</span></span><span class="main"><span>::</span></span><span>nat</span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>{</span></span><span class="numeral"><span>2</span></span><span class="main"><span>..</span></span><span class="numeral"><span>3</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span>lemma "s$${l..u} = subSeq s {l..u}" </span><span>*</span><span>)</span></span><span>
</span><span class="comment1"><span>(</span><span>*</span><span> negatives give funny result, as nat -4 = 0 and nat -1 = 0! </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>nths</span><span> </span><span class="main"><span>[</span></span><span class="free"><span>A</span></span><span class="main"><span>,</span></span><span class="free"><span>B</span></span><span class="main"><span>,</span></span><span class="free"><span>C</span></span><span class="main"><span>,</span></span><span class="free"><span>D</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span>nat</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>..</span></span><span class="main"><span>(</span></span><span>nat</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="numeral"><span>4</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>nths</span><span> </span><span class="main"><span>[</span></span><span class="free"><span>A</span></span><span class="main"><span>,</span></span><span class="free"><span>B</span></span><span class="main"><span>,</span></span><span class="free"><span>C</span></span><span class="main"><span>,</span></span><span class="free"><span>D</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span>nat</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="numeral"><span>4</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>..</span></span><span class="main"><span>(</span></span><span>nat</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>[</span></span><span class="free"><span>A</span></span><span class="main"><span>,</span></span><span class="free"><span>B</span></span><span class="main"><span>,</span></span><span class="free"><span>C</span></span><span class="main"><span>,</span></span><span class="free"><span>D</span></span><span class="main"><span>]</span></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq&apos;|const"><span>$$$</span></a></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq&apos;|const"><span>{</span></a></span><span class="main"><span>-</span></span><span class="numeral"><span>4</span></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq&apos;|const"><span>..</span></a></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq&apos;|const"><span>}</span></a></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>[</span></span><span class="free"><span>A</span></span><span class="main"><span>,</span></span><span class="free"><span>B</span></span><span class="main"><span>,</span></span><span class="free"><span>C</span></span><span class="main"><span>,</span></span><span class="free"><span>D</span></span><span class="main"><span>]</span></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq&apos;|const"><span>$$$</span></a></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq&apos;|const"><span>{</span></a></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq&apos;|const"><span>..</span></a></span><span class="main"><span>-</span></span><span class="numeral"><span>4</span></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq&apos;|const"><span>}</span></a></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>[</span></span><span class="free"><span>A</span></span><span class="main"><span>,</span></span><span class="free"><span>B</span></span><span class="main"><span>,</span></span><span class="free"><span>C</span></span><span class="main"><span>,</span></span><span class="free"><span>D</span></span><span class="main"><span>,</span></span><span class="free"><span>E</span></span><span class="main"><span>]</span></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq&apos;|const"><span>$$$</span></a></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq&apos;|const"><span>{</span></a></span><span class="numeral"><span>4</span></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq&apos;|const"><span>..</span></a></span><span class="main"><span>1</span></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq&apos;|const"><span>}</span></a></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>[</span></span><span class="free"><span>A</span></span><span class="main"><span>,</span></span><span class="free"><span>B</span></span><span class="main"><span>,</span></span><span class="free"><span>C</span></span><span class="main"><span>,</span></span><span class="free"><span>D</span></span><span class="main"><span>,</span></span><span class="free"><span>E</span></span><span class="main"><span>]</span></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq&apos;|const"><span>$$$</span></a></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq&apos;|const"><span>{</span></a></span><span class="main"><span>1</span></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq&apos;|const"><span>..</span></a></span><span class="numeral"><span>5</span></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq&apos;|const"><span>}</span></a></span><span>"</span></span></span><span> </span><span class="comment1"><span>(</span><span>*</span><span> 5-1+1</span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>[</span></span><span class="free"><span>A</span></span><span class="main"><span>,</span></span><span class="free"><span>B</span></span><span class="main"><span>,</span></span><span class="free"><span>C</span></span><span class="main"><span>,</span></span><span class="free"><span>D</span></span><span class="main"><span>,</span></span><span class="free"><span>E</span></span><span class="main"><span>]</span></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq&apos;|const"><span>$$$</span></a></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq&apos;|const"><span>{</span></a></span><span class="numeral"><span>2</span></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq&apos;|const"><span>..</span></a></span><span class="numeral"><span>5</span></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq&apos;|const"><span>}</span></a></span><span>"</span></span></span><span> </span><span class="comment1"><span>(</span><span>*</span><span> 5-2+1</span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>[</span></span><span class="free"><span>A</span></span><span class="main"><span>,</span></span><span class="free"><span>B</span></span><span class="main"><span>,</span></span><span class="free"><span>C</span></span><span class="main"><span>,</span></span><span class="free"><span>D</span></span><span class="main"><span>,</span></span><span class="free"><span>E</span></span><span class="main"><span>]</span></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq&apos;|const"><span>$$$</span></a></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq&apos;|const"><span>{</span></a></span><span class="main"><span>1</span></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq&apos;|const"><span>..</span></a></span><span class="numeral"><span>3</span></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq&apos;|const"><span>}</span></a></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>[</span></span><span class="free"><span>A</span></span><span class="main"><span>,</span></span><span class="free"><span>B</span></span><span class="main"><span>,</span></span><span class="free"><span>C</span></span><span class="main"><span>,</span></span><span class="free"><span>D</span></span><span class="main"><span>,</span></span><span class="free"><span>E</span></span><span class="main"><span>]</span></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq&apos;|const"><span>$$$</span></a></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq&apos;|const"><span>{</span></a></span><span class="main"><span>0</span></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq&apos;|const"><span>..</span></a></span><span class="numeral"><span>2</span></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq&apos;|const"><span>}</span></a></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>[</span></span><span class="free"><span>A</span></span><span class="main"><span>,</span></span><span class="free"><span>B</span></span><span class="main"><span>,</span></span><span class="free"><span>C</span></span><span class="main"><span>,</span></span><span class="free"><span>D</span></span><span class="main"><span>,</span></span><span class="free"><span>E</span></span><span class="main"><span>]</span></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq&apos;|const"><span>$$$</span></a></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq&apos;|const"><span>{</span></a></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq&apos;|const"><span>..</span></a></span><span class="numeral"><span>2</span></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq&apos;|const"><span>}</span></a></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>[</span></span><span class="free"><span>A</span></span><span class="main"><span>,</span></span><span class="free"><span>B</span></span><span class="main"><span>,</span></span><span class="free"><span>C</span></span><span class="main"><span>,</span></span><span class="free"><span>D</span></span><span class="main"><span>,</span></span><span class="free"><span>E</span></span><span class="main"><span>]</span></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq&apos;|const"><span>$$$</span></a></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq&apos;|const"><span>{</span></a></span><span class="main"><span>-</span></span><span class="numeral"><span>10</span></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq&apos;|const"><span>..</span></a></span><span class="numeral"><span>20</span></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq&apos;|const"><span>}</span></a></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>[</span></span><span class="free"><span>A</span></span><span class="main"><span>,</span></span><span class="free"><span>B</span></span><span class="main"><span>,</span></span><span class="free"><span>C</span></span><span class="main"><span>,</span></span><span class="free"><span>D</span></span><span class="main"><span>,</span></span><span class="free"><span>E</span></span><span class="main"><span>]</span></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq&apos;|const"><span>$$$</span></a></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq&apos;|const"><span>{</span></a></span><span class="numeral"><span>2</span></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq&apos;|const"><span>..</span></a></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq&apos;|const"><span>}</span></a></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>[</span></span><span class="free"><span>A</span></span><span class="main"><span>,</span></span><span class="free"><span>B</span></span><span class="main"><span>,</span></span><span class="free"><span>C</span></span><span class="main"><span>,</span></span><span class="free"><span>D</span></span><span class="main"><span>,</span></span><span class="free"><span>E</span></span><span class="main"><span>]</span></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq&apos;|const"><span>$$$</span></a></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq&apos;|const"><span>{</span></a></span><span class="numeral"><span>2</span></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq&apos;|const"><span>..</span></a></span><span class="numeral"><span>2</span></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq&apos;|const"><span>}</span></a></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>[</span></span><span class="free"><span>A</span></span><span class="main"><span>,</span></span><span class="free"><span>B</span></span><span class="main"><span>,</span></span><span class="free"><span>C</span></span><span class="main"><span>,</span></span><span class="free"><span>D</span></span><span class="main"><span>,</span></span><span class="free"><span>E</span></span><span class="main"><span>]</span></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq&apos;|const"><span>$$$</span></a></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq&apos;|const"><span>{</span></a></span><span class="main"><span>0</span></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq&apos;|const"><span>..</span></a></span><span class="main"><span>1</span></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq&apos;|const"><span>}</span></a></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len|const"><span>len</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>[</span></span><span class="free"><span>A</span></span><span class="main"><span>,</span></span><span class="free"><span>B</span></span><span class="main"><span>,</span></span><span class="free"><span>C</span></span><span class="main"><span>,</span></span><span class="free"><span>D</span></span><span class="main"><span>,</span></span><span class="free"><span>E</span></span><span class="main"><span>]</span></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq&apos;|const"><span>$$$</span></a></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq&apos;|const"><span>{</span></a></span><span class="numeral"><span>2</span></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq&apos;|const"><span>..</span></a></span><span class="numeral"><span>2</span></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq&apos;|const"><span>}</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len|const"><span>len</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>[</span></span><span class="free"><span>A</span></span><span class="main"><span>]</span></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq&apos;|const"><span>$$$</span></a></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq&apos;|const"><span>{</span></a></span><span class="numeral"><span>2</span></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq&apos;|const"><span>..</span></a></span><span class="numeral"><span>2</span></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq&apos;|const"><span>}</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span class="main"><span>::</span></span><span>int</span><span class="main"><span>)</span></span><span class="main"><span>..</span></span><span class="numeral"><span>2</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>[</span></span><span class="free"><span>A</span></span><span class="main"><span>,</span></span><span class="free"><span>B</span></span><span class="main"><span>,</span></span><span class="free"><span>C</span></span><span class="main"><span>,</span></span><span class="free"><span>D</span></span><span class="main"><span>,</span></span><span class="free"><span>E</span></span><span class="main"><span>]</span></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq&apos;|const"><span>$$$</span></a></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq&apos;|const"><span>{</span></a></span><span class="main"><span>0</span></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq&apos;|const"><span>..</span></a></span><span class="main"><span>0</span></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq&apos;|const"><span>}</span></a></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>find_theorems</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>{</span></span><span class="main"><span>_</span></span><span class="main"><span>..</span></span><span class="main"><span>_</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span> </span><span>Set translations: enumeration, comprehension, ranges</span><span> </span><span>‚Ä∫</span></span></span><span>
  
</span><span class="comment1"><span>(</span><span>*</span><span> { expr | var . filter }, { var ‚àà type . filter }, { var . filter } </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>+</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>|</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>::</span></span><span>nat</span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span class="numeral"><span>2</span></span><span class="main"><span>,</span></span><span class="numeral"><span>3</span></span><span class="main"><span>,</span></span><span class="numeral"><span>4</span></span><span class="main"><span>,</span></span><span class="numeral"><span>5</span></span><span class="main"><span>,</span></span><span class="numeral"><span>6</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>}</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>+</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>|</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>::</span></span><span>nat</span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span class="numeral"><span>2</span></span><span class="main"><span>,</span></span><span class="numeral"><span>3</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>}</span></span><span>"</span></span></span><span>
</span><span class="comment1"><span>(</span><span>*</span><span>value "{ x+x | x . x ‚àà {(1::nat)..3} }" --"not always work"</span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..</span></span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span class="main"><span>::</span></span><span>int</span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>  
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="main"><span>(</span></span><span class="numeral"><span>3</span></span><span class="main"><span>::</span></span><span>int</span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>  
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>&lt;..&lt;</span></span><span class="main"><span>(</span></span><span class="numeral"><span>3</span></span><span class="main"><span>::</span></span><span>int</span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>  

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span> </span><span>Seq translations: enumeration, comprehension, ranges</span><span> </span><span>‚Ä∫</span></span></span><span>
  
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span> </span><span class="main"><span>[</span></span><span class="free"><span>A</span></span><span class="main"><span>,</span></span><span class="free"><span>B</span></span><span class="main"><span>,</span></span><span class="free"><span>C</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>|</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>,</span></span><span class="main"><span>1</span></span><span class="main"><span>,</span></span><span class="numeral"><span>2</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>}</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span> </span><span class="main"><span>[</span></span><span class="free"><span>A</span></span><span class="main"><span>,</span></span><span class="free"><span>B</span></span><span class="main"><span>,</span></span><span class="free"><span>C</span></span><span class="main"><span>,</span></span><span class="free"><span>D</span></span><span class="main"><span>,</span></span><span class="free"><span>E</span></span><span class="main"><span>,</span></span><span class="free"><span>F</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>|</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>,</span></span><span class="numeral"><span>2</span></span><span class="main"><span>,</span></span><span class="numeral"><span>4</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>}</span></span><span>"</span></span></span><span>
</span><span class="comment1"><span>(</span><span>*</span><span> { s(i) | i in set inds s &amp; i mod 2 = 0 } </span><span>*</span><span>)</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> List application (i.e. s(x)) is available in Isabelle, but is zero based </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>[</span></span><span class="free"><span>A</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>C</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>[</span></span><span class="free"><span>A</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>C</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>[</span></span><span class="free"><span>A</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>C</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>[</span></span><span class="free"><span>A</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>C</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="numeral"><span>3</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>nth</span><span> </span><span class="main"><span>[</span></span><span class="free"><span>A</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>C</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyList|const"><span>applyList</span></a><span> </span><span class="main"><span>[</span></span><span class="free"><span>A</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="comment1"><span>‚Äï ‚Äπ</span><span>out of range</span><span>‚Ä∫</span></span><span>
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyList|const"><span>applyList</span></a><span> </span><span class="main"><span>[</span></span><span class="free"><span>A</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyList|const"><span>applyList</span></a><span> </span><span class="main"><span>[</span></span><span class="free"><span>A</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>]</span></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyList|const"><span>applyList</span></a><span> </span><span class="main"><span>[</span></span><span class="free"><span>A</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>]</span></span><span> </span><span class="numeral"><span>3</span></span><span>"</span></span></span><span> </span><span class="comment1"><span>‚Äï ‚Äπ</span><span>out of range</span><span>‚Ä∫</span></span><span>

</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>[</span></span><span class="free"><span>A</span></span><span class="main"><span>,</span></span><span class="free"><span>B</span></span><span class="main"><span>,</span></span><span class="free"><span>C</span></span><span class="main"><span>,</span></span><span class="free"><span>D</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSeq|const"><span>$</span></a></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>  
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>[</span></span><span class="free"><span>A</span></span><span class="main"><span>,</span></span><span class="free"><span>B</span></span><span class="main"><span>,</span></span><span class="free"><span>C</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSeq|const"><span>$</span></a></span><span> </span><span class="numeral"><span>4</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSeq_defs|fact"><span>applyVDMSeq_defs</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="keyword1"><span class="command"><span>oops</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>[</span></span><span class="free"><span>A</span></span><span class="main"><span>,</span></span><span class="free"><span>B</span></span><span class="main"><span>,</span></span><span class="free"><span>C</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSeq|const"><span>$</span></a></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSeq_defs|fact"><span>applyVDMSeq_defs</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>   

</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>[</span></span><span class="free"><span>a</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSeq|const"><span>$</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len|const"><span>len</span></a><span> </span><span class="main"><span>[</span></span><span class="main"><span>(</span></span><span class="free"><span>a</span></span><span class="main"><span>::</span></span><span>nat</span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>[</span></span><span class="free"><span>A</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSeq|const"><span>$</span></a></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="comment1"><span>‚Äï ‚Äπ</span><span>out of range</span><span>‚Ä∫</span></span><span>
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>[</span></span><span class="free"><span>A</span></span><span class="main"><span>,</span></span><span class="free"><span>B</span></span><span class="main"><span>]</span></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSeq|const"><span>$</span></a></span><span class="main"><span>1</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>[</span></span><span class="free"><span>A</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>]</span></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSeq|const"><span>$</span></a></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>[</span></span><span class="free"><span>A</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>]</span></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSeq|const"><span>$</span></a></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>[</span></span><span class="free"><span>A</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>]</span></span><span class="main"><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSeq|const"><span>$</span></a></span><span> </span><span class="numeral"><span>3</span></span><span>"</span></span></span><span> </span><span class="comment1"><span>‚Äï  ‚Äπ</span><span>out of range</span><span>‚Ä∫</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> List comprehension </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span> </span><span class="main"><span>[</span></span><span class="free"><span>A</span></span><span class="main"><span>,</span></span><span class="free"><span>B</span></span><span class="main"><span>,</span></span><span class="free"><span>C</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>|</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>,</span></span><span class="main"><span>1</span></span><span class="main"><span>,</span></span><span class="numeral"><span>2</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>}</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>[</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>.</span></span><span> x </span><span class="main"><span>‚Üê</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>0</span></span><span class="main"><span>,</span></span><span class="main"><span>1</span></span><span class="main"><span>,</span></span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span class="main"><span>::</span></span><span>int</span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>]</span></span><span>"</span></span></span><span> </span><span class="comment1"><span>(</span><span>*</span><span>avoid if possible... </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>[</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>.</span></span><span> x </span><span class="main"><span>‚Üê</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>0</span></span><span> </span><span class="main"><span>..</span></span><span> </span><span class="numeral"><span>3</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>]</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len|const"><span>len</span></a><span> </span><span class="main"><span>[</span></span><span class="free"><span>A</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>C</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.elems|const"><span>elems</span></a><span> </span><span class="main"><span>[</span></span><span class="free"><span>A</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>C</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.elems|const"><span>elems</span></a><span> </span><span class="main"><span>[</span></span><span class="main"><span>(</span></span><span class="main"><span>0</span></span><span class="main"><span>::</span></span><span>nat</span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>,</span></span><span> </span><span class="numeral"><span>2</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inds|const"><span>inds</span></a><span> </span><span class="main"><span>[</span></span><span class="free"><span>A</span></span><span class="main"><span>,</span></span><span class="free"><span>B</span></span><span class="main"><span>,</span></span><span class="free"><span>C</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inds_as_nat|const"><span>inds_as_nat</span></a><span> </span><span class="main"><span>[</span></span><span class="free"><span>A</span></span><span class="main"><span>,</span></span><span class="free"><span>B</span></span><span class="main"><span>,</span></span><span class="free"><span>C</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.elems|const"><span>elems</span></a><span> </span><span class="main"><span>[</span></span><span class="numeral"><span>10</span></span><span class="main"><span>,</span></span><span> </span><span class="numeral"><span>20</span></span><span class="main"><span>,</span></span><span> </span><span class="numeral"><span>30</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>,</span></span><span> </span><span class="numeral"><span>2</span></span><span class="main"><span>,</span></span><span> </span><span class="numeral"><span>3</span></span><span class="main"><span>,</span></span><span> </span><span class="numeral"><span>4</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>5</span></span><span class="main"><span>::</span></span><span>nat</span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span> </span><span class="numeral"><span>10</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len|const"><span>len</span></a><span> </span><span class="main"><span>[</span></span><span class="numeral"><span>10</span></span><span class="main"><span>,</span></span><span> </span><span class="numeral"><span>20</span></span><span class="main"><span>,</span></span><span> </span><span class="numeral"><span>30</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>,</span></span><span> </span><span class="numeral"><span>2</span></span><span class="main"><span>,</span></span><span> </span><span class="numeral"><span>3</span></span><span class="main"><span>,</span></span><span> </span><span class="numeral"><span>4</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>5</span></span><span class="main"><span>::</span></span><span>nat</span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span> </span><span class="numeral"><span>10</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>
  
</span><span class="comment1"><span>(</span><span>*</span><span> MySeq = seq of nat1
   inv s == len s ‚â§ 9 and card(elem s) = len s and (forall i in set elems s . i ‚â§ 9)</span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>type_synonym</span></span></span><span> </span><span class="entity_def" id="VDMToolkit.MySeq|type"><span>MySeq</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDMNat1|type"><span>VDMNat1</span></a><span> </span><span>list</span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDMToolkit.inv_MySeq_def|fact"><span class="entity_def" id="VDMToolkit.inv_MySeq_def|thm"><span class="entity_def" id="VDMToolkit.inv_MySeq_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
   </span><span class="entity"><span class="entity_def" id="VDMToolkit.inv_MySeq|const"><span>inv_MySeq</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.MySeq|type"><span>MySeq</span></a><span> </span><span class="main"><span>‚áí</span></span><span> </span><span class="main"><span>ùîπ</span></span><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
   </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>inv_MySeq</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>‚â°</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_SeqElems|const"><span>inv_SeqElems</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMNat1|const"><span>inv_VDMNat1</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>‚àß</span></span><span> 
                  </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len|const"><span>len</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>‚â§</span></span><span> </span><span class="numeral"><span>9</span></span><span> </span><span class="main"><span>‚àß</span></span><span> </span><span>int</span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.elems|const"><span>elems</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len|const"><span>len</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>‚àß</span></span><span>
                  </span><span class="main"><span>(</span></span><span class="main"><span>‚àÄ</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>‚àà</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.elems|const"><span>elems</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>‚àß</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>‚â§</span></span><span> </span><span class="numeral"><span>9</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_MySeq|const"><span>inv_MySeq</span></a><span> </span><span class="main"><span>[</span></span><span class="main"><span>1</span></span><span class="main"><span>,</span></span><span> </span><span class="numeral"><span>2</span></span><span class="main"><span>,</span></span><span> </span><span class="numeral"><span>3</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span>VDM PO layered expansion-proof strategy setup</span><span>‚Ä∫</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‚Äπ</span><span>I use various theorem tags to step-wise expand-simplify VDM goals</span><span>‚Ä∫</span></span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span>TODO: this needs loads of experimentation for fine tuning </span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>named_theorems</span></span></span><span> 
  </span><span class="entity_def" id="VDMToolkit.VDM_basic_defs|attribute"><span class="entity_def" id="VDMToolkit.VDM_basic_defs|fact"><span>VDM_basic_defs</span></span></span><span>      </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>

  </span><span class="entity_def" id="VDMToolkit.VDM_num_defs|attribute"><span class="entity_def" id="VDMToolkit.VDM_num_defs|fact"><span>VDM_num_defs</span></span></span><span>        </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
  </span><span class="entity_def" id="VDMToolkit.VDM_num_fcns|attribute"><span class="entity_def" id="VDMToolkit.VDM_num_fcns|fact"><span>VDM_num_fcns</span></span></span><span>        </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
  </span><span class="entity_def" id="VDMToolkit.VDM_num_spec_pre|attribute"><span class="entity_def" id="VDMToolkit.VDM_num_spec_pre|fact"><span>VDM_num_spec_pre</span></span></span><span>    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
  </span><span class="entity_def" id="VDMToolkit.VDM_num_spec_post|attribute"><span class="entity_def" id="VDMToolkit.VDM_num_spec_post|fact"><span>VDM_num_spec_post</span></span></span><span>   </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
  </span><span class="entity_def" id="VDMToolkit.VDM_num_spec|attribute"><span class="entity_def" id="VDMToolkit.VDM_num_spec|fact"><span>VDM_num_spec</span></span></span><span>        </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
  </span><span class="entity_def" id="VDMToolkit.VDM_num|attribute"><span class="entity_def" id="VDMToolkit.VDM_num|fact"><span>VDM_num</span></span></span><span>             </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>

  </span><span class="entity_def" id="VDMToolkit.VDM_set_defs|attribute"><span class="entity_def" id="VDMToolkit.VDM_set_defs|fact"><span>VDM_set_defs</span></span></span><span>        </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
  </span><span class="entity_def" id="VDMToolkit.VDM_set_fcns|attribute"><span class="entity_def" id="VDMToolkit.VDM_set_fcns|fact"><span>VDM_set_fcns</span></span></span><span>        </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
  </span><span class="entity_def" id="VDMToolkit.VDM_set_spec_pre|attribute"><span class="entity_def" id="VDMToolkit.VDM_set_spec_pre|fact"><span>VDM_set_spec_pre</span></span></span><span>    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
  </span><span class="entity_def" id="VDMToolkit.VDM_set_spec_post|attribute"><span class="entity_def" id="VDMToolkit.VDM_set_spec_post|fact"><span>VDM_set_spec_post</span></span></span><span>   </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
  </span><span class="entity_def" id="VDMToolkit.VDM_set_spec|attribute"><span class="entity_def" id="VDMToolkit.VDM_set_spec|fact"><span>VDM_set_spec</span></span></span><span>        </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
  </span><span class="entity_def" id="VDMToolkit.VDM_set|attribute"><span class="entity_def" id="VDMToolkit.VDM_set|fact"><span>VDM_set</span></span></span><span>             </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>

  </span><span class="entity_def" id="VDMToolkit.VDM_seq_defs|attribute"><span class="entity_def" id="VDMToolkit.VDM_seq_defs|fact"><span>VDM_seq_defs</span></span></span><span>        </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
  </span><span class="entity_def" id="VDMToolkit.VDM_seq_fcns_1|attribute"><span class="entity_def" id="VDMToolkit.VDM_seq_fcns_1|fact"><span>VDM_seq_fcns_1</span></span></span><span>      </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
  </span><span class="entity_def" id="VDMToolkit.VDM_seq_fcns_2|attribute"><span class="entity_def" id="VDMToolkit.VDM_seq_fcns_2|fact"><span>VDM_seq_fcns_2</span></span></span><span>      </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
  </span><span class="entity_def" id="VDMToolkit.VDM_seq_fcns_3|attribute"><span class="entity_def" id="VDMToolkit.VDM_seq_fcns_3|fact"><span>VDM_seq_fcns_3</span></span></span><span>      </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
  </span><span class="entity_def" id="VDMToolkit.VDM_seq_fcns|attribute"><span class="entity_def" id="VDMToolkit.VDM_seq_fcns|fact"><span>VDM_seq_fcns</span></span></span><span>        </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
  </span><span class="entity_def" id="VDMToolkit.VDM_seq_spec_pre|attribute"><span class="entity_def" id="VDMToolkit.VDM_seq_spec_pre|fact"><span>VDM_seq_spec_pre</span></span></span><span>    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
  </span><span class="entity_def" id="VDMToolkit.VDM_seq_spec_post_1|attribute"><span class="entity_def" id="VDMToolkit.VDM_seq_spec_post_1|fact"><span>VDM_seq_spec_post_1</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
  </span><span class="entity_def" id="VDMToolkit.VDM_seq_spec_post_2|attribute"><span class="entity_def" id="VDMToolkit.VDM_seq_spec_post_2|fact"><span>VDM_seq_spec_post_2</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
  </span><span class="entity_def" id="VDMToolkit.VDM_seq_spec_post_3|attribute"><span class="entity_def" id="VDMToolkit.VDM_seq_spec_post_3|fact"><span>VDM_seq_spec_post_3</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
  </span><span class="entity_def" id="VDMToolkit.VDM_seq_spec_post|attribute"><span class="entity_def" id="VDMToolkit.VDM_seq_spec_post|fact"><span>VDM_seq_spec_post</span></span></span><span>   </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
  </span><span class="entity_def" id="VDMToolkit.VDM_seq_spec|attribute"><span class="entity_def" id="VDMToolkit.VDM_seq_spec|fact"><span>VDM_seq_spec</span></span></span><span>        </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
  </span><span class="entity_def" id="VDMToolkit.VDM_seq|attribute"><span class="entity_def" id="VDMToolkit.VDM_seq|fact"><span>VDM_seq</span></span></span><span>             </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>

  </span><span class="entity_def" id="VDMToolkit.VDM_map_defs|attribute"><span class="entity_def" id="VDMToolkit.VDM_map_defs|fact"><span>VDM_map_defs</span></span></span><span>        </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>

  </span><span class="entity_def" id="VDMToolkit.VDM_map_fcns_simps|attribute"><span class="entity_def" id="VDMToolkit.VDM_map_fcns_simps|fact"><span>VDM_map_fcns_simps</span></span></span><span>  </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> 
  </span><span class="entity_def" id="VDMToolkit.VDM_map_fcns_1_simps|attribute"><span class="entity_def" id="VDMToolkit.VDM_map_fcns_1_simps|fact"><span>VDM_map_fcns_1_simps</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> 
  </span><span class="entity_def" id="VDMToolkit.VDM_map_fcns_2_simps|attribute"><span class="entity_def" id="VDMToolkit.VDM_map_fcns_2_simps|fact"><span>VDM_map_fcns_2_simps</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> 

  </span><span class="entity_def" id="VDMToolkit.VDM_map_fcns|attribute"><span class="entity_def" id="VDMToolkit.VDM_map_fcns|fact"><span>VDM_map_fcns</span></span></span><span>        </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
  </span><span class="entity_def" id="VDMToolkit.VDM_map_fcns_1|attribute"><span class="entity_def" id="VDMToolkit.VDM_map_fcns_1|fact"><span>VDM_map_fcns_1</span></span></span><span>      </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
  </span><span class="entity_def" id="VDMToolkit.VDM_map_fcns_2|attribute"><span class="entity_def" id="VDMToolkit.VDM_map_fcns_2|fact"><span>VDM_map_fcns_2</span></span></span><span>      </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
  </span><span class="entity_def" id="VDMToolkit.VDM_map_fcns_3|attribute"><span class="entity_def" id="VDMToolkit.VDM_map_fcns_3|fact"><span>VDM_map_fcns_3</span></span></span><span>      </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
  </span><span class="entity_def" id="VDMToolkit.VDM_map_fcns_4|attribute"><span class="entity_def" id="VDMToolkit.VDM_map_fcns_4|fact"><span>VDM_map_fcns_4</span></span></span><span>      </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>

  </span><span class="entity_def" id="VDMToolkit.VDM_map_comp|attribute"><span class="entity_def" id="VDMToolkit.VDM_map_comp|fact"><span>VDM_map_comp</span></span></span><span>        </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
  </span><span class="entity_def" id="VDMToolkit.VDM_map_comp_1|attribute"><span class="entity_def" id="VDMToolkit.VDM_map_comp_1|fact"><span>VDM_map_comp_1</span></span></span><span>      </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
  </span><span class="entity_def" id="VDMToolkit.VDM_map_comp_2|attribute"><span class="entity_def" id="VDMToolkit.VDM_map_comp_2|fact"><span>VDM_map_comp_2</span></span></span><span>      </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
  </span><span class="entity_def" id="VDMToolkit.VDM_map_comp_3|attribute"><span class="entity_def" id="VDMToolkit.VDM_map_comp_3|fact"><span>VDM_map_comp_3</span></span></span><span>      </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>

  </span><span class="entity_def" id="VDMToolkit.VDM_map|attribute"><span class="entity_def" id="VDMToolkit.VDM_map|fact"><span>VDM_map</span></span></span><span>             </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>

  </span><span class="entity_def" id="VDMToolkit.VDM_num_crc|attribute"><span class="entity_def" id="VDMToolkit.VDM_num_crc|fact"><span>VDM_num_crc</span></span></span><span>         </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
  </span><span class="entity_def" id="VDMToolkit.VDM_num_crc_1|attribute"><span class="entity_def" id="VDMToolkit.VDM_num_crc_1|fact"><span>VDM_num_crc_1</span></span></span><span>       </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
  </span><span class="entity_def" id="VDMToolkit.VDM_num_crc_2|attribute"><span class="entity_def" id="VDMToolkit.VDM_num_crc_2|fact"><span>VDM_num_crc_2</span></span></span><span>       </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
  </span><span class="entity_def" id="VDMToolkit.VDM_num_crc_3|attribute"><span class="entity_def" id="VDMToolkit.VDM_num_crc_3|fact"><span>VDM_num_crc_3</span></span></span><span>       </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
                  
  </span><span class="entity_def" id="VDMToolkit.VDM_stms_defs|attribute"><span class="entity_def" id="VDMToolkit.VDM_stms_defs|fact"><span>VDM_stms_defs</span></span></span><span>       </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> 
  </span><span class="entity_def" id="VDMToolkit.VDM_stms|attribute"><span class="entity_def" id="VDMToolkit.VDM_stms|fact"><span>VDM_stms</span></span></span><span>            </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>

  </span><span class="entity_def" id="VDMToolkit.VDM_spec|attribute"><span class="entity_def" id="VDMToolkit.VDM_spec|fact"><span>VDM_spec</span></span></span><span>            </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
  </span><span class="entity_def" id="VDMToolkit.VDM_all|attribute"><span class="entity_def" id="VDMToolkit.VDM_all|fact"><span>VDM_all</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_basic_defs|attribute"><span class="operator"><span>VDM_basic_defs</span></span></a><span class="main"><span>]</span></span><span>       </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_True_def|fact"><span>inv_True_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMChar_def|fact"><span>inv_VDMChar_def</span></a><span> </span><span class="comment1"><span>(</span><span>*</span><span>inv_bool_def </span><span>*</span><span>)</span></span><span>
                                </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMToken&apos;_def|fact"><span>inv_VDMToken'_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMToken_def|fact"><span>inv_VDMToken_def</span></a><span> 

</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_num_defs|attribute"><span class="operator"><span>VDM_num_defs</span></span></a><span class="main"><span>]</span></span><span>         </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMNat_def|fact"><span>inv_VDMNat_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMNat1_def|fact"><span>inv_VDMNat1_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMInt_def|fact"><span>inv_VDMInt_def</span></a><span>
                                </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMReal_def|fact"><span>inv_VDMReal_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMRat_def|fact"><span>inv_VDMRat_def</span></a><span>

</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_num_fcns|attribute"><span class="operator"><span>VDM_num_fcns</span></span></a><span class="main"><span>]</span></span><span>         </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_narrow_real_def|fact"><span>vdm_narrow_real_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_div_def|fact"><span>vdm_div_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_mod_def|fact"><span>vdm_mod_def</span></a><span>
                                </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_rem_def|fact"><span>vdm_rem_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_pow_def|fact"><span>vdm_pow_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_abs_def|fact"><span>vdm_abs_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_floor_def|fact"><span>vdm_floor_def</span></a><span>
                   
</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_num_spec_pre|attribute"><span class="operator"><span>VDM_num_spec_pre</span></span></a><span class="main"><span>]</span></span><span>     </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.pre_vdm_mod_def|fact"><span>pre_vdm_mod_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.pre_vdm_div_def|fact"><span>pre_vdm_div_def</span></a><span> 
                                </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.pre_vdm_rem_def|fact"><span>pre_vdm_rem_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.pre_vdm_pow_def|fact"><span>pre_vdm_pow_def</span></a><span>
                              
</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_num_spec_post|attribute"><span class="operator"><span>VDM_num_spec_post</span></span></a><span class="main"><span>]</span></span><span>    </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.post_vdm_mod_def|fact"><span>post_vdm_mod_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.post_vdm_div_def|fact"><span>post_vdm_div_def</span></a><span> 
                                </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.post_vdm_rem_def|fact"><span>post_vdm_rem_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.post_vdm_pow_def|fact"><span>post_vdm_pow_def</span></a><span>
                                </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.post_vdm_floor_def|fact"><span>post_vdm_floor_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.post_vdm_abs_def|fact"><span>post_vdm_abs_def</span></a><span>  


</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_set_defs|attribute"><span class="operator"><span>VDM_set_defs</span></span></a><span class="main"><span>]</span></span><span>         </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMSet_def|fact"><span>inv_VDMSet_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMSet1_def|fact"><span>inv_VDMSet1_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMSet&apos;_def|fact"><span>inv_VDMSet'_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMSet1&apos;_def|fact"><span>inv_VDMSet1'_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_SetElems_def|fact"><span>inv_SetElems_def</span></a><span> 
</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_set_fcns|attribute"><span class="operator"><span>VDM_set_fcns</span></span></a><span class="main"><span>]</span></span><span>         </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_card_def|fact"><span>vdm_card_def</span></a><span>
</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_set_spec_pre|attribute"><span class="operator"><span>VDM_set_spec_pre</span></span></a><span class="main"><span>]</span></span><span>     </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.pre_vdm_card_def|fact"><span>pre_vdm_card_def</span></a><span> 
</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_set_spec_post|attribute"><span class="operator"><span>VDM_set_spec_post</span></span></a><span class="main"><span>]</span></span><span>    </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.post_vdm_card_def|fact"><span>post_vdm_card_def</span></a><span>

</span><span class="keyword1"><span class="command"><span>thm</span></span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_num_fcns|fact"><span class="dynamic"><span class="dynamic"><span>VDM_num_fcns</span></span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_seq_defs|attribute"><span class="operator"><span>VDM_seq_defs</span></span></a><span class="main"><span>]</span></span><span>         </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMSeq&apos;_def|fact"><span>inv_VDMSeq'_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_VDMSeq1&apos;_def|fact"><span>inv_VDMSeq1'_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_SeqElems_def|fact"><span>inv_SeqElems_def</span></a><span>
</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_seq_fcns_1|attribute"><span class="operator"><span>VDM_seq_fcns_1</span></span></a><span class="main"><span>]</span></span><span>       </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.len_def|fact"><span>len_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.elems_def|fact"><span>elems_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inds_def|fact"><span>inds_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inds_as_nat_def|fact"><span>inds_as_nat_def</span></a><span> 
</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_seq_fcns_2|attribute"><span class="operator"><span>VDM_seq_fcns_2</span></span></a><span class="main"><span>]</span></span><span>       </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_reverse_def|fact"><span>vdm_reverse_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdmtake_def|fact"><span>vdmtake_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.seq_prefix_def|fact"><span>seq_prefix_def</span></a><span> 
</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_seq_fcns_3|attribute"><span class="operator"><span>VDM_seq_fcns_3</span></span></a><span class="main"><span>]</span></span><span>       </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSeq_def|fact"><span>applyVDMSeq_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq&apos;_def|fact"><span>applyVDMSubseq'_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.applyVDMSubseq_def|fact"><span>applyVDMSubseq_def</span></a><span>
</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_seq_spec_pre|attribute"><span class="operator"><span>VDM_seq_spec_pre</span></span></a><span class="main"><span>]</span></span><span>     </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.pre_hd_def|fact"><span>pre_hd_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.pre_tl_def|fact"><span>pre_tl_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.pre_applyVDMSeq_def|fact"><span>pre_applyVDMSeq_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.pre_applyVDMSubseq_def|fact"><span>pre_applyVDMSubseq_def</span></a><span>
</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_seq_spec_post_1|attribute"><span class="operator"><span>VDM_seq_spec_post_1</span></span></a><span class="main"><span>]</span></span><span>  </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.post_len_def|fact"><span>post_len_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.post_elems_def|fact"><span>post_elems_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.post_inds_def|fact"><span>post_inds_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.post_hd_def|fact"><span>post_hd_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.post_tl_def|fact"><span>post_tl_def</span></a><span>   
</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_seq_spec_post_2|attribute"><span class="operator"><span>VDM_seq_spec_post_2</span></span></a><span class="main"><span>]</span></span><span>  </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.post_vdm_reverse_def|fact"><span>post_vdm_reverse_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.post_vdmtake_def|fact"><span>post_vdmtake_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.post_seq_prefix_def|fact"><span>post_seq_prefix_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.post_append_def|fact"><span>post_append_def</span></a><span>
</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_seq_spec_post_3|attribute"><span class="operator"><span>VDM_seq_spec_post_3</span></span></a><span class="main"><span>]</span></span><span>  </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.post_applyVDMSeq_def|fact"><span>post_applyVDMSeq_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.post_applyVDMSubseq_def|fact"><span>post_applyVDMSubseq_def</span></a><span> 

</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_map_defs|attribute"><span class="operator"><span>VDM_map_defs</span></span></a><span class="main"><span>]</span></span><span>         </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_Option_def|fact"><span>inv_Option_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_Map1_def|fact"><span>inv_Map1_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_Map_def|fact"><span>inv_Map_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.inv_Inmap_def|fact"><span>inv_Inmap_def</span></a><span>
</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_map_fcns_1|attribute"><span class="operator"><span>VDM_map_fcns_1</span></span></a><span class="main"><span>]</span></span><span>       </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.rng_def|fact"><span>rng_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger_def|fact"><span>dagger_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.munion_def|fact"><span>munion_def</span></a><span> 
</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_map_fcns_2|attribute"><span class="operator"><span>VDM_map_fcns_2</span></span></a><span class="main"><span>]</span></span><span>       </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_restr_def|fact"><span>dom_restr_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dom_antirestr_def|fact"><span>dom_antirestr_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.rng_restr_def|fact"><span>rng_restr_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.rng_antirestr_def|fact"><span>rng_antirestr_def</span></a><span>
</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_map_fcns_3|attribute"><span class="operator"><span>VDM_map_fcns_3</span></span></a><span class="main"><span>]</span></span><span>       </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_merge_def|fact"><span>vdm_merge_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdm_inverse_def|fact"><span>vdm_inverse_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.map_subset_def|fact"><span>map_subset_def</span></a><span> 
</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_map_fcns_4|attribute"><span class="operator"><span>VDM_map_fcns_4</span></span></a><span class="main"><span>]</span></span><span>       </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.map_comp_def|fact"><span>map_comp_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.map_compatible_def|fact"><span>map_compatible_def</span></a><span>
</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_map_fcns_1_simps|attribute"><span class="operator"><span>VDM_map_fcns_1_simps</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.dagger_simps|fact"><span>dagger_simps</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.upd_simps|fact"><span>upd_simps</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.munion_simps|fact"><span>munion_simps</span></a><span> 
</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_map_fcns_2_simps|attribute"><span class="operator"><span>VDM_map_fcns_2_simps</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.restr_simps|fact"><span>restr_simps</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.antirestr_simps|fact"><span>antirestr_simps</span></a><span>
</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_map_comp_1|attribute"><span class="operator"><span>VDM_map_comp_1</span></span></a><span class="main"><span>]</span></span><span>       </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.maplet_defs|fact"><span>maplet_defs</span></a><span>
</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_map_comp_2|attribute"><span class="operator"><span>VDM_map_comp_2</span></span></a><span class="main"><span>]</span></span><span>       </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.mapCompSetBound_defs|fact"><span>mapCompSetBound_defs</span></a><span> 
</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_map_comp_3|attribute"><span class="operator"><span>VDM_map_comp_3</span></span></a><span class="main"><span>]</span></span><span>       </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.mapCompTypeBound_defs|fact"><span>mapCompTypeBound_defs</span></a><span>
</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_num_crc_1|attribute"><span class="operator"><span>VDM_num_crc_1</span></span></a><span class="main"><span>]</span></span><span>        </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.is_VDMRealWhole_def|fact"><span>is_VDMRealWhole_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.is_VDMRatWhole_def|fact"><span>is_VDMRatWhole_def</span></a><span> 
</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_num_crc_2|attribute"><span class="operator"><span>VDM_num_crc_2</span></span></a><span class="main"><span>]</span></span><span>        </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdmint_of_real_def|fact"><span>vdmint_of_real_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdmint_of_rat_def|fact"><span>vdmint_of_rat_def</span></a><span>
</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_num_crc_3|attribute"><span class="operator"><span>VDM_num_crc_3</span></span></a><span class="main"><span>]</span></span><span>        </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.total_coercion_def|fact"><span>total_coercion_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdmset_of_t_def|fact"><span>vdmset_of_t_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.vdmseq_of_t_def|fact"><span>vdmseq_of_t_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.isTest_def|fact"><span>isTest_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.isTest&apos;_def|fact"><span>isTest'_def</span></a><span>
</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_stms_defs|attribute"><span class="operator"><span>VDM_stms_defs</span></span></a><span class="main"><span>]</span></span><span>        </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.seqcomp_def|fact"><span>seqcomp_def</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.seqcomps.simps|fact"><span>seqcomps.simps</span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.seqcomps&apos;_def|fact"><span>seqcomps'_def</span></a><span>

</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_num_spec|attribute"><span class="operator"><span>VDM_num_spec</span></span></a><span class="main"><span>]</span></span><span>         </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_num_spec_pre|fact"><span class="dynamic"><span class="dynamic"><span>VDM_num_spec_pre</span></span></span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_num_spec_post|fact"><span class="dynamic"><span class="dynamic"><span>VDM_num_spec_post</span></span></span></a><span>
</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_set_spec|attribute"><span class="operator"><span>VDM_set_spec</span></span></a><span class="main"><span>]</span></span><span>         </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_set_spec_pre|fact"><span class="dynamic"><span class="dynamic"><span>VDM_set_spec_pre</span></span></span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_set_spec_post|fact"><span class="dynamic"><span class="dynamic"><span>VDM_set_spec_post</span></span></span></a><span>
</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_seq_spec_post|attribute"><span class="operator"><span>VDM_seq_spec_post</span></span></a><span class="main"><span>]</span></span><span>    </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_seq_spec_post_3|fact"><span class="dynamic"><span class="dynamic"><span>VDM_seq_spec_post_3</span></span></span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_seq_spec_post_2|fact"><span class="dynamic"><span class="dynamic"><span>VDM_seq_spec_post_2</span></span></span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_seq_spec_post_1|fact"><span class="dynamic"><span class="dynamic"><span>VDM_seq_spec_post_1</span></span></span></a><span>
</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_seq_spec|attribute"><span class="operator"><span>VDM_seq_spec</span></span></a><span class="main"><span>]</span></span><span>         </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_seq_spec_pre|fact"><span class="dynamic"><span class="dynamic"><span>VDM_seq_spec_pre</span></span></span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_seq_spec_post|fact"><span class="dynamic"><span class="dynamic"><span>VDM_seq_spec_post</span></span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_seq_fcns|attribute"><span class="operator"><span>VDM_seq_fcns</span></span></a><span class="main"><span>]</span></span><span>         </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_seq_fcns_3|fact"><span class="dynamic"><span class="dynamic"><span>VDM_seq_fcns_3</span></span></span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_seq_fcns_2|fact"><span class="dynamic"><span class="dynamic"><span>VDM_seq_fcns_2</span></span></span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_seq_fcns_1|fact"><span class="dynamic"><span class="dynamic"><span>VDM_seq_fcns_1</span></span></span></a><span>
</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_map_fcns|attribute"><span class="operator"><span>VDM_map_fcns</span></span></a><span class="main"><span>]</span></span><span>         </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_map_fcns_4|fact"><span class="dynamic"><span class="dynamic"><span>VDM_map_fcns_4</span></span></span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_map_fcns_3|fact"><span class="dynamic"><span class="dynamic"><span>VDM_map_fcns_3</span></span></span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_map_fcns_2|fact"><span class="dynamic"><span class="dynamic"><span>VDM_map_fcns_2</span></span></span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_map_fcns_1|fact"><span class="dynamic"><span class="dynamic"><span>VDM_map_fcns_1</span></span></span></a><span> 
</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_map_fcns_simps|attribute"><span class="operator"><span>VDM_map_fcns_simps</span></span></a><span class="main"><span>]</span></span><span>   </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_map_fcns_2_simps|fact"><span class="dynamic"><span class="dynamic"><span>VDM_map_fcns_2_simps</span></span></span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_map_fcns_1_simps|fact"><span class="dynamic"><span class="dynamic"><span>VDM_map_fcns_1_simps</span></span></span></a><span>
</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_map_comp|attribute"><span class="operator"><span>VDM_map_comp</span></span></a><span class="main"><span>]</span></span><span>         </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_map_comp_3|fact"><span class="dynamic"><span class="dynamic"><span>VDM_map_comp_3</span></span></span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_map_comp_2|fact"><span class="dynamic"><span class="dynamic"><span>VDM_map_comp_2</span></span></span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_map_comp_1|fact"><span class="dynamic"><span class="dynamic"><span>VDM_map_comp_1</span></span></span></a><span>
</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_num_crc|attribute"><span class="operator"><span>VDM_num_crc</span></span></a><span class="main"><span>]</span></span><span>          </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_num_crc_3|fact"><span class="dynamic"><span class="dynamic"><span>VDM_num_crc_3</span></span></span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_num_crc_2|fact"><span class="dynamic"><span class="dynamic"><span>VDM_num_crc_2</span></span></span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_num_crc_1|fact"><span class="dynamic"><span class="dynamic"><span>VDM_num_crc_1</span></span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_num|attribute"><span class="operator"><span>VDM_num</span></span></a><span class="main"><span>]</span></span><span>  </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_num_defs|fact"><span class="dynamic"><span class="dynamic"><span>VDM_num_defs</span></span></span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_num_fcns|fact"><span class="dynamic"><span class="dynamic"><span>VDM_num_fcns</span></span></span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_num_crc|fact"><span class="dynamic"><span class="dynamic"><span>VDM_num_crc</span></span></span></a><span> 
</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_set|attribute"><span class="operator"><span>VDM_set</span></span></a><span class="main"><span>]</span></span><span>  </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_seq_defs|fact"><span class="dynamic"><span class="dynamic"><span>VDM_seq_defs</span></span></span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_set_fcns|fact"><span class="dynamic"><span class="dynamic"><span>VDM_set_fcns</span></span></span></a><span>
</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_seq|attribute"><span class="operator"><span>VDM_seq</span></span></a><span class="main"><span>]</span></span><span>  </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_seq_defs|fact"><span class="dynamic"><span class="dynamic"><span>VDM_seq_defs</span></span></span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_seq_fcns|fact"><span class="dynamic"><span class="dynamic"><span>VDM_seq_fcns</span></span></span></a><span>
</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_map|attribute"><span class="operator"><span>VDM_map</span></span></a><span class="main"><span>]</span></span><span>  </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_map_defs|fact"><span class="dynamic"><span class="dynamic"><span>VDM_map_defs</span></span></span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_map_fcns|fact"><span class="dynamic"><span class="dynamic"><span>VDM_map_fcns</span></span></span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_map_comp|fact"><span class="dynamic"><span class="dynamic"><span>VDM_map_comp</span></span></span></a><span>
</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_stms|attribute"><span class="operator"><span>VDM_stms</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_stms_defs|fact"><span class="dynamic"><span class="dynamic"><span>VDM_stms_defs</span></span></span></a><span>
</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_spec|attribute"><span class="operator"><span>VDM_spec</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_num_spec|fact"><span class="dynamic"><span class="dynamic"><span>VDM_num_spec</span></span></span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_set_spec|fact"><span class="dynamic"><span class="dynamic"><span>VDM_set_spec</span></span></span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_seq_spec|fact"><span class="dynamic"><span class="dynamic"><span>VDM_seq_spec</span></span></span></a><span>
</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_all|attribute"><span class="operator"><span>VDM_all</span></span></a><span class="main"><span>]</span></span><span>  </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_basic_defs|fact"><span class="dynamic"><span class="dynamic"><span>VDM_basic_defs</span></span></span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_num|fact"><span class="dynamic"><span class="dynamic"><span>VDM_num</span></span></span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_set|fact"><span class="dynamic"><span class="dynamic"><span>VDM_set</span></span></span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_seq|fact"><span class="dynamic"><span class="dynamic"><span>VDM_seq</span></span></span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_map|fact"><span class="dynamic"><span class="dynamic"><span>VDM_map</span></span></span></a><span> </span><a class="entity_ref" href="VDMToolkit.html#VDMToolkit.VDM_stms|fact"><span class="dynamic"><span class="dynamic"><span>VDM_stms</span></span></span></a><span>  

</span><span class="comment1"><span>(</span><span>*</span><span>&lt;</span><span>*</span><span>)</span></span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span class="comment1"><span>(</span><span>*</span><span>&gt;</span><span>*</span><span>)</span></span></pre>
</body>

</html>